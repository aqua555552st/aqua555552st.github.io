<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>23.Linuxç¡¬ç›˜åˆ†åŒº</title>
      <link href="/2024/02/17/23-Linux%E7%A1%AC%E7%9B%98%E5%88%86%E5%8C%BA/"/>
      <url>/2024/02/17/23-Linux%E7%A1%AC%E7%9B%98%E5%88%86%E5%8C%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="Linuxç¡¬ç›˜åˆ†åŒº"><a href="#Linuxç¡¬ç›˜åˆ†åŒº" class="headerlink" title="Linuxç¡¬ç›˜åˆ†åŒº"></a>Linuxç¡¬ç›˜åˆ†åŒº</h1><h2 id="åŸç†ä»‹ç»"><a href="#åŸç†ä»‹ç»" class="headerlink" title="åŸç†ä»‹ç»"></a>åŸç†ä»‹ç»</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/B919E6628DE3CEC390ED448ADC4F0769.png"></p><h3 id="ç¤ºæ„å›¾"><a href="#ç¤ºæ„å›¾" class="headerlink" title="ç¤ºæ„å›¾"></a>ç¤ºæ„å›¾</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/50908C42025087DAAE7163CB2110CCE1.png"></p><h3 id="æŸ¥çœ‹è®¾å¤‡æŒ‚è½½æƒ…å†µ"><a href="#æŸ¥çœ‹è®¾å¤‡æŒ‚è½½æƒ…å†µ" class="headerlink" title="æŸ¥çœ‹è®¾å¤‡æŒ‚è½½æƒ…å†µ"></a>æŸ¥çœ‹è®¾å¤‡<u>æŒ‚è½½æƒ…å†µ</u></h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ lsblk <span class="token punctuation">[</span>-f<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220811195633807.png"></p><hr><h2 id="ç¡¬ç›˜è¯´æ˜"><a href="#ç¡¬ç›˜è¯´æ˜" class="headerlink" title="ç¡¬ç›˜è¯´æ˜"></a>ç¡¬ç›˜è¯´æ˜</h2><h2 id=""><a href="#" class="headerlink" title=""></a><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/1735BDA44E93F88680494D1ED9549E5E.png"></h2><hr><h2 id="æŒ‚è½½çš„ç»å…¸æ¡ˆä¾‹"><a href="#æŒ‚è½½çš„ç»å…¸æ¡ˆä¾‹" class="headerlink" title="æŒ‚è½½çš„ç»å…¸æ¡ˆä¾‹"></a>æŒ‚è½½çš„ç»å…¸æ¡ˆä¾‹</h2><h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/A733E9CA8A984FF63DBBB01528CFE20D.png"></p><h3 id="æ¡ˆä¾‹è¯´æ˜"><a href="#æ¡ˆä¾‹è¯´æ˜" class="headerlink" title="æ¡ˆä¾‹è¯´æ˜"></a>æ¡ˆä¾‹è¯´æ˜</h3><p>å°†<strong>ç¡¬ç›˜sdbçš„åˆ†åŒº1</strong> <strong>æŒ‚è½½</strong>åˆ°æ ¹ç›®å½•ä¸‹çš„ <strong>&#x2F;newdiskç›®å½•</strong></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/F51568FC723F2D7D5E618D04BFA48419.png"></p><h3 id="å…·ä½“æ“ä½œ"><a href="#å…·ä½“æ“ä½œ" class="headerlink" title="å…·ä½“æ“ä½œ"></a>å…·ä½“æ“ä½œ</h3><p><u><strong>step1ï¼šè™šæ‹Ÿæœºå¢åŠ ç¡¬ç›˜</strong></u></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220811201301470.png" alt="" style="zoom:50%;" /><p><strong>å®Œæˆï¼š</strong>     <img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220811201715961.png">ï¼Œ<strong>é‡å¯ç³»ç»Ÿã€‚</strong></p><p><strong>éªŒè¯ï¼š</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220811202338368.png" alt="" style="zoom:80%;" /><p><strong><u>step2ï¼šå¯¹sdbç¡¬ç›˜è¿›è¡Œåˆ†åŒº</u></strong></p><blockquote><p>è¡¥å……ï¼š<strong>åˆ†åŒºå‘½ä»¤</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span>$ <span class="token function">fdisk</span> /dev/sdb<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></blockquote><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220811203049749.png" alt="" style="zoom: 67%;" /><blockquote><p>æ³¨æ„ï¼š<img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/9E14973C15363009DA35C8B6619318B1.png" alt="" style="zoom: 40%;" /></p></blockquote><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220811203011905.png" alt="" style="zoom: 65%;" /><p><strong>éªŒè¯ï¼š</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220811203320814.png" alt="" style="zoom:67%;" /><p><strong><u>step3ï¼šæ ¼å¼åŒ–ç£ç›˜ï¼ˆç»™sdbç¡¬ç›˜åˆ›å»ºä¸€ä¸ª40ä½çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼‰</u></strong></p><blockquote><p>è¡¥å……æŒ‡ä»¤ï¼š<strong>åˆ†åŒºå‘½ä»¤</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span>$ <span class="token function">mkfs</span> <span class="token parameter variable">-t</span> ext4 /dev/sdb1                                 //å…¶ä¸­ï¼Œext4æ˜¯åˆ†åŒºç±»å‹<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></blockquote><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220811203913179.png" alt="" style="zoom:80%;" /><p><strong>éªŒè¯ï¼šæŸ¥çœ‹åˆ†åŒº æ˜¯å¦å·²ç»æ ¼å¼åŒ–</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220811204204257.png" alt="image-20220811204204257" style="zoom:67%;" /><p><strong><u>step4ï¼šæŒ‚è½½</u></strong></p><blockquote><p>è¡¥å……ï¼š<strong>æŒ‚è½½æŒ‡ä»¤</strong>    <img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/E3F95D4BD38E0E672572E6CBEE938513.png" alt="" style="zoom: 50%;" /></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span>$ <span class="token function">mount</span> /dev/ç£ç›˜è·¯å¾„ /æŒ‚è½½ç‚¹<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>å¸è½½æŒ‡ä»¤</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span>$ <span class="token function">umount</span> /dev/ç£ç›˜è·¯å¾„ <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></blockquote><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220811204736985.png"></p><p><strong>éªŒè¯ï¼š</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220811204849459.png" alt="" style="zoom:67%;" /><p><strong><u>step5:è®¾ç½®æ°¸ä¹…æŒ‚è½½</u></strong></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/0EO5ZOVRB%7D%5DVE%5DEGNF%7DN73.png"></p><p>ä¿®æ”¹ &#x2F;etc&#x2F;fstab çš„æ–‡ä»¶ï¼Œå†é‡å¯ç³»ç»Ÿ</p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220811210550449.png"></p><p><strong>éªŒè¯ï¼š</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220811210721346.png" alt="" style="zoom:67%;" />]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>22.at ä»»åŠ¡è°ƒåº¦æœºåˆ¶</title>
      <link href="/2024/02/17/22-at-%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E6%9C%BA%E5%88%B6/"/>
      <url>/2024/02/17/22-at-%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E6%9C%BA%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="at-ä»»åŠ¡è°ƒåº¦æœºåˆ¶"><a href="#at-ä»»åŠ¡è°ƒåº¦æœºåˆ¶" class="headerlink" title="at ä»»åŠ¡è°ƒåº¦æœºåˆ¶"></a>at ä»»åŠ¡è°ƒåº¦æœºåˆ¶</h1><h2 id="åŸºæœ¬ä»‹ç»"><a href="#åŸºæœ¬ä»‹ç»" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/44D8BC719864CE43B9BE117B0C97C5E2.png"></p><blockquote><p><strong>è¡¥å……</strong>ï¼ˆ4ï¼‰ï¼šæŸ¥<strong>çœ‹å½“å‰æ‰€æœ‰è¿›ç¨‹æŒ‡ä»¤</strong>ğŸ‘‡</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span>$ <span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token punctuation">[</span><span class="token operator">|</span> <span class="token function">grep</span> atd<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220811140728193.png"></p></blockquote><h3 id="ç¤ºæ„å›¾"><a href="#ç¤ºæ„å›¾" class="headerlink" title="ç¤ºæ„å›¾"></a>ç¤ºæ„å›¾</h3><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/02302D9BF5CBC7011ED4938C68FCD1E3.png" alt="" style="zoom: 50%;" /><hr><h2 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h2><h3 id="è®¾ç½®å®šæ—¶ä»»åŠ¡"><a href="#è®¾ç½®å®šæ—¶ä»»åŠ¡" class="headerlink" title="è®¾ç½®å®šæ—¶ä»»åŠ¡"></a>è®¾ç½®å®šæ—¶ä»»åŠ¡</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ at <span class="token punctuation">[</span>é€‰é¡¹<span class="token punctuation">]</span> <span class="token punctuation">[</span>æ—¶é—´<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><strong>at å‘½ä»¤é€‰é¡¹</strong>ï¼š<img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/FF4E48F667300146BF99E7E8A1F32ED4.png" alt="" style="zoom: 50%;" /></p></blockquote><h3 id="åˆ é™¤å®šæ—¶ä»»åŠ¡"><a href="#åˆ é™¤å®šæ—¶ä»»åŠ¡" class="headerlink" title="åˆ é™¤å®šæ—¶ä»»åŠ¡"></a>åˆ é™¤å®šæ—¶ä»»åŠ¡</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ atrm ç¼–å·<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="æŸ¥å¯»å®šæ—¶ä»»åŠ¡"><a href="#æŸ¥å¯»å®šæ—¶ä»»åŠ¡" class="headerlink" title="æŸ¥å¯»å®šæ—¶ä»»åŠ¡"></a>æŸ¥å¯»å®šæ—¶ä»»åŠ¡</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ atq<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>æ³¨æ„ï¼š</strong></p><ol><li><strong>Ctrl + Dä¸¤æ¬¡ ç»“æŸatå‘½ä»¤çš„è¾“å…¥</strong></li><li>**è¾“å…¥é”™äº†ï¼ŒCtrl + Backspaceåˆ é™¤ **</li></ol><hr><h2 id="at-æ—¶é—´å®šä¹‰"><a href="#at-æ—¶é—´å®šä¹‰" class="headerlink" title="at æ—¶é—´å®šä¹‰"></a>at æ—¶é—´å®šä¹‰</h2><p><strong>atæŒ‡å®šæ—¶é—´çš„æ–¹æ³•ğŸ‘‡</strong></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/6FAD6DB4C899F7D46A977AB2BE6DC526.png"></p><hr><h2 id="åº”ç”¨å®ä¾‹"><a href="#åº”ç”¨å®ä¾‹" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h2><h3 id="æ¡ˆä¾‹1ï¼š2å¤©åçš„ä¸‹åˆ5ç‚¹æ‰§è¡Œ-bin-ls-home"><a href="#æ¡ˆä¾‹1ï¼š2å¤©åçš„ä¸‹åˆ5ç‚¹æ‰§è¡Œ-bin-ls-home" class="headerlink" title="æ¡ˆä¾‹1ï¼š2å¤©åçš„ä¸‹åˆ5ç‚¹æ‰§è¡Œ &#x2F;bin&#x2F;ls &#x2F;home"></a>æ¡ˆä¾‹1ï¼š2å¤©åçš„ä¸‹åˆ5ç‚¹æ‰§è¡Œ &#x2F;bin&#x2F;ls &#x2F;home</h3><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220811145754455.png" alt="" style="zoom:80%;" /><h3 id="æ¡ˆä¾‹2ï¼šatqå‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿä¸­æ²¡æœ‰æ‰§è¡Œçš„å·¥ä½œä»»åŠ¡"><a href="#æ¡ˆä¾‹2ï¼šatqå‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿä¸­æ²¡æœ‰æ‰§è¡Œçš„å·¥ä½œä»»åŠ¡" class="headerlink" title="æ¡ˆä¾‹2ï¼šatqå‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿä¸­æ²¡æœ‰æ‰§è¡Œçš„å·¥ä½œä»»åŠ¡"></a>æ¡ˆä¾‹2ï¼šatqå‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿä¸­æ²¡æœ‰æ‰§è¡Œçš„å·¥ä½œä»»åŠ¡</h3><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220811145821214.png" alt="" style="zoom:80%;" /><h3 id="æ¡ˆä¾‹3ï¼šæ˜å¤©17ç‚¹é’Ÿï¼Œè¾“å…¥æ—¶é—´åˆ°æŒ‡å®šæ–‡ä»¶å†…ï¼Œæ¯”å¦‚-root-date100-log"><a href="#æ¡ˆä¾‹3ï¼šæ˜å¤©17ç‚¹é’Ÿï¼Œè¾“å…¥æ—¶é—´åˆ°æŒ‡å®šæ–‡ä»¶å†…ï¼Œæ¯”å¦‚-root-date100-log" class="headerlink" title="æ¡ˆä¾‹3ï¼šæ˜å¤©17ç‚¹é’Ÿï¼Œè¾“å…¥æ—¶é—´åˆ°æŒ‡å®šæ–‡ä»¶å†…ï¼Œæ¯”å¦‚ &#x2F;root&#x2F;date100.log"></a>æ¡ˆä¾‹3ï¼šæ˜å¤©17ç‚¹é’Ÿï¼Œè¾“å…¥æ—¶é—´åˆ°æŒ‡å®šæ–‡ä»¶å†…ï¼Œæ¯”å¦‚ &#x2F;root&#x2F;date100.log</h3><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220811145839288.png" alt="" style="zoom:80%;" /><h3 id="æ¡ˆä¾‹4ï¼š2åˆ†é’Ÿåï¼Œè¾“å…¥æ—¶é—´åˆ°æŒ‡å®šæ–‡ä»¶å†…ï¼Œæ¯”å¦‚-root-date200-log"><a href="#æ¡ˆä¾‹4ï¼š2åˆ†é’Ÿåï¼Œè¾“å…¥æ—¶é—´åˆ°æŒ‡å®šæ–‡ä»¶å†…ï¼Œæ¯”å¦‚-root-date200-log" class="headerlink" title="æ¡ˆä¾‹4ï¼š2åˆ†é’Ÿåï¼Œè¾“å…¥æ—¶é—´åˆ°æŒ‡å®šæ–‡ä»¶å†…ï¼Œæ¯”å¦‚ &#x2F;root&#x2F;date200.log"></a>æ¡ˆä¾‹4ï¼š2åˆ†é’Ÿåï¼Œè¾“å…¥æ—¶é—´åˆ°æŒ‡å®šæ–‡ä»¶å†…ï¼Œæ¯”å¦‚ &#x2F;root&#x2F;date200.log</h3><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220811150024727.png" alt="" style="zoom:80%;" /><h3 id="æ¡ˆä¾‹5ï¼šåˆ é™¤å·²ç»è®¾ç½®çš„ä»»åŠ¡"><a href="#æ¡ˆä¾‹5ï¼šåˆ é™¤å·²ç»è®¾ç½®çš„ä»»åŠ¡" class="headerlink" title="æ¡ˆä¾‹5ï¼šåˆ é™¤å·²ç»è®¾ç½®çš„ä»»åŠ¡"></a>æ¡ˆä¾‹5ï¼šåˆ é™¤å·²ç»è®¾ç½®çš„ä»»åŠ¡</h3><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220811151125706.png" alt="" style="zoom:80%;" />]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>21.crond ä»»åŠ¡è°ƒåº¦</title>
      <link href="/2024/02/17/21-crond-%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6/"/>
      <url>/2024/02/17/21-crond-%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6/</url>
      
        <content type="html"><![CDATA[<h1 id="crond-ä»»åŠ¡è°ƒåº¦"><a href="#crond-ä»»åŠ¡è°ƒåº¦" class="headerlink" title="crond ä»»åŠ¡è°ƒåº¦"></a>crond ä»»åŠ¡è°ƒåº¦</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/3901F5D6BDA4BE523ABA625C8FA60BDB.png"></p><p>crondç¨‹åº<strong>å®šæ—¶è°ƒç”¨</strong> ç¨‹åº&#x2F;è„šæœ¬&#x2F;æŒ‡ä»¤ğŸ‘‡</p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/55BD24419E9066E5A4DE94DA6FAFFFC8.png" alt="" style="zoom:65%;" /><hr><h2 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">crontab</span> <span class="token punctuation">[</span>é€‰é¡¹<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><strong>å¸¸ç”¨é€‰é¡¹ï¼š</strong><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/DB4C7EA3FADF925D22BCA06E1E6DC108.png" alt="" style="zoom:50%;" /></p></blockquote><hr><h2 id="å¿«é€Ÿå…¥é—¨"><a href="#å¿«é€Ÿå…¥é—¨" class="headerlink" title="å¿«é€Ÿå…¥é—¨"></a>å¿«é€Ÿå…¥é—¨</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/D2B066138EAB11D2629CE055AB802E02.png"></p><hr><h2 id="å ä½ç¬¦è¯´æ˜"><a href="#å ä½ç¬¦è¯´æ˜" class="headerlink" title="å ä½ç¬¦è¯´æ˜"></a>å ä½ç¬¦è¯´æ˜</h2><p><strong><code>*</code>1~5: åˆ† æ—¶ å¤© æœˆ å‘¨</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/BD3169F0BB4DF06994AB937695B39CA2.png" alt="" style="zoom: 67%;" /><h3 id="ç‰¹æ®Šç¬¦å·-è¯´æ˜"><a href="#ç‰¹æ®Šç¬¦å·-è¯´æ˜" class="headerlink" title="ç‰¹æ®Šç¬¦å· è¯´æ˜"></a>ç‰¹æ®Šç¬¦å· è¯´æ˜</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/1BE517263B6544DD8B4A9E76468EAD2C.png"></p><h3 id="ç‰¹å®šæ—¶é—´æ‰§è¡Œä»»åŠ¡æ¡ˆä¾‹"><a href="#ç‰¹å®šæ—¶é—´æ‰§è¡Œä»»åŠ¡æ¡ˆä¾‹" class="headerlink" title="ç‰¹å®šæ—¶é—´æ‰§è¡Œä»»åŠ¡æ¡ˆä¾‹"></a>ç‰¹å®šæ—¶é—´æ‰§è¡Œä»»åŠ¡æ¡ˆä¾‹</h3><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/A9790C8224FD017FE1CA9B34D1983CCE.png" alt="" style="zoom: 60%;" /><hr><h2 id="åº”ç”¨å®ä¾‹"><a href="#åº”ç”¨å®ä¾‹" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/2E599E0E6A07DFCDD040D51E254AAD83.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/D95EFE90F5D1695EA304C24A42775B64.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/68202A9BA624424ED351DBC515E9D141.png"></p><p><strong>step1ï¼šå†™shellè„šæœ¬ [vim &#x2F;home&#x2F;my.sh]ï¼Œæ³¨æ„å¢åŠ æ‰§è¡Œæƒé™</strong> </p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220811133659243.png"></p><p><strong>step2ï¼šä½¿ç”¨crondä»»åŠ¡è°ƒåº¦ [crontab -e]</strong> </p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220811133603425.png"></p><p><strong>[*&#x2F;1 * * * * &#x2F;home&#x2F;my.sh]</strong></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/ZQHIC8A%5D_DSJG1XLOR%5B%7DGZI.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/CD97197CEFC0D1DEBBA89367443D56E2.png"></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºXMLé…ç½®çš„AOP</title>
      <link href="/2024/02/17/%E5%9F%BA%E4%BA%8EXML%E9%85%8D%E7%BD%AE%E7%9A%84AOP/"/>
      <url>/2024/02/17/%E5%9F%BA%E4%BA%8EXML%E9%85%8D%E7%BD%AE%E7%9A%84AOP/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºäºXMLé…ç½®çš„AOP"><a href="#åŸºäºXMLé…ç½®çš„AOP" class="headerlink" title="åŸºäºXMLé…ç½®çš„AOP"></a>åŸºäºXMLé…ç½®çš„AOP</h1><h2 id="åŸºæœ¬è¯´æ˜"><a href="#åŸºæœ¬è¯´æ˜" class="headerlink" title="åŸºæœ¬è¯´æ˜"></a>åŸºæœ¬è¯´æ˜</h2><p><strong>å‰é¢æˆ‘ä»¬æ˜¯é€šè¿‡æ³¨è§£æ¥é…ç½®AOPçš„ï¼Œåœ¨springä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡xmlçš„æ–¹å¼æ¥é…ç½®AOPã€‚</strong></p><hr><h2 id="åº”ç”¨å®ä¾‹"><a href="#åº”ç”¨å®ä¾‹" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h2><p>åœ¨<code>com.lhyedu.spring.aop.xml</code>ç›®å½•ä¸‹ï¼Œåˆ›å»º<code>SmartAnimalable.java</code>å’Œ<code>SmartDog.java</code></p><p>SmartAnimalableç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>xml</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SmartAnimalable</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">float</span> <span class="token function">getSum</span><span class="token punctuation">(</span><span class="token keyword">float</span> i<span class="token punctuation">,</span> <span class="token keyword">float</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">float</span> <span class="token function">getSub</span><span class="token punctuation">(</span><span class="token keyword">float</span> i<span class="token punctuation">,</span> <span class="token keyword">float</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>SmartDogç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>xml</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SmartDog</span> <span class="token keyword">implements</span> <span class="token class-name">SmartAnimalable</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">getSum</span><span class="token punctuation">(</span><span class="token keyword">float</span> i<span class="token punctuation">,</span> <span class="token keyword">float</span> j<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">float</span> result <span class="token operator">=</span> i <span class="token operator">+</span> j<span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ–¹æ³•å†…éƒ¨æ‰“å°result = "</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">getSub</span><span class="token punctuation">(</span><span class="token keyword">float</span> i<span class="token punctuation">,</span> <span class="token keyword">float</span> j<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">float</span> result <span class="token operator">=</span> i <span class="token operator">-</span> j<span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ–¹æ³•å†…éƒ¨æ‰“å°result = "</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>åˆ‡é¢ç±»ï¼šSmartAnimalAspect</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>xml</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span><span class="token class-name">JoinPoint</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span><span class="token class-name">Signature</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span></span><span class="token punctuation">;</span><span class="token comment">/** * åˆ‡é¢ç±» * ä¸é€‚åº”æ³¨è§£ï¼Œä½¿ç”¨xmlé…ç½®ï¼ */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SmartAnimalAspect</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//å‰ç½®é€šçŸ¥</span>    <span class="token keyword">public</span> <span class="token keyword">void</span>  <span class="token function">f1</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Signature</span> signature <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åŸºäºXML(å‰ç½®é€šçŸ¥)-æ—¥å¿—--æ–¹æ³•å:"</span> <span class="token operator">+</span> signature<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token operator">+</span> <span class="token string">"--æ–¹æ³•å‚æ•°:"</span> <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>joinPoint<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//è¿”å›é€šçŸ¥</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">,</span> <span class="token class-name">Object</span> res<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Signature</span> signature <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åŸºäºXML(è¿”å›é€šçŸ¥)-æ–¹æ³•æ‰§è¡Œæ¥æ”¶--æ—¥å¿—--æ–¹æ³•å:"</span>                <span class="token operator">+</span> signature<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"-è¿”å›ç»“æœ:"</span> <span class="token operator">+</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//å¼‚å¸¸é€šçŸ¥</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">f3</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">,</span> <span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åŸºäºXML(å¼‚å¸¸é€šçŸ¥)-å‡ºç°å¼‚å¸¸--æ—¥å¿—--å¼‚å¸¸ä¿¡æ¯="</span> <span class="token operator">+</span> throwable<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//æœ€ç»ˆé€šçŸ¥</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">f4</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Signature</span> signature <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åŸºäºXML(æœ€ç»ˆé€šçŸ¥)-æ–¹æ³•æœ€ç»ˆæ‰§è¡Œå®Œæ¯•--æ—¥å¿—--æ–¹æ³•å:"</span>                <span class="token operator">+</span> signature<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>beans.xml</strong></p><p>å…ˆé…ç½®beanå¯¹è±¡</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--ä½¿ç”¨XMLé…ç½®å®ŒæˆAOPç¼–ç¨‹--></span><span class="token comment">&lt;!--é…ç½®ï¼šåˆ‡é¢ç±»å¯¹è±¡çš„bean--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.aop.xml.SmartAnimalAspect<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aspect<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token comment">&lt;!--é…ç½®ä¸€ä¸ªSmartDogå¯¹è±¡--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.aop.xml.SmartDog<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>smartDog<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><u>å†é…ç½®åˆ‡é¢ç±»</u></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--é…ç½®åˆ‡é¢ç±» ->è®©aspectå¯¹è±¡æˆä¸ºåˆ‡é¢ç±»å¯¹è±¡--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--1.é…ç½®åˆ‡å…¥ç‚¹--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myPointCut<span class="token punctuation">"</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>execution(public float com.lhyedu.spring.aop.xml.SmartDog.getSum(float, float))<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!--2.æŒ‡å®šåˆ‡é¢ç±»å¯¹è±¡(ä»¥åŠä¼˜å…ˆçº§)--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspect</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aspect<span class="token punctuation">"</span></span> <span class="token attr-name">order</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--3.é…ç½®åˆ‡é¢çš„ï¼šå‰ç½®é€šçŸ¥ã€è¿”å›é€šçŸ¥ã€å¼‚å¸¸é€šçŸ¥ã€æœ€ç»ˆé€šçŸ¥--></span>        <span class="token comment">&lt;!--å‰ç½®é€šçŸ¥--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>before</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>f1<span class="token punctuation">"</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myPointCut<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment">&lt;!--è¿”å›é€šçŸ¥--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after-returning</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>f2<span class="token punctuation">"</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myPointCut<span class="token punctuation">"</span></span> <span class="token attr-name">returning</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>res<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment">&lt;!--å¼‚å¸¸é€šçŸ¥--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after-throwing</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>f3<span class="token punctuation">"</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myPointCut<span class="token punctuation">"</span></span> <span class="token attr-name">throwing</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>throwable<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment">&lt;!--æœ€ç»ˆé€šçŸ¥--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>f4<span class="token punctuation">"</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myPointCut<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>aspect</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testAspectByXML</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>            <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">SmartAnimalable</span> smartDog <span class="token operator">=</span> ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"smartDog"</span><span class="token punctuation">,</span> <span class="token class-name">SmartAnimalable</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">float</span> sum <span class="token operator">=</span> smartDog<span class="token punctuation">.</span><span class="token function">getSum</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java">åŸºäº<span class="token function">XML</span><span class="token punctuation">(</span>å‰ç½®é€šçŸ¥<span class="token punctuation">)</span><span class="token operator">-</span>æ—¥å¿—<span class="token operator">--</span>æ–¹æ³•å<span class="token operator">:</span>getSum<span class="token operator">--</span>æ–¹æ³•å‚æ•°<span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">10.0</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">]</span>æ–¹æ³•å†…éƒ¨æ‰“å°result <span class="token operator">=</span> <span class="token number">12.0</span>åŸºäº<span class="token function">XML</span><span class="token punctuation">(</span>è¿”å›é€šçŸ¥<span class="token punctuation">)</span><span class="token operator">-</span>æ–¹æ³•æ‰§è¡Œæ¥æ”¶<span class="token operator">--</span>æ—¥å¿—<span class="token operator">--</span>æ–¹æ³•å<span class="token operator">:</span>getSum<span class="token operator">-</span>è¿”å›ç»“æœ<span class="token operator">:</span><span class="token number">12.0</span>åŸºäº<span class="token function">XML</span><span class="token punctuation">(</span>æœ€ç»ˆé€šçŸ¥<span class="token punctuation">)</span><span class="token operator">-</span>æ–¹æ³•æœ€ç»ˆæ‰§è¡Œå®Œæ¯•<span class="token operator">--</span>æ—¥å¿—<span class="token operator">--</span>æ–¹æ³•å<span class="token operator">:</span>getSum<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AOP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ‡é¢ä¼˜å…ˆçº§é—®é¢˜</title>
      <link href="/2024/02/17/%E5%88%87%E9%9D%A2%E4%BC%98%E5%85%88%E7%BA%A7%E9%97%AE%E9%A2%98/"/>
      <url>/2024/02/17/%E5%88%87%E9%9D%A2%E4%BC%98%E5%85%88%E7%BA%A7%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="åˆ‡é¢ä¼˜å…ˆçº§é—®é¢˜"><a href="#åˆ‡é¢ä¼˜å…ˆçº§é—®é¢˜" class="headerlink" title="åˆ‡é¢ä¼˜å…ˆçº§é—®é¢˜"></a>åˆ‡é¢ä¼˜å…ˆçº§é—®é¢˜</h1><h2 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h2><p><strong>å¯¹äºåŒä¸€ä¸ªæ–¹æ³•ï¼Œæœ‰å¤šä¸ªåˆ‡é¢åœ¨åŒä¸€ä¸ªåˆ‡å…¥ç‚¹åˆ‡å…¥ã€‚é‚£ä¹ˆä½¿ç”¨<code>@Order</code>æ³¨è§£æ ‡è®°åˆ‡é¢ç±»ï¼Œè¾¾åˆ°æ§åˆ¶åˆ‡å…¥ç±»çš„åˆ‡å…¥é¡ºåºã€‚<code>@Order(value = n)</code>ä¸­nè¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ã€‚</strong></p><hr><h2 id="åº”ç”¨å®ä¾‹"><a href="#åº”ç”¨å®ä¾‹" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h2><p><strong>ç¬¬ä¸€ä¸ªåˆ‡é¢ç±»ï¼šSmartAnimalAspect</strong></p><blockquote><p>@Order(value &#x3D; 1)ï¼šè¡¨ç¤ºé«˜ä¼˜å…ˆçº§</p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>aspectj</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span><span class="token class-name">JoinPoint</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span><span class="token class-name">Signature</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Order</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Aspect</span><span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SmartAnimalAspect</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"execution(public float com.lhyedu.spring.aspectj.SmartDog.getSum(float, float))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">myPointCut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"myPointCut()"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span>  <span class="token function">showBeforeLog</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Signature</span> signature <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"SmartAnimalAspect(å‰ç½®é€šçŸ¥)-æ—¥å¿—--æ–¹æ³•å:"</span> <span class="token operator">+</span> signature<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token operator">+</span> <span class="token string">"--æ–¹æ³•å‚æ•°:"</span> <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>joinPoint<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"myPointCut()"</span><span class="token punctuation">,</span> returning <span class="token operator">=</span> <span class="token string">"res"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">showSuccessEndLog</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">,</span> <span class="token class-name">Object</span> res<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Signature</span> signature <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"SmartAnimalAspect(è¿”å›é€šçŸ¥)-æ–¹æ³•æ‰§è¡Œæ¥æ”¶--æ—¥å¿—--æ–¹æ³•å:"</span>                <span class="token operator">+</span> signature<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"-è¿”å›ç»“æœ:"</span> <span class="token operator">+</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"myPointCut()"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">showEndLog</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Signature</span> signature <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"SmartAnimalAspect(æœ€ç»ˆé€šçŸ¥)-æ–¹æ³•æœ€ç»ˆæ‰§è¡Œå®Œæ¯•--æ—¥å¿—--æ–¹æ³•å:"</span>                <span class="token operator">+</span> signature<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ç¬¬äºŒä¸ªåˆ‡é¢ç±»ï¼šSmartAnimalAspect2</strong></p><blockquote><p>@Order(value &#x3D; 2)ï¼šè¡¨ç¤ºé«˜ä½å…ˆçº§</p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>aspectj</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span><span class="token class-name">JoinPoint</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span><span class="token class-name">Signature</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Order</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Aspect</span><span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SmartAnimalAspect2</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"execution(public float com.lhyedu.spring.aspectj.SmartDog.getSum(float, float))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">myPointcut2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"myPointcut2()"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span>  <span class="token function">showBeforeLog</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Signature</span> signature <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"SmartAnimalAspect2(å‰ç½®é€šçŸ¥)-æ—¥å¿—--æ–¹æ³•å:"</span> <span class="token operator">+</span> signature<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token operator">+</span> <span class="token string">"--æ–¹æ³•å‚æ•°:"</span> <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>joinPoint<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"myPointcut2()"</span><span class="token punctuation">,</span> returning <span class="token operator">=</span> <span class="token string">"res"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">showSuccessEndLog</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">,</span> <span class="token class-name">Object</span> res<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Signature</span> signature <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"SmartAnimalAspect2(è¿”å›é€šçŸ¥)-æ–¹æ³•æ‰§è¡Œæ¥æ”¶--æ—¥å¿—--æ–¹æ³•å:"</span>                <span class="token operator">+</span> signature<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"-è¿”å›ç»“æœ:"</span> <span class="token operator">+</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"myPointcut2()"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">showEndLog</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Signature</span> signature <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"SmartAnimalAspect2(æœ€ç»ˆé€šçŸ¥)-æ–¹æ³•æœ€ç»ˆæ‰§è¡Œå®Œæ¯•--æ—¥å¿—--æ–¹æ³•å:"</span>                <span class="token operator">+</span> signature<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>beans.xml</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--æ˜“å¿˜ï¼šå¼€å¯åŸºäºæ³¨è§£çš„AOPåŠŸèƒ½ï¼--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspectj-autoproxy</span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.aspectj<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">smartDogTestProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//å¾—åˆ°å®¹å™¨</span>    <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>            <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">SmartAnimalable</span> sd <span class="token operator">=</span> ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"sd"</span><span class="token punctuation">,</span> <span class="token class-name">SmartAnimalable</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">float</span> sum <span class="token operator">=</span> sd<span class="token punctuation">.</span><span class="token function">getSum</span><span class="token punctuation">(</span><span class="token number">101.0f</span><span class="token punctuation">,</span> <span class="token number">11.2f</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">SmartAnimalAspect</span><span class="token punctuation">(</span>å‰ç½®é€šçŸ¥<span class="token punctuation">)</span><span class="token operator">-</span>æ—¥å¿—<span class="token operator">--</span>æ–¹æ³•å<span class="token operator">:</span>getSum<span class="token operator">--</span>æ–¹æ³•å‚æ•°<span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">101.0</span><span class="token punctuation">,</span> <span class="token number">11.2</span><span class="token punctuation">]</span><span class="token class-name">SmartAnimalAspect2</span><span class="token punctuation">(</span>å‰ç½®é€šçŸ¥<span class="token punctuation">)</span><span class="token operator">-</span>æ—¥å¿—<span class="token operator">--</span>æ–¹æ³•å<span class="token operator">:</span>getSum<span class="token operator">--</span>æ–¹æ³•å‚æ•°<span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">101.0</span><span class="token punctuation">,</span> <span class="token number">11.2</span><span class="token punctuation">]</span>æ–¹æ³•å†…éƒ¨æ‰“å°result <span class="token operator">=</span> <span class="token number">112.2</span><span class="token class-name">SmartAnimalAspect2</span><span class="token punctuation">(</span>è¿”å›é€šçŸ¥<span class="token punctuation">)</span><span class="token operator">-</span>æ–¹æ³•æ‰§è¡Œæ¥æ”¶<span class="token operator">--</span>æ—¥å¿—<span class="token operator">--</span>æ–¹æ³•å<span class="token operator">:</span>getSum<span class="token operator">-</span>è¿”å›ç»“æœ<span class="token operator">:</span><span class="token number">112.2</span><span class="token class-name">SmartAnimalAspect2</span><span class="token punctuation">(</span>æœ€ç»ˆé€šçŸ¥<span class="token punctuation">)</span><span class="token operator">-</span>æ–¹æ³•æœ€ç»ˆæ‰§è¡Œå®Œæ¯•<span class="token operator">--</span>æ—¥å¿—<span class="token operator">--</span>æ–¹æ³•å<span class="token operator">:</span>getSum<span class="token class-name">SmartAnimalAspect</span><span class="token punctuation">(</span>è¿”å›é€šçŸ¥<span class="token punctuation">)</span><span class="token operator">-</span>æ–¹æ³•æ‰§è¡Œæ¥æ”¶<span class="token operator">--</span>æ—¥å¿—<span class="token operator">--</span>æ–¹æ³•å<span class="token operator">:</span>getSum<span class="token operator">-</span>è¿”å›ç»“æœ<span class="token operator">:</span><span class="token number">112.2</span><span class="token class-name">SmartAnimalAspect</span><span class="token punctuation">(</span>æœ€ç»ˆé€šçŸ¥<span class="token punctuation">)</span><span class="token operator">-</span>æ–¹æ³•æœ€ç»ˆæ‰§è¡Œå®Œæ¯•<span class="token operator">--</span>æ—¥å¿—<span class="token operator">--</span>æ–¹æ³•å<span class="token operator">:</span>getSum<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="3-ç»†èŠ‚è¯´æ˜"><a href="#3-ç»†èŠ‚è¯´æ˜" class="headerlink" title="3.ç»†èŠ‚è¯´æ˜"></a>3.ç»†èŠ‚è¯´æ˜</h2><p><strong>ä¸èƒ½ç†è§£æˆï¼šä¼˜å…ˆçº§é«˜çš„éƒ½ä¼˜å…ˆæ‰§è¡Œï¼</strong></p><p><strong>æ­£ç¡®ç†è§£ï¼šç±»ä¼¼<code>Filter</code>çš„è¿‡æ»¤é“¾å¼è°ƒç”¨æœºåˆ¶</strong></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240121215901188.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240121214814549.png"></p>]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AOP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼é‡ç”¨</title>
      <link href="/2024/02/17/%E5%88%87%E5%85%A5%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F%E9%87%8D%E7%94%A8/"/>
      <url>/2024/02/17/%E5%88%87%E5%85%A5%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F%E9%87%8D%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="7-åˆ‡å…¥ç‚¹è¡¨è¾¾å¼é‡ç”¨"><a href="#7-åˆ‡å…¥ç‚¹è¡¨è¾¾å¼é‡ç”¨" class="headerlink" title="7.åˆ‡å…¥ç‚¹è¡¨è¾¾å¼é‡ç”¨"></a>7.åˆ‡å…¥ç‚¹è¡¨è¾¾å¼é‡ç”¨</h1><h2 id="1-ä½œç”¨"><a href="#1-ä½œç”¨" class="headerlink" title="1.ä½œç”¨"></a>1.ä½œç”¨</h2><p><strong>ä¸ºäº†ç»Ÿä¸€ç®¡ç†åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼Œå¯ä»¥ä½¿ç”¨åˆ‡å…¥ç‚¹è¡¨è¾¾å¼é‡ç”¨æŠ€æœ¯ï¼Œå³ï¼š<code>@Pointcutæ³¨è§£</code>ã€‚</strong></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240121202436170.png"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Pointcut</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token class-name">String</span> <span class="token function">argNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span><span class="token comment">//</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="2-åº”ç”¨å®ä¾‹"><a href="#2-åº”ç”¨å®ä¾‹" class="headerlink" title="2.åº”ç”¨å®ä¾‹"></a>2.åº”ç”¨å®ä¾‹</h2><p><strong>åœ¨åˆ‡é¢ç±»å®šä¹‰<code>åˆ‡å…¥ç‚¹å‡½æ•°å’Œæ³¨è§£@Pointcut</code>:</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//å®šä¹‰ä¸€ä¸ªåˆ‡å…¥ç‚¹ï¼Œåœ¨åé¢ä½¿ç”¨æ—¶å¯ä»¥ç›´æ¥å¼•ç”¨ï¼Œæé«˜äº†å¤ç”¨æ€§</span><span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"execution(public float com.lhyedu.spring.aspectj.SmartDog.getSum(float, float))"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">myPointCut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>åœ¨åˆ‡é¢ç±»çš„åˆ‡å…¥æ–¹æ³•çš„æ³¨è§£é‡æ–°å®šä¹‰<code>value</code>å±æ€§ï¼Œæ”¹ä¸º:åˆ‡å…¥ç‚¹å‡½æ•°çš„å‡½æ•°å(myPointCut())ï¼Œä»¥è¿”å›é€šçŸ¥å’Œå¼‚å¸¸é€šçŸ¥ä¸ºä¾‹ï¼š</strong></p><p>è¿”å›é€šçŸ¥</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//è¿”å›é€šçŸ¥ï¼šæŠŠf2æ–¹æ³•åˆ‡å…¥åˆ°ç›®æ ‡æ–¹æ³•æ­£å¸¸æ‰§è¡Œå®Œæ¯•åçš„åœ°æ–¹</span><span class="token comment">//è¿™é‡Œä½¿ç”¨ @Pointcutæ³¨è§£å®šä¹‰å¥½çš„åˆ‡å…¥ç‚¹ï¼ï¼ï¼</span><span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"myPointCut()"</span><span class="token punctuation">,</span> returning <span class="token operator">=</span> <span class="token string">"res"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">showSuccessEndLog</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">,</span> <span class="token class-name">Object</span> res<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Signature</span> signature <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"showSuccessEndLog(è¿”å›é€šçŸ¥)-æ–¹æ³•æ‰§è¡Œæ¥æ”¶--æ—¥å¿—--æ–¹æ³•å:"</span>            <span class="token operator">+</span> signature<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"-è¿”å›ç»“æœ:"</span> <span class="token operator">+</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¼‚å¸¸é€šçŸ¥</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//å¼‚å¸¸é€šçŸ¥[è‹¥æ²¡æœ‰å‡ºç°å¼‚å¸¸-åˆ™ä¸ä¼šæ‰§è¡Œ]</span><span class="token comment">//è¿™é‡Œä½¿ç”¨ @Pointcutæ³¨è§£å®šä¹‰å¥½çš„åˆ‡å…¥ç‚¹</span><span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"myPointCut()"</span><span class="token punctuation">,</span> throwing <span class="token operator">=</span> <span class="token string">"throwable"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">showExceptionLog</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">,</span> <span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Signature</span> signature <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"showExceptionLog(å¼‚å¸¸é€šçŸ¥)-å‡ºç°å¼‚å¸¸--æ—¥å¿—--å¼‚å¸¸ä¿¡æ¯="</span> <span class="token operator">+</span> throwable<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AOP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¯ç»•é€šçŸ¥</title>
      <link href="/2024/02/17/%E7%8E%AF%E7%BB%95%E9%80%9A%E7%9F%A5/"/>
      <url>/2024/02/17/%E7%8E%AF%E7%BB%95%E9%80%9A%E7%9F%A5/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¯ç»•é€šçŸ¥ï¼ˆ-Aroundï¼‰"><a href="#ç¯ç»•é€šçŸ¥ï¼ˆ-Aroundï¼‰" class="headerlink" title="ç¯ç»•é€šçŸ¥ï¼ˆ@Aroundï¼‰"></a>ç¯ç»•é€šçŸ¥ï¼ˆ@Aroundï¼‰</h1><h2 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h2><p><strong><code>ç¯ç»•é€šçŸ¥ï¼ˆ@Aroundï¼‰</code>å¯ä»¥å®Œæˆå…¶å®ƒå››ä¸ªé€šçŸ¥è¦åšçš„äº‹æƒ…ã€‚</strong></p><blockquote><p><strong>å›é¡¾ï¼šå…¶ä»–4ä¸ªé€šçŸ¥</strong></p><ul><li><strong>å‰ç½®é€šçŸ¥ï¼š<code>@Before</code></strong></li><li><strong>è¿”å›é€šçŸ¥ï¼š<code>@AfterReturning</code></strong></li><li><strong>å¼‚å¸¸é€šçŸ¥ï¼š<code>@AfterThrowing</code></strong></li><li><strong>æœ€ç»ˆé€šçŸ¥ï¼š<code>@After</code></strong></li></ul></blockquote><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240121092050706.png"></p><hr><h2 id="åº”ç”¨å®ä¾‹"><a href="#åº”ç”¨å®ä¾‹" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h2><p><strong>SmartAnimalAspect2ç±»[åˆ‡é¢ç±»]å®ç°<code>ç¯ç»•é€šçŸ¥ï¼ˆ@Aroundï¼‰</code></strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>aspectj</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span><span class="token class-name">ProceedingJoinPoint</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Around</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Aspect</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span><span class="token comment">//æ¼”ç¤º "ç¯ç»•é€šçŸ¥" çš„ä½¿ç”¨</span><span class="token annotation punctuation">@Aspect</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SmartAnimalAspect2</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     *è§£è¯»     * @Around è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªç¯ç»•é€šçŸ¥[å®Œæˆå…¶ä»–å››ä¸ªé€šçŸ¥çš„åŠŸèƒ½]     * valueå±æ€§ åˆ‡å…¥è¡¨è¾¾å¼     * doAround è¡¨ç¤ºåˆ‡å…¥çš„æ–¹æ³• - è°ƒç”¨ç»“æ„ try-catch-finally     */</span>    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"execution(public float com.lhyedu.spring.aspectj.SmartDog.getSum(float, float))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">doAround</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Object</span> result <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> methodName <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token comment">//1.ç›¸å½“äº"å‰ç½®é€šçŸ¥"å®Œæˆçš„äº‹æƒ…</span>            <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> argList <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"AOPç¯ç»•é€šçŸ¥(å‰ç½®é€šçŸ¥)--"</span> <span class="token operator">+</span> methodName                    <span class="token operator">+</span> <span class="token string">"æ–¹æ³•å¼€å§‹äº†--å‚æ•°æœ‰ï¼š"</span> <span class="token operator">+</span> argList<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//é‡ç‚¹ï¼šåœ¨ç¯ç»•é€šçŸ¥ä¸­ï¼Œä¸€å®šè¦è°ƒç”¨joinPoint.proceed()æ¥æ‰§è¡Œç›®æ ‡æ–¹æ³•ï¼</span>            result <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//2.ç›¸å½“äº"è¿”å›é€šçŸ¥"å®Œæˆçš„äº‹æƒ…</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"AOPç¯ç»•é€šçŸ¥(è¿”å›é€šçŸ¥)--"</span> <span class="token operator">+</span> methodName                     <span class="token operator">+</span> <span class="token string">"æ–¹æ³•ç»“æŸäº†--ç»“æœæœ‰ï¼š"</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">//3.ç›¸å½“äº"å¼‚å¸¸é€šçŸ¥"å®Œæˆçš„äº‹æƒ…</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"AOPç¯ç»•é€šçŸ¥(å¼‚å¸¸é€šçŸ¥)--"</span> <span class="token operator">+</span> methodName                     <span class="token operator">+</span> <span class="token string">"æ–¹æ³•æŠ›å‡ºå¼‚å¸¸ï¼š"</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>            <span class="token comment">//4.ç›¸å½“äº"æœ€ç»ˆé€šçŸ¥"å®Œæˆçš„äº‹æƒ…</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"AOPç¯ç»•é€šçŸ¥(æœ€ç»ˆé€šçŸ¥)--"</span> <span class="token operator">+</span> methodName                                <span class="token operator">+</span> <span class="token string">"æ–¹æ³•æ‰§è¡Œç»“æŸ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">smartDogTestProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//å¾—åˆ°å®¹å™¨</span>    <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>            <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">SmartAnimalable</span> sd <span class="token operator">=</span> ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"sd"</span><span class="token punctuation">,</span> <span class="token class-name">SmartAnimalable</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">float</span> sum <span class="token operator">=</span> sd<span class="token punctuation">.</span><span class="token function">getSum</span><span class="token punctuation">(</span><span class="token number">101.0f</span><span class="token punctuation">,</span> <span class="token number">11.2f</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token constant">AOP</span>ç¯ç»•é€šçŸ¥<span class="token punctuation">(</span>å‰ç½®é€šçŸ¥<span class="token punctuation">)</span><span class="token operator">--</span>getSumæ–¹æ³•å¼€å§‹äº†<span class="token operator">--</span>å‚æ•°æœ‰ï¼š<span class="token punctuation">[</span><span class="token number">101.0</span><span class="token punctuation">,</span> <span class="token number">11.2</span><span class="token punctuation">]</span>æ–¹æ³•å†…éƒ¨æ‰“å°result <span class="token operator">=</span> <span class="token number">112.2</span><span class="token constant">AOP</span>ç¯ç»•é€šçŸ¥<span class="token punctuation">(</span>è¿”å›é€šçŸ¥<span class="token punctuation">)</span><span class="token operator">--</span>getSumæ–¹æ³•ç»“æŸäº†<span class="token operator">--</span>ç»“æœæœ‰ï¼š<span class="token number">112.2</span><span class="token constant">AOP</span>ç¯ç»•é€šçŸ¥<span class="token punctuation">(</span>æœ€ç»ˆé€šçŸ¥<span class="token punctuation">)</span><span class="token operator">--</span>getSumæ–¹æ³•æ‰§è¡Œç»“æŸ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AOP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¼‚å¸¸é€šçŸ¥è·å–å¼‚å¸¸ä¿¡æ¯</title>
      <link href="/2024/02/17/%E5%BC%82%E5%B8%B8%E9%80%9A%E7%9F%A5%E8%8E%B7%E5%8F%96%E5%BC%82%E5%B8%B8%E4%BF%A1%E6%81%AF/"/>
      <url>/2024/02/17/%E5%BC%82%E5%B8%B8%E9%80%9A%E7%9F%A5%E8%8E%B7%E5%8F%96%E5%BC%82%E5%B8%B8%E4%BF%A1%E6%81%AF/</url>
      
        <content type="html"><![CDATA[<h1 id="å¼‚å¸¸é€šçŸ¥è·å–å¼‚å¸¸ä¿¡æ¯"><a href="#å¼‚å¸¸é€šçŸ¥è·å–å¼‚å¸¸ä¿¡æ¯" class="headerlink" title="å¼‚å¸¸é€šçŸ¥è·å–å¼‚å¸¸ä¿¡æ¯"></a>å¼‚å¸¸é€šçŸ¥è·å–å¼‚å¸¸ä¿¡æ¯</h1><h2 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h2><p><u><strong>åœ¨<code>åˆ‡é¢ç±»</code>çš„<code>å¼‚å¸¸é€šçŸ¥æ–¹æ³•</code>ä¸­è·å–æ‰§è¡Œæ–¹æ³•çš„å¼‚å¸¸ä¿¡æ¯ã€‚</strong></u></p><p><strong>è¿™é‡ŒæŸ¥çœ‹æ³¨è§£ï¼š<code>@AfterThrowing</code>çš„æºç ï¼š</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">AfterThrowing</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token class-name">String</span> <span class="token function">pointcut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token class-name">String</span> <span class="token function">throwing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span><span class="token comment">//ç›®æ ‡æ–¹æ³•çš„æ‰§è¡Œå‡ºé”™çš„ä¿¡æ¯</span>    <span class="token class-name">String</span> <span class="token function">argNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>å…¶ä¸­ï¼Œ<code>throwing</code>è¡¨ç¤ºï¼šç›®æ ‡æ–¹æ³•çš„æ‰§è¡Œå‡ºé”™çš„ä¿¡æ¯ã€‚</strong></p><hr><h2 id="åº”ç”¨å®ä¾‹"><a href="#åº”ç”¨å®ä¾‹" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h2><p>åœ¨SmartDogç±»çš„getSumæ–¹æ³•ä¸­ï¼Œ<strong>æ•…æ„è®¾ç½®é™¤é›¶å¼‚å¸¸ï¼š</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>aspectj</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Component</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"sd"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SmartDog</span> <span class="token keyword">implements</span> <span class="token class-name">SmartAnimalable</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">getSum</span><span class="token punctuation">(</span><span class="token keyword">float</span> i<span class="token punctuation">,</span> <span class="token keyword">float</span> j<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//æ•…æ„å‡ºç°é™¤é›¶å¼‚å¸¸ï¼</span>        <span class="token keyword">float</span> result <span class="token operator">=</span> i <span class="token operator">+</span> j<span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ–¹æ³•å†…éƒ¨æ‰“å°result = "</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">getSub</span><span class="token punctuation">(</span><span class="token keyword">float</span> i<span class="token punctuation">,</span> <span class="token keyword">float</span> j<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">float</span> result <span class="token operator">=</span> i <span class="token operator">-</span> j<span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ–¹æ³•å†…éƒ¨æ‰“å°result = "</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>SmartAnimalAspectç±»[åˆ‡é¢ç±»] çš„<code>å¼‚å¸¸é€šçŸ¥</code>æ–¹æ³•ï¼š<code>showExceptionLog</code></strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//å¼‚å¸¸é€šçŸ¥[è‹¥æ²¡æœ‰å‡ºç°å¼‚å¸¸-åˆ™ä¸ä¼šæ‰§è¡Œ]</span><span class="token comment">/** * è§£è¯»ï¼š * å¦‚æœå¸Œæœ› ç›®æ ‡æ–¹æ³•(getSum)æ‰§è¡Œä¸­çš„å¼‚å¸¸ç»“æœ è¿”å›ç»™ åˆ‡å…¥æ–¹æ³•(showSuccessEndLog) * -> åœ¨ @AfterThrowingçš„å±æ€§åŠ ä¸Š:throwing = "~" * -> åŒæ—¶åœ¨ åˆ‡å…¥æ–¹æ³•(showSuccessEndLog)çš„å‚æ•°åŠ ä¸Š:Throwable ~ */</span><span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"execution(public float SmartAnimalable.getSum(float, float))"</span><span class="token punctuation">,</span> throwing <span class="token operator">=</span> <span class="token string">"e"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">showExceptionLog</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">,</span> <span class="token class-name">Throwable</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Signature</span> signature <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"showExceptionLog(å¼‚å¸¸é€šçŸ¥)-å‡ºç°å¼‚å¸¸--æ—¥å¿—--å¼‚å¸¸ä¿¡æ¯="</span> <span class="token operator">+</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">smartDogTestProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//å¾—åˆ°å®¹å™¨</span>    <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>            <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">SmartAnimalable</span> sd <span class="token operator">=</span> ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"sd"</span><span class="token punctuation">,</span> <span class="token class-name">SmartAnimalable</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">float</span> sum <span class="token operator">=</span> sd<span class="token punctuation">.</span><span class="token function">getSum</span><span class="token punctuation">(</span><span class="token number">101.0f</span><span class="token punctuation">,</span> <span class="token number">11.2f</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java">åˆ‡é¢ç±»<span class="token function">f1</span><span class="token punctuation">(</span>å‰ç½®é€šçŸ¥<span class="token punctuation">)</span><span class="token operator">-</span>æ—¥å¿—<span class="token operator">--</span>æ–¹æ³•å<span class="token operator">:</span>getSum<span class="token operator">--</span>æ–¹æ³•å‚æ•°<span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">101.0</span><span class="token punctuation">,</span> <span class="token number">11.2</span><span class="token punctuation">]</span><span class="token function">showExceptionLog</span><span class="token punctuation">(</span>å¼‚å¸¸é€šçŸ¥<span class="token punctuation">)</span><span class="token operator">-</span>å‡ºç°å¼‚å¸¸<span class="token operator">--</span>æ—¥å¿—<span class="token operator">--</span>å¼‚å¸¸ä¿¡æ¯<span class="token operator">=</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>ArithmeticException</span><span class="token operator">:</span> <span class="token operator">/</span> by zeroåˆ‡é¢ç±»<span class="token function">f4</span><span class="token punctuation">(</span>æœ€ç»ˆé€šçŸ¥<span class="token punctuation">)</span><span class="token operator">-</span>æ–¹æ³•æœ€ç»ˆæ‰§è¡Œå®Œæ¯•<span class="token operator">--</span>æ—¥å¿—<span class="token operator">--</span>æ–¹æ³•å<span class="token operator">:</span>getSum<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AOP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¿”å›é€šçŸ¥è·å–ç»“æœ</title>
      <link href="/2024/02/17/%E8%BF%94%E5%9B%9E%E9%80%9A%E7%9F%A5%E8%8E%B7%E5%8F%96%E7%BB%93%E6%9E%9C/"/>
      <url>/2024/02/17/%E8%BF%94%E5%9B%9E%E9%80%9A%E7%9F%A5%E8%8E%B7%E5%8F%96%E7%BB%93%E6%9E%9C/</url>
      
        <content type="html"><![CDATA[<h1 id="è¿”å›é€šçŸ¥è·å–ç»“æœ"><a href="#è¿”å›é€šçŸ¥è·å–ç»“æœ" class="headerlink" title="è¿”å›é€šçŸ¥è·å–ç»“æœ"></a>è¿”å›é€šçŸ¥è·å–ç»“æœ</h1><h2 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h2><p><u><strong>åœ¨<code>åˆ‡é¢ç±»</code>çš„<code>è¿”å›é€šçŸ¥æ–¹æ³•</code>ä¸Šè·å–ç›®æ ‡æ–¹æ³•çš„æ‰§è¡Œè¿”å›ç»“æœã€‚</strong></u></p><p><strong>è¿™é‡ŒæŸ¥çœ‹ï¼š<code>@AfterReturning</code>æºç ï¼š</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">AfterReturning</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token class-name">String</span> <span class="token function">pointcut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token class-name">String</span> <span class="token function">returning</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span><span class="token comment">//ç›®æ ‡æ–¹æ³•çš„æ‰§è¡Œè¿”å›ç»“æœ</span>    <span class="token class-name">String</span> <span class="token function">argNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>å…¶ä¸­ï¼Œ<code>returning</code>è¡¨ç¤ºï¼šç›®æ ‡æ–¹æ³•çš„æ‰§è¡Œè¿”å›ç»“æœã€‚</strong></p><hr><h2 id="2-åº”ç”¨å®ä¾‹"><a href="#2-åº”ç”¨å®ä¾‹" class="headerlink" title="2.åº”ç”¨å®ä¾‹"></a>2.åº”ç”¨å®ä¾‹</h2><p><strong>SmartAnimalAspectç±»[åˆ‡é¢ç±»] çš„<code>è¿”å›é€šçŸ¥</code>æ–¹æ³•ï¼š<code>showSuccessEndLog</code></strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//è¿”å›é€šçŸ¥ï¼šæŠŠf2æ–¹æ³•åˆ‡å…¥åˆ°ç›®æ ‡æ–¹æ³•æ­£å¸¸æ‰§è¡Œå®Œæ¯•åçš„åœ°æ–¹</span><span class="token comment">/** * è§£è¯»ï¼š * å¦‚æœå¸Œæœ› ç›®æ ‡æ–¹æ³•(getSum)è¿”å›çš„ç»“æœ è¿”å›ç»™ åˆ‡å…¥æ–¹æ³•(showSuccessEndLog) * -> åœ¨ @AfterReturningçš„å±æ€§åŠ ä¸Š:returning = "~" * -> åŒæ—¶åœ¨ åˆ‡å…¥æ–¹æ³•(showSuccessEndLog)çš„å‚æ•°åŠ ä¸Š:Object ~ * æœ¬è´¨ä¸Šæ¥è¯´ï¼Œreturning = "res"å°±æ˜¯æ¥æ”¶invoke()å‡½æ•°çš„è¿”å›å€¼ */</span><span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"execution(public float SmartAnimalable.getSum(float, float))"</span><span class="token punctuation">,</span> returning <span class="token operator">=</span> <span class="token string">"res"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">showSuccessEndLog</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">,</span> <span class="token class-name">Object</span> res<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Signature</span> signature <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"showSuccessEndLog(è¿”å›é€šçŸ¥)-æ–¹æ³•æ‰§è¡Œæ¥æ”¶--æ—¥å¿—--æ–¹æ³•å:"</span>             <span class="token operator">+</span> signature<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"-è¿”å›ç»“æœ:"</span> <span class="token operator">+</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">smartDogTestProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//å¾—åˆ°å®¹å™¨</span>    <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>            <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">SmartAnimalable</span> sd <span class="token operator">=</span> ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"sd"</span><span class="token punctuation">,</span> <span class="token class-name">SmartAnimalable</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">float</span> sum <span class="token operator">=</span> sd<span class="token punctuation">.</span><span class="token function">getSum</span><span class="token punctuation">(</span><span class="token number">101.0f</span><span class="token punctuation">,</span> <span class="token number">11.2f</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java">åˆ‡é¢ç±»<span class="token function">f1</span><span class="token punctuation">(</span>å‰ç½®é€šçŸ¥<span class="token punctuation">)</span><span class="token operator">-</span>æ—¥å¿—<span class="token operator">--</span>æ–¹æ³•å<span class="token operator">:</span>getSum<span class="token operator">--</span>æ–¹æ³•å‚æ•°<span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">101.0</span><span class="token punctuation">,</span> <span class="token number">11.2</span><span class="token punctuation">]</span>æ–¹æ³•å†…éƒ¨æ‰“å°result <span class="token operator">=</span> <span class="token number">112.2</span><span class="token function">showSuccessEndLog</span><span class="token punctuation">(</span>è¿”å›é€šçŸ¥<span class="token punctuation">)</span><span class="token operator">-</span>æ–¹æ³•æ‰§è¡Œæ¥æ”¶<span class="token operator">--</span>æ—¥å¿—<span class="token operator">--</span>æ–¹æ³•å<span class="token operator">:</span>getSum<span class="token operator">-</span>è¿”å›ç»“æœ<span class="token operator">:</span><span class="token number">112.2</span><span class="token comment">//ç¬¦åˆé¢„æœŸï¼</span>åˆ‡é¢ç±»<span class="token function">f4</span><span class="token punctuation">(</span>æœ€ç»ˆé€šçŸ¥<span class="token punctuation">)</span><span class="token operator">-</span>æ–¹æ³•æœ€ç»ˆæ‰§è¡Œå®Œæ¯•<span class="token operator">--</span>æ—¥å¿—<span class="token operator">--</span>æ–¹æ³•å<span class="token operator">:</span>getSum<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AOP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JoinPoint</title>
      <link href="/2024/02/17/JoinPoint/"/>
      <url>/2024/02/17/JoinPoint/</url>
      
        <content type="html"><![CDATA[<h1 id="JoinPoint-è¿æ¥ç‚¹"><a href="#JoinPoint-è¿æ¥ç‚¹" class="headerlink" title="JoinPoint(è¿æ¥ç‚¹)"></a>JoinPoint(è¿æ¥ç‚¹)</h1><h2 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h2><p><strong>é€šè¿‡JoinPointå¯ä»¥è·å–è°ƒç”¨æ–¹æ³•çš„ç­¾åã€‚</strong></p><hr><h2 id="å…¶ä»–æ–¹æ³•ä¸€è§ˆ"><a href="#å…¶ä»–æ–¹æ³•ä¸€è§ˆ" class="headerlink" title="å…¶ä»–æ–¹æ³•ä¸€è§ˆ"></a>å…¶ä»–æ–¹æ³•ä¸€è§ˆ</h2><ul><li><strong><code>joinPoint.getSignature().getName()</code>ï¼šè·å–æ–¹æ³•å</strong></li><li><strong><code>joinPoint.getSignature().getDeclaringType().getSimpleName()</code>ï¼šè·å–ç›®æ ‡æ–¹æ³•æ‰€å±ç±»çš„ç®€å•ç±»å</strong></li><li><strong><code>joinPoint.getSignature().getDeclaringTypeName()</code>ï¼šè·å–ç›®æ ‡æ–¹æ³•æ‰€å±ç±»çš„å…¨ç±»å</strong></li><li><strong><code>joinPoint.getSignature().getModifiers()</code>ï¼šè·å–ç›®æ ‡æ–¹æ³•çš„å£°æ˜ç±»å‹(publicã€privateã€protected)</strong></li><li><strong><code>joinPoint.getArgs()</code>ï¼šè·å–ä¼ å…¥ç›®æ ‡æ–¹æ³•çš„å‚æ•°ï¼Œæ•°ç»„å½¢å¼è¿”å›</strong></li><li><strong><code>joinPoint.getTarget()</code>ï¼šè·å–è¢«ä»£ç†å¯¹è±¡</strong></li><li><strong><code>joinPoint.getThis()</code>ï¼šè·å–ä»£ç†å¯¹è±¡è‡ªå·±</strong></li></ul>]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AOP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ‡å…¥è¡¨è¾¾å¼</title>
      <link href="/2024/02/17/%E5%88%87%E5%85%A5%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
      <url>/2024/02/17/%E5%88%87%E5%85%A5%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="åˆ‡å…¥è¡¨è¾¾å¼"><a href="#åˆ‡å…¥è¡¨è¾¾å¼" class="headerlink" title="åˆ‡å…¥è¡¨è¾¾å¼"></a>åˆ‡å…¥è¡¨è¾¾å¼</h1><h2 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h2><p><font size=3 color=red>é€šè¿‡è¡¨è¾¾å¼çš„æ–¹å¼å®šä½ä¸€ä¸ªæˆ–å¤šä¸ªå…·ä½“çš„è¿æ¥ç‚¹</font></p><hr><h2 id="å…·ä½“ä½¿ç”¨"><a href="#å…·ä½“ä½¿ç”¨" class="headerlink" title="å…·ä½“ä½¿ç”¨"></a>å…·ä½“ä½¿ç”¨</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240120093645030.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240120094036885.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240120094048592.png"></p><hr><h2 id="æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a>æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h2><p><strong>1.åˆ‡å…¥è¡¨è¾¾å¼ä¹Ÿå¯ä»¥æŒ‡å‘ç±»çš„æ–¹æ³•ï¼Œè¿™æ—¶åˆ‡å…¥è¡¨è¾¾å¼ä¼šå¯¹è¯¥ç±»&#x2F;å¯¹è±¡ç”Ÿæ•ˆ</strong></p><p><strong>2.åˆ‡å…¥è¡¨è¾¾å¼ä¹Ÿå¯ä»¥æŒ‡å‘æ¥å£çš„æ–¹æ³•ï¼Œè¿™æ˜¯åˆ‡å…¥è¡¨è¾¾å¼ä¼šå¯¹å®ç°äº†æ¥å£çš„ç±»&#x2F;å¯¹è±¡ç”Ÿæ•ˆ</strong></p><p><strong>3.åˆ‡å…¥è¡¨è¾¾å¼ä¹Ÿå¯ä»¥å¯¹æ²¡æœ‰å®ç°æ¥å£çš„ç±»ï¼Œè¿›è¡Œåˆ‡å…¥ï¼š</strong></p><p>Carç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>homework</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Component</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"car"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Car is running.."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>SmartAnimalAspectçš„å‰ç½®é€šçŸ¥æ–¹æ³•:<code>showBeginLog</code></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//1.å‰ç½®é€šçŸ¥</span><span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"execution(public void UsbInterface.work()) || execution(public void Car.run())"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">showBeginLog</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å‰ç½®é€šçŸ¥-æ‰§è¡ŒshowBeginLogæ–¹æ³•.."</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">homeworkTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>            <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Car</span> car <span class="token operator">=</span> ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"car"</span><span class="token punctuation">,</span> <span class="token class-name">Car</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"carçš„è¿è¡Œç±»å‹:"</span> <span class="token operator">+</span> car<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    car<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java">carçš„è¿è¡Œç±»å‹<span class="token operator">:</span><span class="token keyword">class</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>homework<span class="token punctuation">.</span></span>Car</span>$$<span class="token class-name">EnhancerBySpringCGLIB</span>$$<span class="token number">375d</span><span class="token number">5d</span><span class="token number">8f</span>å‰ç½®é€šçŸ¥<span class="token operator">-</span>æ‰§è¡ŒshowBeginLogæ–¹æ³•<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token class-name">Car</span> is running<span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>åŠ¨æ€ä»£ç†jdkçš„Proxyä¸Springçš„CGlib</strong></p></blockquote><p><a href="https://www.cnblogs.com/threeAgePie/p/15832586.html">åŠ¨æ€ä»£ç†jdkçš„Proxyä¸springçš„CGlib - ä¸‰åªè›‹é»„æ´¾ - åšå®¢å›­ (cnblogs.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AOP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1.AOPåŸºæœ¬ä»‹ç»</title>
      <link href="/2024/02/17/AOP%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D/"/>
      <url>/2024/02/17/AOP%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D/</url>
      
        <content type="html"><![CDATA[<h1 id="AOPåŸºæœ¬ä»‹ç»"><a href="#AOPåŸºæœ¬ä»‹ç»" class="headerlink" title="AOPåŸºæœ¬ä»‹ç»"></a>AOPåŸºæœ¬ä»‹ç»</h1><h2 id="åŸºæœ¬ä»‹ç»"><a href="#åŸºæœ¬ä»‹ç»" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h2><p><strong>AOPä¸ºAspect Oriented Programmingçš„ç¼©å†™ï¼Œæ„ä¸ºï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œé€šè¿‡é¢„ç¼–è¯‘æ–¹å¼å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯ã€‚</strong></p><p>AOPæ˜¯OOPçš„å»¶ç»­ï¼Œæ˜¯è½¯ä»¶å¼€å‘ä¸­çš„ä¸€ä¸ªçƒ­ç‚¹ï¼Œä¹Ÿæ˜¯Springæ¡†æ¶ä¸­çš„ä¸€ä¸ªé‡è¦å†…å®¹ï¼Œæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ç§è¡ç”ŸèŒƒå‹ã€‚åˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚</p><h3 id="ç®€æ˜“è¯´æ˜å›¾"><a href="#ç®€æ˜“è¯´æ˜å›¾" class="headerlink" title="ç®€æ˜“è¯´æ˜å›¾"></a>ç®€æ˜“è¯´æ˜å›¾</h3><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240119095619347.png" alt=""  /><h3 id="è¯¦ç»†è¯´æ˜å›¾"><a href="#è¯¦ç»†è¯´æ˜å›¾" class="headerlink" title="è¯¦ç»†è¯´æ˜å›¾"></a>è¯¦ç»†è¯´æ˜å›¾</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240119101750746.png"></p><p><strong>æ ¸å¿ƒ<code>aspectåŒ…</code>ä¸‹çš„åˆ‡é¢ç±»çš„<u>å£°æ˜é€šçŸ¥æ–¹æ³•</u>ï¼š</strong></p><ol><li><strong>å‰ç½®é€šçŸ¥ï¼š@Before</strong></li><li><strong>è¿”å›é€šçŸ¥ï¼š@AfterReturning</strong></li><li><strong>å¼‚å¸¸é€šçŸ¥ï¼š@AfterThrowin</strong></li><li><strong>åç½®é€šçŸ¥ï¼š@After</strong></li><li><strong>ç¯ç»•é€šçŸ¥ï¼š@Around</strong></li></ol><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240119103515843.png"></p><hr><h2 id="å¿«é€Ÿå…¥é—¨"><a href="#å¿«é€Ÿå…¥é—¨" class="headerlink" title="å¿«é€Ÿå…¥é—¨"></a>å¿«é€Ÿå…¥é—¨</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/B6126605C99A298F2A0ABE3D63804C87.png"></p><blockquote><p><strong>å‚è€ƒä¸‹å›¾ï¼Œå®Œæˆä»£ç </strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240119103515843.png" alt="" style="zoom:50%;" /></blockquote><p><strong>å¯¼å…¥AOPç¼–ç¨‹éœ€è¦çš„åŒ…ï¼š</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240119150423693.png" alt="" style="zoom: 67%;" /><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240119150444496.png" alt="" style="zoom:67%;" /><p>SmartAnimalableæ¥å£</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>aspectj</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SmartAnimalable</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">float</span> <span class="token function">getSum</span><span class="token punctuation">(</span><span class="token keyword">float</span> i<span class="token punctuation">,</span> <span class="token keyword">float</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">float</span> <span class="token function">getSub</span><span class="token punctuation">(</span><span class="token keyword">float</span> i<span class="token punctuation">,</span> <span class="token keyword">float</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>SmartDogç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>aspectj</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SmartDog</span> <span class="token keyword">implements</span> <span class="token class-name">SmartAnimalable</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">getSum</span><span class="token punctuation">(</span><span class="token keyword">float</span> i<span class="token punctuation">,</span> <span class="token keyword">float</span> j<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">float</span> result <span class="token operator">=</span> i <span class="token operator">+</span> j<span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ–¹æ³•å†…éƒ¨æ‰“å°result = "</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">getSub</span><span class="token punctuation">(</span><span class="token keyword">float</span> i<span class="token punctuation">,</span> <span class="token keyword">float</span> j<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">float</span> result <span class="token operator">=</span> i <span class="token operator">-</span> j<span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ–¹æ³•å†…éƒ¨æ‰“å°result = "</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>SmartAnimalAspectç±»[åˆ‡é¢ç±»]</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>aspectj</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span><span class="token class-name">JoinPoint</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span><span class="token class-name">Signature</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span></span><span class="token punctuation">;</span><span class="token comment">//åˆ‡é¢ç±»:@Aspect[è¡¨æ˜æ˜¯ä¸€ä¸ªåˆ‡é¢ç±»ï¼Œåº•å±‚åˆ‡é¢ç¼–ç¨‹çš„æ”¯æ’‘(åŠ¨æ€ä»£ç†+æ³¨è§£+åå°„)]</span><span class="token annotation punctuation">@Aspect</span><span class="token annotation punctuation">@Component</span><span class="token comment">//æ³¨å…¥å®¹å™¨</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SmartAnimalAspect</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * 1. @Before å¸Œæœ›å°†f1æ–¹æ³•åˆ‡å…¥åˆ°SmartDog-getSumå‰æ‰§è¡Œ-å‰ç½®é€šçŸ¥     * 2. value = "execution(è®¿é—®ä¿®é¥°ç¬¦ è¿”å›ç±»å‹ å…¨ç±»å.æ–¹æ³•å(å½¢å‚åˆ—è¡¨)"     * 3. JoinPoint joinPoint åœ¨åº•å±‚æ‰§è¡Œæ—¶ï¼Œä¼šç»™è¯¥åˆ‡å…¥æ–¹æ³•ä¼ å…¥(invokeçš„å‚æ•°æ‰“åŒ…å°è£…)     *    >é€šè¿‡JoinPointå¯¹è±¡çš„æ–¹æ³•ï¼Œå¯ä»¥å¾—åˆ° åˆ‡å…¥æ—¶æ–¹æ³•æ‰§è¡Œå¾—åˆ°çš„å„ç§ä¿¡æ¯     */</span>    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"execution(public float com.lhyedu.spring.aspectj.SmartDog.getSum(float, float))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//é€šè¿‡è¿æ¥ç‚¹å¯¹è±¡(JoinPoint)ï¼Œå¯è·å¾—æ–¹æ³•ç­¾å</span>        <span class="token class-name">Signature</span> signature <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åˆ‡é¢ç±»f1(å‰ç½®é€šçŸ¥)-æ—¥å¿—--æ–¹æ³•å:"</span> <span class="token operator">+</span> signature<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token operator">+</span> <span class="token string">"--æ–¹æ³•å‚æ•°:"</span> <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>joinPoint<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//è¿”å›é€šçŸ¥ï¼šæŠŠf2æ–¹æ³•åˆ‡å…¥åˆ°ç›®æ ‡æ–¹æ³•æ­£å¸¸æ‰§è¡Œå®Œæ¯•åçš„åœ°æ–¹</span>    <span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"execution(public float com.lhyedu.spring.aspectj.SmartDog.getSum(float, float))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Signature</span> signature <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åˆ‡é¢ç±»f2(è¿”å›é€šçŸ¥)-æ–¹æ³•æ‰§è¡Œæ¥æ”¶--æ—¥å¿—--æ–¹æ³•å:"</span>                <span class="token operator">+</span> signature<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//å¼‚å¸¸é€šçŸ¥[è‹¥æ²¡æœ‰å‡ºç°å¼‚å¸¸-åˆ™ä¸ä¼šæ‰§è¡Œ]</span>    <span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"execution(public float com.lhyedu.spring.aspectj.SmartDog.getSum(float, float))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">f3</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Signature</span> signature <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åˆ‡é¢ç±»f3(å¼‚å¸¸é€šçŸ¥)-å‡ºç°å¼‚å¸¸--æ—¥å¿—--æ–¹æ³•å:"</span>                <span class="token operator">+</span> signature<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//æœ€ç»ˆé€šçŸ¥ï¼šåˆ‡å…¥åˆ°æœ€ç»ˆæ–¹æ³•æ‰§è¡Œåï¼Œä¸ç®¡æ˜¯å¦å‘ç”Ÿå¼‚å¸¸éƒ½è¦æ‰§è¡Œï¼(finallyå—)</span>    <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"execution(public float com.lhyedu.spring.aspectj.SmartDog.getSum(float, float))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">f4</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Signature</span> signature <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åˆ‡é¢ç±»f4(æœ€ç»ˆé€šçŸ¥)-æ–¹æ³•æœ€ç»ˆæ‰§è¡Œå®Œæ¯•--æ—¥å¿—--æ–¹æ³•å:"</span>                <span class="token operator">+</span> signature<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>beans.xml</strong></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--æ‰«æåŒ…--></span><span class="token comment">&lt;!--2ä¸ªbeanå¯¹è±¡:SmartDogç±» &amp; SmartDogAspectç±»--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.aspectj<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token comment">&lt;!--æ˜“å¿˜ï¼šå¼€å¯åŸºäºæ³¨è§£çš„AOPåŠŸèƒ½ï¼--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspectj-autoproxy</span><span class="token punctuation">/></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">smartDogTestProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//å¾—åˆ°å®¹å™¨</span>    <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>            <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//æ˜“é”™ï¼šæ¥å£ç±»å‹æ¥æ”¶æ³¨å…¥çš„æ˜¯ï¼šä»£ç†å¯¹è±¡ï¼ï¼ï¼(å³å°æ¡ˆä¾‹çš„Proxyå†…éƒ¨ç±»)</span>    <span class="token comment">//sdçš„ç¼–è¯‘ç±»å‹ä¸èƒ½ç”¨ï¼šSmartDogç±»æ¥æ”¶ï¼å› ä¸ºä¸æ˜¯ï¼</span>    <span class="token class-name">SmartAnimalable</span> sd <span class="token operator">=</span> ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"sd"</span><span class="token punctuation">,</span> <span class="token class-name">SmartAnimalable</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//System.out.println("sdçš„è¿è¡Œç±»å‹ä¸º:" + sd.getClass());</span>    <span class="token comment">//sdçš„è¿è¡Œç±»å‹ä¸º:class com.sun.proxy.$Proxy18</span>    <span class="token keyword">float</span> sum <span class="token operator">=</span> sd<span class="token punctuation">.</span><span class="token function">getSum</span><span class="token punctuation">(</span><span class="token number">101.0f</span><span class="token punctuation">,</span> <span class="token number">11.2f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"sum = "</span> <span class="token operator">+</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java">åˆ‡é¢ç±»<span class="token function">f1</span><span class="token punctuation">(</span>å‰ç½®é€šçŸ¥<span class="token punctuation">)</span><span class="token operator">-</span>æ—¥å¿—<span class="token operator">--</span>æ–¹æ³•å<span class="token operator">:</span>getSum<span class="token operator">--</span>æ–¹æ³•å‚æ•°<span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">101.0</span><span class="token punctuation">,</span> <span class="token number">11.2</span><span class="token punctuation">]</span>æ–¹æ³•å†…éƒ¨æ‰“å°result <span class="token operator">=</span> <span class="token number">112.2</span>åˆ‡é¢ç±»<span class="token function">f2</span><span class="token punctuation">(</span>è¿”å›é€šçŸ¥<span class="token punctuation">)</span><span class="token operator">-</span>æ–¹æ³•æ‰§è¡Œæ¥æ”¶<span class="token operator">--</span>æ—¥å¿—<span class="token operator">--</span>æ–¹æ³•å<span class="token operator">:</span>getSumåˆ‡é¢ç±»<span class="token function">f4</span><span class="token punctuation">(</span>æœ€ç»ˆé€šçŸ¥<span class="token punctuation">)</span><span class="token operator">-</span>æ–¹æ³•æœ€ç»ˆæ‰§è¡Œå®Œæ¯•<span class="token operator">--</span>æ—¥å¿—<span class="token operator">--</span>æ–¹æ³•å<span class="token operator">:</span>getSumsum <span class="token operator">=</span> <span class="token number">112.2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/574208C91D4CABB2FA530B78BE6722D3.png"></p><hr><h2 id="ä½œä¸šå¸ƒç½®"><a href="#ä½œä¸šå¸ƒç½®" class="headerlink" title="ä½œä¸šå¸ƒç½®"></a>ä½œä¸šå¸ƒç½®</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/72B46B2DFE84689272CC5AB7AA468FAB.png"></p><p>UsbInterfaceæ¥å£</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>homework</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UsbInterface</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Phoneç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>homework</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Phone</span> <span class="token keyword">implements</span> <span class="token class-name">UsbInterface</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Phone æ‰§è¡Œ work().."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Cameraç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>homework</span><span class="token punctuation">;</span>ã€<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Camera</span> <span class="token keyword">implements</span> <span class="token class-name">UsbInterface</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Camera æ‰§è¡Œ work().."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>SmartAnimalAspectç±»[&#x3D;&#x3D;åˆ‡é¢ç±»&#x3D;&#x3D;]</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>homework</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span><span class="token class-name">JoinPoint</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@Aspect</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SmartAnimalAspect</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//1.å‰ç½®é€šçŸ¥</span>    <span class="token comment">//æ³¨æ„ï¼šåˆ‡å…¥æ–¹æ³•çš„ç±»ä¸åˆ‡é¢ç±»åœ¨åŒä¸€ä¸ªç›®å½•->å¯ç”¨ç®€å•ç±»å</span>    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"execution(public void UsbInterface.work())"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">showBeginLog</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å‰ç½®é€šçŸ¥-æ‰§è¡ŒshowBeginLogæ–¹æ³•.."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//2.è¿”å›é€šçŸ¥</span>    <span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"execution(public void UsbInterface.work())"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">showSuccessEndLog</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å‰ç½®é€šçŸ¥-æ‰§è¡ŒshowSuccessEndLogæ–¹æ³•.."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//3.å¼‚å¸¸é€šçŸ¥</span>    <span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"execution(public void com.lhyedu.spring.aop.homework.UsbInterface.work())"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">showExceptionLog</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å¼‚å¸¸é€šçŸ¥-æ‰§è¡ŒshowExceptionLogæ–¹æ³•.."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//4.æœ€ç»ˆé€šçŸ¥</span>    <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"execution(public void com.lhyedu.spring.aop.homework.UsbInterface.work())"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">showFinallyEndLog</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœ€ç»ˆé€šçŸ¥-æ‰§è¡ŒshowFinallyEndLogæ–¹æ³•.."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">homework</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>            <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">UsbInterface</span> phone <span class="token operator">=</span> ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"phone"</span><span class="token punctuation">,</span> <span class="token class-name">UsbInterface</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    phone<span class="token punctuation">.</span><span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"-----------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">UsbInterface</span> camera <span class="token operator">=</span> ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"camera"</span><span class="token punctuation">,</span> <span class="token class-name">UsbInterface</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    camera<span class="token punctuation">.</span><span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java">å‰ç½®é€šçŸ¥<span class="token operator">-</span>æ‰§è¡ŒshowBeginLogæ–¹æ³•<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token class-name">Phone</span> æ‰§è¡Œ <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span>å‰ç½®é€šçŸ¥<span class="token operator">-</span>æ‰§è¡ŒshowSuccessEndLogæ–¹æ³•<span class="token punctuation">.</span><span class="token punctuation">.</span>æœ€ç»ˆé€šçŸ¥<span class="token operator">-</span>æ‰§è¡ŒshowFinallyEndLogæ–¹æ³•<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>å‰ç½®é€šçŸ¥<span class="token operator">-</span>æ‰§è¡ŒshowBeginLogæ–¹æ³•<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token class-name">Camera</span> æ‰§è¡Œ <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span>å‰ç½®é€šçŸ¥<span class="token operator">-</span>æ‰§è¡ŒshowSuccessEndLogæ–¹æ³•<span class="token punctuation">.</span><span class="token punctuation">.</span>æœ€ç»ˆé€šçŸ¥<span class="token operator">-</span>æ‰§è¡ŒshowFinallyEndLogæ–¹æ³•<span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AOP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€ä»£ç†-ç²¾è‡´å°æ¡ˆä¾‹</title>
      <link href="/2024/02/17/%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86-%E7%B2%BE%E8%87%B4%E5%B0%8F%E6%A1%88%E4%BE%8B/"/>
      <url>/2024/02/17/%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86-%E7%B2%BE%E8%87%B4%E5%B0%8F%E6%A1%88%E4%BE%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="åŠ¨æ€ä»£ç†â€”ç²¾è‡´å°æ¡ˆä¾‹"><a href="#åŠ¨æ€ä»£ç†â€”ç²¾è‡´å°æ¡ˆä¾‹" class="headerlink" title="åŠ¨æ€ä»£ç†â€”ç²¾è‡´å°æ¡ˆä¾‹"></a>åŠ¨æ€ä»£ç†â€”ç²¾è‡´å°æ¡ˆä¾‹</h1><h2 id="éœ€æ±‚è¯´æ˜"><a href="#éœ€æ±‚è¯´æ˜" class="headerlink" title="éœ€æ±‚è¯´æ˜"></a>éœ€æ±‚è¯´æ˜</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/F2376053699EFA3A14DCBE6134991CBC.png"></p><hr><h2 id="ä¼ ç»Ÿæ–¹å¼"><a href="#ä¼ ç»Ÿæ–¹å¼" class="headerlink" title="ä¼ ç»Ÿæ–¹å¼"></a>ä¼ ç»Ÿæ–¹å¼</h2><p>Vehicleæ¥å£</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>proxy2</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Carç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>proxy2</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token keyword">implements</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"äº¤é€šå·¥å…·å¼€å§‹è¿è¡Œäº†.."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å°æ±½è½¦åœ¨å…¬è·¯ running.."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"äº¤é€šå·¥å…·åœæ­¢è¿è¡Œäº†.."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>shipç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>proxy2</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Ship</span> <span class="token keyword">implements</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"äº¤é€šå·¥å…·å¼€å§‹è¿è¡Œäº†.."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å¤§è½®èˆ¹åœ¨æ°´ä¸Š running.."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"äº¤é€šå·¥å…·åœæ­¢è¿è¡Œäº†.."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">traditionalSolution</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Vehicle</span> vehicle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    vehicle<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"====================="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    vehicle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ship</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    vehicle<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java">äº¤é€šå·¥å…·å¼€å§‹è¿è¡Œäº†<span class="token punctuation">.</span><span class="token punctuation">.</span>å°æ±½è½¦åœ¨å…¬è·¯ running<span class="token punctuation">.</span><span class="token punctuation">.</span>äº¤é€šå·¥å…·åœæ­¢è¿è¡Œäº†<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>äº¤é€šå·¥å…·å¼€å§‹è¿è¡Œäº†<span class="token punctuation">.</span><span class="token punctuation">.</span>å¤§è½®èˆ¹åœ¨æ°´ä¸Š running<span class="token punctuation">.</span><span class="token punctuation">.</span>äº¤é€šå·¥å…·åœæ­¢è¿è¡Œäº†<span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>é—®é¢˜è¯´æ˜ï¼šä»£ç å†—ä½™ï¼Œèµ·å§‹å°±æ˜¯å•ä¸ªå¯¹è±¡çš„è°ƒç”¨ï¼Œå¹¶æ²¡æœ‰å¾ˆå¥½åœ°è§£å†³ï¼Œæ— æ³•å¯¹åŒä¸€ç±»å‹çš„å¤šä¸ªå¯¹è±¡è¿›è¡Œç»Ÿä¸€ç®¡ç†</strong></p></blockquote><hr><h2 id="åŠ¨æ€ä»£ç†æ–¹å¼"><a href="#åŠ¨æ€ä»£ç†æ–¹å¼" class="headerlink" title="åŠ¨æ€ä»£ç†æ–¹å¼"></a>åŠ¨æ€ä»£ç†æ–¹å¼</h2><blockquote><p><strong>æ³¨æ„ï¼šç†è§£<code>åŠ¨æ€ä»£ç†</code>ï¼Œæ˜¯æŒæ¡AOPçš„æ ¸å¿ƒ</strong></p></blockquote><p><strong>åŠ¨æ€ä»£ç†è§£å†³æ€è·¯ï¼Œåœ¨è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä½¿ç”¨åå°„æœºåˆ¶ï¼Œæ ¹æ®æ–¹æ³•å»å†³å®šè°ƒç”¨å“ªä¸ªå¯¹è±¡ã€‚</strong></p><p><strong>VehicleProxyProviderç±»</strong></p><blockquote><p><strong>è¯¥ç±»å¯ä»¥è¿”å›ä¸€ä¸ªä»£ç†å¯¹è±¡</strong></p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>proxy2</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">InvocationHandler</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Proxy</span></span><span class="token punctuation">;</span><span class="token comment">//è¯¥ç±»å¯ä»¥è¿”å›ä¸€ä¸ª ä»£ç†å¯¹è±¡</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">VehicleProxyProvider</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//å®šä¹‰ä¸€ä¸ªå±æ€§</span>    <span class="token comment">//è®¾ç½®ä¸€ä¸ªå°†æ¥çœŸæ­£è¦è¿è¡Œçš„å¯¹è±¡ï¼Œåªè¦æ˜¯å®ç°äº†Vehicleæ¥å£çš„å°±ok</span>    <span class="token keyword">private</span> <span class="token class-name">Vehicle</span> target_vehicle<span class="token punctuation">;</span>    <span class="token comment">//æ„é€ å™¨</span>    <span class="token keyword">public</span> <span class="token class-name">VehicleProxyProvider</span><span class="token punctuation">(</span><span class="token class-name">Vehicle</span> target_vehicle<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>target_vehicle <span class="token operator">=</span> target_vehicle<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//ç¼–å†™ä¸€ä¸ªæ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªä»£ç†å¯¹è±¡(é‡ç‚¹ï¼ï¼ï¼)</span>    <span class="token keyword">public</span> <span class="token class-name">Vehicle</span> <span class="token function">getProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">/**         *     public static Object newProxyInstance(ClassLoader loader,         *                                           Class&lt;?>[] interfaces,         *                                           InvocationHandler h)         * è§£è¯»ï¼š         * 0.Proxy.newProxyInstance()ï¼šå¯ä»¥è¿”å›ä¸€ä¸ª"ä»£ç†å¯¹è±¡"         * 1.ClassLoader loaderï¼šç±»çš„åŠ è½½å™¨         * 2.Class&lt;?>[] interfacesï¼šå°†æ¥è¦ä»£ç†çš„å¯¹è±¡çš„æ¥å£ä¿¡æ¯         * 3.InvocationHandler hï¼šè°ƒç”¨å¤„ç†å™¨/å¯¹è±¡ æœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„æ–¹æ³•invoke         */</span>        <span class="token comment">//1.å¾—åˆ°ç±»åŠ è½½å™¨</span>        <span class="token class-name">ClassLoader</span> cl <span class="token operator">=</span> target_vehicle<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//2.å¾—åˆ° è¢«ä»£ç†/è¢«æ‰§è¡Œå¯¹è±¡ çš„æ¥å£ä¿¡æ¯</span>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> interfaces <span class="token operator">=</span> target_vehicle<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//3.åˆ›å»ºInvocationHandler å¯¹è±¡</span>        <span class="token comment">/**         * public interface InvocationHandler &#123;         *     public Object invoke(Object proxy, Method method, Object[] args)         *     throws Throwable;//æ¥å£çš„æŠ½è±¡æ–¹æ³•         * &#125;         */</span>        <span class="token comment">//å› ä¸ºInvocationHandleræ˜¯æ¥å£ -> å¯ä»¥é€šè¿‡åŒ¿åå¯¹è±¡æ–¹å¼æ¥åˆ›å»ºè¯¥æ–¹å¼</span>        <span class="token class-name">InvocationHandler</span> invocationHandler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token comment">//invoke():å°†æ¥æ‰§è¡Œtarget_vehicleçš„æ–¹æ³•æ—¶ï¼Œä¼šè°ƒç”¨åˆ°çš„</span>            <span class="token comment">//Object oï¼šä»£ç†å¯¹è±¡</span>            <span class="token comment">//Method methodï¼šåå°„ä¸­çš„æ–¹æ³•ç±»</span>            <span class="token comment">//Object[] argsï¼šè¡¨ç¤ºä»£ç†å¯¹è±¡çš„æ–¹æ³•çš„å‚æ•°</span>            <span class="token comment">//è¿”å›ï¼šä»£ç†å¯¹è±¡è°ƒç”¨(invoke)åè¿”å›çš„ç»“æœ</span>            <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>                    <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"äº¤é€šå·¥å…·å¼€å§‹è¿è¡Œäº†.."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//æ‰§è¡Œ(é‡ç‚¹ï¼)ã€‚ä»¥ä¸‹æ˜¯æˆ‘ä»¬çš„åå°„åŸºç¡€</span>                <span class="token class-name">Object</span> result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>target_vehicle<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"äº¤é€šå·¥å…·åœæ­¢è¿è¡Œäº†.."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> result<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token comment">//è·å–ä»£ç†å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å¯ä»¥ä»£ç†æ‰§è¡Œæ–¹æ³•</span>        <span class="token class-name">Vehicle</span> proxy <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Vehicle</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>cl<span class="token punctuation">,</span> interfaces<span class="token punctuation">,</span> invocationHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> proxy<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">proxySolution</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//åˆ›å»ºä¸€ä¸ªShipå¯¹è±¡</span>    <span class="token class-name">Vehicle</span> vehicle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ship</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//åˆ›å»ºVehicleProxyProviderå¯¹è±¡ï¼Œå¹¶ä¼ å…¥è¦ä»£ç†çš„å¯¹è±¡</span>    <span class="token class-name">VehicleProxyProvider</span> vehicleProxyProvider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VehicleProxyProvider</span><span class="token punctuation">(</span>vehicle<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//è·å–ä»£ç†å¯¹è±¡(éå¸¸å…³é”®!!!) -> ä»£ç†æ‰§è¡Œæ–¹æ³•</span>    <span class="token comment">//1.proxyç¼–è¯‘ç±»å‹ï¼šVehicle</span>    <span class="token comment">//2.proxyè¿è¡Œç±»å‹ï¼šclass com.sun.proxy.$Proxy9(ä»£ç†ç±»å‹)</span>    <span class="token class-name">Vehicle</span> proxy <span class="token operator">=</span> vehicleProxyProvider<span class="token punctuation">.</span><span class="token function">getProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"(proxyè¿è¡Œç±»å‹æ˜¯:"</span> <span class="token operator">+</span> proxy<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">")"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    proxy<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>æ³¨æ„ï¼šproxyçš„ç¼–è¯‘ç±»å‹&amp;è¿è¡Œç±»å‹</strong></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240118101421208.png"></p><p><strong>æ‰§è¡Œ<code>proxy.run()</code>è¯­å¥æ—¶ï¼š</strong></p><ul><li><strong>æ²¡æœ‰æ‰§è¡ŒShipå¯¹è±¡çš„run()æ–¹æ³•</strong></li><li><strong>é€šè¿‡ï¼šåå°„ + åŠ¨æ€ä»£ç†æœºåˆ¶</strong></li><li><strong>æ‰§è¡Œçš„æ˜¯proxyå¯¹è±¡çš„newProxyInstanceæ–¹æ³•çš„å‚æ•°(å³ï¼šInvocationHandlerå®ç°ç±»å¯¹è±¡)</strong></li></ul></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token punctuation">(</span>proxyè¿è¡Œç±»å‹æ˜¯<span class="token operator">:</span><span class="token keyword">class</span> com<span class="token punctuation">.</span>sun<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>$<span class="token class-name">Proxy9</span><span class="token punctuation">)</span>äº¤é€šå·¥å…·å¼€å§‹è¿è¡Œäº†<span class="token punctuation">.</span><span class="token punctuation">.</span>å¤§è½®èˆ¹åœ¨æ°´ä¸Š running<span class="token punctuation">.</span><span class="token punctuation">.</span>äº¤é€šå·¥å…·åœæ­¢è¿è¡Œäº†<span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="è§£è¯»"><a href="#è§£è¯»" class="headerlink" title="è§£è¯»"></a>è§£è¯»</h3><p><strong><code>proxy.run()</code>çš„å…·ä½“æ‰§è¡Œè¿‡ç¨‹</strong></p><p>è®¾ç½®æ–­ç‚¹</p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240118102910707.png" alt="" style="zoom: 50%;" /><p>step into</p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240117221859555.png" alt="" style="zoom: 50%;" /><p>step over</p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240117222541472.png" alt="" style="zoom: 50%;" /><p>step into</p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240117222700781.png" alt="" style="zoom: 50%;" /><p>step over + step into</p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240117222840457.png" alt="" style="zoom: 50%;" /><p>step into</p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240117222937383.png" alt="" style="zoom: 50%;" /><p>step into</p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240117223251908.png" alt="" style="zoom: 50%;" /><p>step into</p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240117223447188.png" alt="" style="zoom: 50%;" /><hr><h2 id="è¯¾åä½œä¸šâ€”åŠ¨æ€ä»£ç†æ·±å…¥-æ¨ªåˆ‡å…³æ³¨ç‚¹"><a href="#è¯¾åä½œä¸šâ€”åŠ¨æ€ä»£ç†æ·±å…¥-æ¨ªåˆ‡å…³æ³¨ç‚¹" class="headerlink" title="è¯¾åä½œä¸šâ€”åŠ¨æ€ä»£ç†æ·±å…¥[æ¨ªåˆ‡å…³æ³¨ç‚¹]"></a>è¯¾åä½œä¸šâ€”åŠ¨æ€ä»£ç†æ·±å…¥[æ¨ªåˆ‡å…³æ³¨ç‚¹]</h2><p><strong>æœ‰ä¸€ä¸ª<code>SmartAnimal</code>æ¥å£ï¼Œå¯ä»¥å®Œæˆç®€å•çš„åŠ å‡æ³•ï¼Œè¦æ±‚åœ¨æ‰§è¡Œ<code>getSum()</code>å’Œ<code>getSub()</code>æ—¶ï¼Œè¾“å‡ºæ‰§è¡Œå‰ï¼Œæ‰§è¡Œè¿‡ç¨‹ï¼Œæ‰§è¡Œåçš„æ—¥å¿—è¾“å‡ºï¼Œæ€è€ƒå¦‚ä½•ç”¨<u>åŠ¨æ€ä»£ç†æ–¹å¼</u>å®ç°ï¼Ÿ</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/2E054AAFC773E60E37894079E8E83B3E.png" alt="" style="zoom: 40%;" /><p>SmartAnimalableæ¥å£</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>proxy</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SmartAnimalable</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">float</span> <span class="token function">getSum</span><span class="token punctuation">(</span><span class="token keyword">float</span> i<span class="token punctuation">,</span> <span class="token keyword">float</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">float</span> <span class="token function">getSub</span><span class="token punctuation">(</span><span class="token keyword">float</span> i<span class="token punctuation">,</span> <span class="token keyword">float</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>SmartDogç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>proxy</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SmartDog</span> <span class="token keyword">implements</span> <span class="token class-name">SmartAnimalable</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">getSum</span><span class="token punctuation">(</span><span class="token keyword">float</span> i<span class="token punctuation">,</span> <span class="token keyword">float</span> j<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> i <span class="token operator">+</span> j<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">getSub</span><span class="token punctuation">(</span><span class="token keyword">float</span> i<span class="token punctuation">,</span> <span class="token keyword">float</span> j<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> i <span class="token operator">-</span> j<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>MyProxyProvideç±»[é‡ç‚¹]</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>proxy</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">InvocationHandler</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Proxy</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyProxyProvide</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">SmartAnimalable</span> target_obj<span class="token punctuation">;</span>    <span class="token comment">//æ„é€ å™¨</span>    <span class="token keyword">public</span> <span class="token class-name">MyProxyProvide</span><span class="token punctuation">(</span><span class="token class-name">SmartAnimalable</span> target_obj<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>target_obj <span class="token operator">=</span> target_obj<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">SmartAnimalable</span> <span class="token function">getProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//1.å¾—åˆ°ç±»åŠ è½½å™¨</span>        <span class="token class-name">ClassLoader</span> loader <span class="token operator">=</span> target_obj<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//2.å¾—åˆ°æ¥å£ä¿¡æ¯</span>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> interfaces <span class="token operator">=</span> target_obj<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//2.å¾—åˆ°InvocationHandlerå®ç°ç±»</span>        <span class="token class-name">InvocationHandler</span> h <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>                    <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">Object</span> result <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    <span class="token comment">//è¿™é‡Œä»AOPçœ‹ï¼Œå°±æ˜¯ä¸€ä¸ªæ¨ªåˆ‡å…³æ³¨ç‚¹-"å‰ç½®é€šçŸ¥"</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ—¥å¿—--æ–¹æ³•å:"</span> <span class="token operator">+</span> method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                            <span class="token operator">+</span> <span class="token string">"--æ–¹æ³•å‚æ•°:"</span> <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>target_obj<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">//ä¹Ÿæ˜¯ä¸€ä¸ªæ¨ªåˆ‡å…³æ³¨ç‚¹-"è¿”å›é€šçŸ¥"</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ—¥å¿—--æ–¹æ³•å:"</span> <span class="token operator">+</span> method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                            <span class="token operator">+</span> <span class="token string">"--æ–¹æ³•æ­£å¸¸ç»“æŸ--è¿”å›ç»“æœ:"</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">//åå°„æ‰§è¡Œæ–¹æ³•å‡ºç°å¼‚å¸¸-> æ¨ªåˆ‡å…³æ³¨ç‚¹-"å¼‚å¸¸é€šçŸ¥"</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ–¹æ³•æ‰§è¡Œå¼‚å¸¸-æ—¥å¿—-æ–¹æ³•å:"</span> <span class="token operator">+</span>                                       method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"--å¼‚å¸¸ç±»å‹:"</span>                                       <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>                    <span class="token comment">//æ¨ªåˆ‡å…³æ³¨ç‚¹-"æœ€ç»ˆé€šçŸ¥"</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ–¹æ³•æœ€ç»ˆç»“æŸ-æ—¥å¿—-æ–¹æ³•å-"</span> <span class="token operator">+</span>                                       method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token keyword">return</span> result<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token class-name">SmartAnimalable</span> s <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SmartAnimalable</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>loader<span class="token punctuation">,</span> interfaces<span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> s<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">proxySolution2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">SmartAnimalable</span> smartDog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SmartDog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">MyProxyProvide</span> myProxyProvide <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyProxyProvide</span><span class="token punctuation">(</span>smartDog<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">SmartAnimalable</span> proxy <span class="token operator">=</span> myProxyProvide<span class="token punctuation">.</span><span class="token function">getProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    proxy<span class="token punctuation">.</span><span class="token function">getSum</span><span class="token punctuation">(</span><span class="token number">10.87f</span><span class="token punctuation">,</span> <span class="token number">89.7f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"========================================"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    proxy<span class="token punctuation">.</span><span class="token function">getSub</span><span class="token punctuation">(</span><span class="token number">10.87f</span><span class="token punctuation">,</span> <span class="token number">89.7f</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java">æ—¥å¿—<span class="token operator">--</span>æ–¹æ³•å<span class="token operator">:</span>getSum<span class="token operator">--</span>æ–¹æ³•å‚æ•°<span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">10.87</span><span class="token punctuation">,</span> <span class="token number">89.7</span><span class="token punctuation">]</span>æ—¥å¿—<span class="token operator">--</span>æ–¹æ³•å<span class="token operator">:</span>getSum<span class="token operator">--</span>æ–¹æ³•æ­£å¸¸ç»“æŸ<span class="token operator">--</span>è¿”å›ç»“æœ<span class="token operator">:</span><span class="token number">100.57</span>æ–¹æ³•æœ€ç»ˆç»“æŸ<span class="token operator">-</span>æ—¥å¿—<span class="token operator">-</span>æ–¹æ³•å<span class="token operator">-</span>getSum<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>æ—¥å¿—<span class="token operator">--</span>æ–¹æ³•å<span class="token operator">:</span>getSub<span class="token operator">--</span>æ–¹æ³•å‚æ•°<span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">10.87</span><span class="token punctuation">,</span> <span class="token number">89.7</span><span class="token punctuation">]</span>æ—¥å¿—<span class="token operator">--</span>æ–¹æ³•å<span class="token operator">:</span>getSub<span class="token operator">--</span>æ–¹æ³•æ­£å¸¸ç»“æŸ<span class="token operator">--</span>è¿”å›ç»“æœ<span class="token operator">:</span><span class="token operator">-</span><span class="token number">78.829994</span>æ–¹æ³•æœ€ç»ˆç»“æŸ<span class="token operator">-</span>æ—¥å¿—<span class="token operator">-</span>æ–¹æ³•å<span class="token operator">-</span>getSub<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>é—®é¢˜</strong></p><p><strong>åœ¨<code>MyProxyProvide.java</code>ä¸­ï¼Œæˆ‘ä»¬è¾“å‡ºçš„è¯­å¥åŠŸèƒ½æ¯”è¾ƒå¼±ï¼Œè€Œä¸”æ˜¯ç¡¬ç¼–ç ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›æ˜¯ä»¥ä¸€ä¸ªæ–¹æ³•ï¼ŒåµŒå…¥åˆ°çœŸæ­£æ‰§è¡Œçš„ç›®æ ‡æ–¹æ³•å‰ï¼Œæ€ä¹ˆåŠï¼Ÿ</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240118195632967.png" alt="" style="zoom: 60%;" /><p><strong>æ”¹è¿›ï¼šå°†ä»¥ä¸Šå‡ ç§<code>&quot;æ¨ªåˆ‡å…³æ³¨ç‚¹&quot;</code>æ‰“åŒ…æˆ<code>å‡½æ•°</code>ï¼Œå³å¯ä»¥åœ¨è¿™äº›åœ°æ–¹å†™æ—¥å¿—å’Œå…¶ä»–ä¸šåŠ¡é€»è¾‘</strong></p></blockquote><h3 id="åœŸæ–¹æ³•è§£å†³"><a href="#åœŸæ–¹æ³•è§£å†³" class="headerlink" title="åœŸæ–¹æ³•è§£å†³"></a>åœŸæ–¹æ³•è§£å†³</h3><p><strong>å°†<code>æ¨ªåˆ‡å…³æ³¨ç‚¹-&quot;å‰ç½®é€šçŸ¥&quot;</code>ã€<code>æ¨ªåˆ‡å…³æ³¨ç‚¹-&quot;è¿”å›é€šçŸ¥&quot;</code>ç­‰å°è£…åˆ°AOPç±»ä¸­ã€‚è¿™é‡ŒLHYAOPè§†ä¸ºä¸€ä¸ªåˆ‡é¢ç±»ï¼Œè¾¾æˆè§£è€¦æ•ˆæœã€‚</strong></p><p><strong>LHYAOPç±»[ç®€æ˜“çš„AOP]</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>proxy3</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span></span><span class="token punctuation">;</span><span class="token comment">//æç®€çš„AOPç±»</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LHYAOP</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//å‡½æ•°å‚æ•° = invoke()çš„å‚æ•°</span>    <span class="token comment">//å°† æ¨ªåˆ‡å…³æ³¨ç‚¹-"å‰ç½®é€šçŸ¥" å°è£…æˆbeforeæ–¹æ³•</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"LHYAOP-before-æ—¥å¿—--æ–¹æ³•å:"</span> <span class="token operator">+</span> method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token operator">+</span> <span class="token string">"--æ–¹æ³•å‚æ•°:"</span> <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//å°† æ¨ªåˆ‡å…³æ³¨ç‚¹-"è¿”å›é€šçŸ¥" å°è£…æˆafteræ–¹æ³•</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span> result<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"LHYAOP-after-æ—¥å¿—--æ–¹æ³•å:"</span> <span class="token operator">+</span> method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token operator">+</span> <span class="token string">"--æ–¹æ³•æ­£å¸¸ç»“æŸ--è¿”å›ç»“æœ:"</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>MyProxyProvideç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>proxy3</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">InvocationHandler</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Proxy</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyProxyProvide</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">SmartAnimalable</span> target_obj<span class="token punctuation">;</span>    <span class="token comment">//æ„é€ å™¨</span>    <span class="token keyword">public</span> <span class="token class-name">MyProxyProvide</span><span class="token punctuation">(</span><span class="token class-name">SmartAnimalable</span> target_obj<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>target_obj <span class="token operator">=</span> target_obj<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">SmartAnimalable</span> <span class="token function">getProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//1.å¾—åˆ°ç±»åŠ è½½å™¨</span>        <span class="token class-name">ClassLoader</span> loader <span class="token operator">=</span> target_obj<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//2.å¾—åˆ°æ¥å£ä¿¡æ¯</span>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> interfaces <span class="token operator">=</span> target_obj<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//2.å¾—åˆ°InvocationHandlerå®ç°ç±»</span>        <span class="token class-name">InvocationHandler</span> h <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>                    <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">Object</span> result <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    <span class="token comment">//æ¨ªåˆ‡å…³æ³¨ç‚¹-"å‰ç½®é€šçŸ¥"</span>                    <span class="token constant">LHYAOP</span><span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span>target_obj<span class="token punctuation">,</span> method<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>                    result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>target_obj<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">//æ¨ªåˆ‡å…³æ³¨ç‚¹-"è¿”å›é€šçŸ¥"</span>                    <span class="token constant">LHYAOP</span><span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">//åå°„æ‰§è¡Œæ–¹æ³•å‡ºç°å¼‚å¸¸-> æ¨ªåˆ‡å…³æ³¨ç‚¹-"å¼‚å¸¸é€šçŸ¥"</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ–¹æ³•æ‰§è¡Œå¼‚å¸¸-æ—¥å¿—-æ–¹æ³•å:"</span>                                        <span class="token operator">+</span> method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                            <span class="token operator">+</span> <span class="token string">"--å¼‚å¸¸ç±»å‹:"</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>                    <span class="token comment">//æ¨ªåˆ‡å…³æ³¨ç‚¹-"æœ€ç»ˆé€šçŸ¥"</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ–¹æ³•æœ€ç»ˆç»“æŸ-æ—¥å¿—-æ–¹æ³•å-"</span>                                        <span class="token operator">+</span> method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token keyword">return</span> result<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token class-name">SmartAnimalable</span> s <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SmartAnimalable</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>loader<span class="token punctuation">,</span> interfaces<span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> s<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">proxySolution2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">SmartAnimalable</span> smartDog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SmartDog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">MyProxyProvide</span> myProxyProvide <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyProxyProvide</span><span class="token punctuation">(</span>smartDog<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">SmartAnimalable</span> proxy <span class="token operator">=</span> myProxyProvide<span class="token punctuation">.</span><span class="token function">getProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    proxy<span class="token punctuation">.</span><span class="token function">getSum</span><span class="token punctuation">(</span><span class="token number">10.87f</span><span class="token punctuation">,</span> <span class="token number">89.7f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"========================================"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    proxy<span class="token punctuation">.</span><span class="token function">getSub</span><span class="token punctuation">(</span><span class="token number">10.87f</span><span class="token punctuation">,</span> <span class="token number">89.7f</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token constant">LHYAOP</span><span class="token operator">-</span>before<span class="token operator">-</span>æ—¥å¿—<span class="token operator">--</span>æ–¹æ³•å<span class="token operator">:</span>getSum<span class="token operator">--</span>æ–¹æ³•å‚æ•°<span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">10.87</span><span class="token punctuation">,</span> <span class="token number">89.7</span><span class="token punctuation">]</span><span class="token constant">LHYAOP</span><span class="token operator">-</span>after<span class="token operator">-</span>æ—¥å¿—<span class="token operator">--</span>æ–¹æ³•å<span class="token operator">:</span>getSum<span class="token operator">--</span>æ–¹æ³•æ­£å¸¸ç»“æŸ<span class="token operator">--</span>è¿”å›ç»“æœ<span class="token operator">:</span><span class="token number">100.57</span>æ–¹æ³•æœ€ç»ˆç»“æŸ<span class="token operator">-</span>æ—¥å¿—<span class="token operator">-</span>æ–¹æ³•å<span class="token operator">-</span>getSum<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token constant">LHYAOP</span><span class="token operator">-</span>before<span class="token operator">-</span>æ—¥å¿—<span class="token operator">--</span>æ–¹æ³•å<span class="token operator">:</span>getSub<span class="token operator">--</span>æ–¹æ³•å‚æ•°<span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">10.87</span><span class="token punctuation">,</span> <span class="token number">89.7</span><span class="token punctuation">]</span><span class="token constant">LHYAOP</span><span class="token operator">-</span>after<span class="token operator">-</span>æ—¥å¿—<span class="token operator">--</span>æ–¹æ³•å<span class="token operator">:</span>getSub<span class="token operator">--</span>æ–¹æ³•æ­£å¸¸ç»“æŸ<span class="token operator">--</span>è¿”å›ç»“æœ<span class="token operator">:</span><span class="token operator">-</span><span class="token number">78.829994</span>æ–¹æ³•æœ€ç»ˆç»“æŸ<span class="token operator">-</span>æ—¥å¿—<span class="token operator">-</span>æ–¹æ³•å<span class="token operator">-</span>getSub<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="pring-AOPè§£å†³"><a href="#pring-AOPè§£å†³" class="headerlink" title="pring AOPè§£å†³"></a>pring AOPè§£å†³</h3><blockquote><p>åœŸæ–¹æ³•ç¼ºç‚¹ï¼šä¸å¤Ÿçµæ´»ã€å¤ç”¨æ€§å·®ã€æ˜¯ä¸€ç§ç¡¬ç¼–ç (æ²¡æœ‰åå°„å’Œæ³¨è§£æ”¯æ’‘)</p><p><strong>&#x3D;&#x3D;&#x3D;&#x3D;&gt;å¼•å‡ºï¼š<code>Spring AOPï¼ˆåº•å±‚ï¼šASPECTJï¼‰</code></strong></p></blockquote><p><strong>AOPçš„å…¨ç§°ï¼š<code>aspect oriented programming</code>ï¼Œé¢å‘åˆ‡é¢ç¼–ç¨‹ã€‚<u><a href="https://aqua555552st.github.io/2024/02/17/AOP%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D/">å…·ä½“å®ç°çœ‹ä¸‹ä¸€ç« çš„å¿«é€Ÿå…¥é—¨</a></u>ã€‚</strong></p>]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AOP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20.æƒé™</title>
      <link href="/2024/02/16/20-%E6%9D%83%E9%99%90/"/>
      <url>/2024/02/16/20-%E6%9D%83%E9%99%90/</url>
      
        <content type="html"><![CDATA[<h1 id="æƒé™"><a href="#æƒé™" class="headerlink" title="æƒé™"></a>æƒé™</h1><h2 id="åŸºæœ¬ä»‹ç»"><a href="#åŸºæœ¬ä»‹ç»" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h2><p><strong><code>ls -l</code>ä¸­æ˜¾ç¤ºçš„å†…å®¹å¦‚ä¸‹</strong>ğŸ‘‡</p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/qw.png"></p><p><strong>å‰é¢å­—ç¬¦<u>å…±10ä½</u></strong></p><h3 id="0-9ä½è¯´æ˜"><a href="#0-9ä½è¯´æ˜" class="headerlink" title="0-9ä½è¯´æ˜"></a>0-9ä½è¯´æ˜</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/F163C83FBF3C7924470EF085691B2AF9.png"></p><blockquote><p><strong>å…¶ä»–è¯´æ˜ï¼š</strong></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/QQ%E5%9B%BE%E7%89%8720220810190038.png"></p></blockquote><hr><h2 id="2-rwxæƒé™è¯¦è§£-é‡ç‚¹"><a href="#2-rwxæƒé™è¯¦è§£-é‡ç‚¹" class="headerlink" title="2.rwxæƒé™è¯¦è§£[é‡ç‚¹]"></a>2.rwxæƒé™è¯¦è§£[é‡ç‚¹]</h2><h3 id="rwxä½œç”¨åˆ°æ–‡ä»¶"><a href="#rwxä½œç”¨åˆ°æ–‡ä»¶" class="headerlink" title="rwxä½œç”¨åˆ°æ–‡ä»¶"></a>rwxä½œç”¨åˆ°<u>æ–‡ä»¶</u></h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220810162228773.png"></p><h3 id="rwxä½œç”¨åˆ°ç›®å½•"><a href="#rwxä½œç”¨åˆ°ç›®å½•" class="headerlink" title="rwxä½œç”¨åˆ°ç›®å½•"></a>rwxä½œç”¨åˆ°<u>ç›®å½•</u></h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220810162323446.png"></p><hr><h2 id="ä¿®æ”¹æƒé™-â€”-æ–¹å¼1"><a href="#ä¿®æ”¹æƒé™-â€”-æ–¹å¼1" class="headerlink" title="ä¿®æ”¹æƒé™ â€” æ–¹å¼1(+ - &#x3D;)"></a>ä¿®æ”¹æƒé™ â€” æ–¹å¼1(+ - &#x3D;)</h2><h3 id="åŸºæœ¬ä»‹ç»-1"><a href="#åŸºæœ¬ä»‹ç»-1" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/0300F080DBF590E1153CE3F16F15E591.png" alt="img"></p><h3 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/24FF506A5A7B962DC29E33938CC815C1.png" alt="" style="zoom: 80%;" /><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/61F15433AACFD328B9BFB5304948A519.png" alt="" style="zoom: 67%;" /><blockquote><p>æ³¨æ„ï¼šèµ‹äºˆå¯æ‰§è¡Œæƒé™åï¼Œæ˜¾ç¤ºä¸º <strong>ç»¿è‰²</strong></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220810195601529.png"></p></blockquote><h3 id="åº”ç”¨å®ä¾‹"><a href="#åº”ç”¨å®ä¾‹" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/14332EDFAEAD326FBEC973A70BE20821.png"></p><hr><h2 id="ä¿®æ”¹æƒé™-â€”-æ–¹å¼2-æ•°å­—"><a href="#ä¿®æ”¹æƒé™-â€”-æ–¹å¼2-æ•°å­—" class="headerlink" title="ä¿®æ”¹æƒé™ â€” æ–¹å¼2(æ•°å­—)"></a>ä¿®æ”¹æƒé™ â€” æ–¹å¼2(æ•°å­—)</h2><h3 id="åŸºæœ¬ä»‹ç»-2"><a href="#åŸºæœ¬ä»‹ç»-2" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/3212BE5639559FCD17861E382540F1C5.png"></p><blockquote><p><strong>æƒé™çš„å„ä¸ªç»„åˆ</strong>åˆšå¥½å¯ä»¥æ’åˆ—æˆ <strong>&#x3D;&#x3D;0~7&#x3D;&#x3D;</strong></p></blockquote><h3 id="åº”ç”¨å®ä¾‹-1"><a href="#åº”ç”¨å®ä¾‹-1" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/DD1B659DB19FDAF01AE7E39D2163D0E4.png"></p><hr><h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/AC187AFCA8A03583084CA46D711D233A.png"></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>19.ç»„</title>
      <link href="/2024/02/16/19-%E7%BB%84/"/>
      <url>/2024/02/16/19-%E7%BB%84/</url>
      
        <content type="html"><![CDATA[<h1 id="ç»„"><a href="#ç»„" class="headerlink" title="ç»„"></a>ç»„</h1><h2 id="Linuxç»„çš„ä»‹ç»"><a href="#Linuxç»„çš„ä»‹ç»" class="headerlink" title="Linuxç»„çš„ä»‹ç»"></a>Linuxç»„çš„ä»‹ç»</h2><h3 id="åŸºæœ¬ä»‹ç»"><a href="#åŸºæœ¬ä»‹ç»" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/E3DE405FB8AEC99FD37F28FEF6FDB286.png"></p><blockquote><p><strong>æ–‡ä»¶</strong>å¯¹åº”å¾—<strong>3ä¸ªæ¦‚å¿µ</strong>(1~3)ï¼š<img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/B2F45EF72E80E2BFD97273BC967676F2.png" alt="" style="zoom:50%;" /></p></blockquote><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/254F907341298597CEF8B37761ED8078.png" alt="" style="zoom: 33%;" /><hr><h2 id="æ–‡ä»¶-ç›®å½•-æ‰€æœ‰è€…"><a href="#æ–‡ä»¶-ç›®å½•-æ‰€æœ‰è€…" class="headerlink" title="æ–‡ä»¶&#x2F;ç›®å½• æ‰€æœ‰è€…"></a>æ–‡ä»¶&#x2F;ç›®å½• æ‰€æœ‰è€…</h2><h3 id="åŸºæœ¬ä»‹ç»-1"><a href="#åŸºæœ¬ä»‹ç»-1" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/73A5F2B254D1FB779A30B80A91F1A80C.png" alt="" style="zoom: 67%;" /><h3 id="æŸ¥çœ‹æ–‡ä»¶æ‰€æœ‰è€…"><a href="#æŸ¥çœ‹æ–‡ä»¶æ‰€æœ‰è€…" class="headerlink" title="æŸ¥çœ‹æ–‡ä»¶æ‰€æœ‰è€…"></a><u>æŸ¥çœ‹</u>æ–‡ä»¶æ‰€æœ‰è€…</h3><p><strong>åŸºæœ¬è¯­æ³•</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">ls</span> <span class="token parameter variable">-ahl</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>åº”ç”¨å®ä¾‹</strong>ï¼š                      <img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220810104956556.png" alt="" style="zoom: 67%;" /></p><h3 id="ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…-åé¢ç¬¬7æ¡ä¹Ÿæœ‰"><a href="#ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…-åé¢ç¬¬7æ¡ä¹Ÿæœ‰" class="headerlink" title="ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…(åé¢ç¬¬7æ¡ä¹Ÿæœ‰)"></a><u>ä¿®æ”¹</u>æ–‡ä»¶æ‰€æœ‰è€…(åé¢ç¬¬7æ¡ä¹Ÿæœ‰)</h3><p><strong>åŸºæœ¬è¯­æ³•</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">chown</span> ç”¨æˆ·å æ–‡ä»¶/ç›®å½•å<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>åº”ç”¨å®ä¾‹</strong></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/1D554D95D14FCB4039515506E5E290D4.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220810103425866.png" alt="" style="zoom:80%;" /><hr><h2 id="ç»„çš„åˆ›å»º"><a href="#ç»„çš„åˆ›å»º" class="headerlink" title="ç»„çš„åˆ›å»º"></a>ç»„çš„<u>åˆ›å»º</u></h2><h3 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ group ç»„å<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="åº”ç”¨å®ä¾‹"><a href="#åº”ç”¨å®ä¾‹" class="headerlink" title="åº”ç”¨å®ä¾‹"></a><strong>åº”ç”¨å®ä¾‹</strong></h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/145B946F9C36E8149E8AFCD8725C1A43.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220810104147899.png" alt="" style="zoom:80%;" /><hr><h2 id="æ–‡ä»¶-ç›®å½•-æ‰€åœ¨ç»„"><a href="#æ–‡ä»¶-ç›®å½•-æ‰€åœ¨ç»„" class="headerlink" title="æ–‡ä»¶&#x2F;ç›®å½• æ‰€åœ¨ç»„"></a>æ–‡ä»¶&#x2F;ç›®å½• æ‰€åœ¨ç»„</h2><h3 id="åŸºæœ¬ä»‹ç»-2"><a href="#åŸºæœ¬ä»‹ç»-2" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/A36503E0406884708D20BA7CAD97AB4B.png"></p><h3 id="æŸ¥çœ‹-æ–‡ä»¶-ç›®å½•-æ‰€åœ¨ç»„"><a href="#æŸ¥çœ‹-æ–‡ä»¶-ç›®å½•-æ‰€åœ¨ç»„" class="headerlink" title="æŸ¥çœ‹ æ–‡ä»¶&#x2F;ç›®å½• æ‰€åœ¨ç»„"></a><u>æŸ¥çœ‹</u> æ–‡ä»¶&#x2F;ç›®å½• æ‰€åœ¨ç»„</h3><p><strong>åŸºæœ¬è¯­æ³•</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">ls</span> <span class="token parameter variable">-ahl</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>åº”ç”¨å®ä¾‹</strong></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/056FE8239D717830DE9656FC4F894CD3.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220810105625800.png" alt="" style="zoom:67%;" /><h3 id="ä¿®æ”¹-æ–‡ä»¶-ç›®å½•-æ‰€åœ¨ç»„-åé¢ç¬¬8æ¡ä¹Ÿæœ‰"><a href="#ä¿®æ”¹-æ–‡ä»¶-ç›®å½•-æ‰€åœ¨ç»„-åé¢ç¬¬8æ¡ä¹Ÿæœ‰" class="headerlink" title="ä¿®æ”¹ æ–‡ä»¶&#x2F;ç›®å½• æ‰€åœ¨ç»„(åé¢ç¬¬8æ¡ä¹Ÿæœ‰)"></a><u>ä¿®æ”¹</u> æ–‡ä»¶&#x2F;ç›®å½• æ‰€åœ¨ç»„(åé¢ç¬¬8æ¡ä¹Ÿæœ‰)</h3><p><strong>åŸºæœ¬è¯­æ³•</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">chgrp</span> ç»„å æ–‡ä»¶/ç›®å½•å<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>åº”ç”¨å®ä¾‹</strong></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/5574A042EBE9D6922652C93346AE332C.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220810110356058.png"></p><hr><h2 id="å…¶ä»–ç»„"><a href="#å…¶ä»–ç»„" class="headerlink" title="å…¶ä»–ç»„"></a>å…¶ä»–ç»„</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/73EF615307FB8069FCD463801218FAEE.png"></p><hr><h2 id="æ”¹å˜ç”¨æˆ·-æ‰€åœ¨ç»„"><a href="#æ”¹å˜ç”¨æˆ·-æ‰€åœ¨ç»„" class="headerlink" title="æ”¹å˜ç”¨æˆ· æ‰€åœ¨ç»„"></a>æ”¹å˜ç”¨æˆ· æ‰€åœ¨ç»„</h2><h3 id="åŸºæœ¬ä»‹ç»-3"><a href="#åŸºæœ¬ä»‹ç»-3" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/3383EDFFD6F98B7E53EE0926CD3687F7.png"></p><h3 id="åŸºæœ¬è¯­æ³•-1"><a href="#åŸºæœ¬è¯­æ³•-1" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">usermod</span> <span class="token parameter variable">-g</span> æ–°ç»„å ç”¨æˆ·å<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>æ”¹å˜è¯¥ç”¨æˆ·ç™»å½•çš„åˆå§‹æ–¹å¼</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">usermod</span> <span class="token parameter variable">-d</span> ç›®å½•å ç”¨æˆ·å <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><strong>ç‰¹åˆ«è¯´æ˜ï¼šç”¨æˆ·éœ€è¦æœ‰è¿›å…¥åˆ°æ–°ç›®å½•çš„æƒé™</strong></p></blockquote><h3 id="åº”ç”¨å®ä¾‹-1"><a href="#åº”ç”¨å®ä¾‹-1" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/CC30DE19560F41C29D70B9E4289D8D51.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220810152545001.png" alt="" style="zoom:80%;" /><hr><h2 id="ä¿®æ”¹-æ–‡ä»¶-ç›®å½•-æ‰€æœ‰è€…"><a href="#ä¿®æ”¹-æ–‡ä»¶-ç›®å½•-æ‰€æœ‰è€…" class="headerlink" title="ä¿®æ”¹ æ–‡ä»¶&#x2F;ç›®å½• æ‰€æœ‰è€…"></a>ä¿®æ”¹ æ–‡ä»¶&#x2F;ç›®å½• æ‰€æœ‰è€…</h2><h3 id="åŸºæœ¬è¯­æ³•-2"><a href="#åŸºæœ¬è¯­æ³•-2" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/A51AB65453B20EA5D735024301228A08.png"></p><h3 id="åº”ç”¨å®ä¾‹-2"><a href="#åº”ç”¨å®ä¾‹-2" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/A2689E9F951E678E9420DCF3394866E2.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/04C76EF540B0C1DD29F97F851ADE42F5.png"></p><hr><h2 id="ä¿®æ”¹-æ–‡ä»¶-ç›®å½•-æ‰€åœ¨ç»„"><a href="#ä¿®æ”¹-æ–‡ä»¶-ç›®å½•-æ‰€åœ¨ç»„" class="headerlink" title="ä¿®æ”¹ æ–‡ä»¶&#x2F;ç›®å½• æ‰€åœ¨ç»„"></a>ä¿®æ”¹ æ–‡ä»¶&#x2F;ç›®å½• æ‰€åœ¨ç»„</h2><h3 id="åŸºæœ¬ä»‹ç»-4"><a href="#åŸºæœ¬ä»‹ç»-4" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/A25192C01D908060FBDAD72A473254FE.png"></p><h3 id="åº”ç”¨å®ä¾‹-3"><a href="#åº”ç”¨å®ä¾‹-3" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/DD2FBCDFC1314100573DA621F8D4248A.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/C82535A6070EA6B9029E48033F0E857D.png" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>18.5.å‹ç¼©å’Œè§£å‹ç±»</title>
      <link href="/2024/02/16/18-5-%E5%8E%8B%E7%BC%A9%E5%92%8C%E8%A7%A3%E5%8E%8B%E7%B1%BB/"/>
      <url>/2024/02/16/18-5-%E5%8E%8B%E7%BC%A9%E5%92%8C%E8%A7%A3%E5%8E%8B%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<h2 id="gzip-gunzipæŒ‡ä»¤"><a href="#gzip-gunzipæŒ‡ä»¤" class="headerlink" title="gzip&#x2F;gunzipæŒ‡ä»¤"></a>gzip&#x2F;gunzipæŒ‡ä»¤</h2><h3 id="åŸºæœ¬ä»‹ç»"><a href="#åŸºæœ¬ä»‹ç»" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/0C28206BC11CE74397573F3BEF989C28.png"></p><h3 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><p><strong>å‹ç¼©</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">gzip</span> æ–‡ä»¶<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>è§£å‹ç¼©</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ gunzip æ–‡ä»¶.gz<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="åº”ç”¨å®ä¾‹"><a href="#åº”ç”¨å®ä¾‹" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/4C25F7E9FC7CC6869F6E0C92391E14D7.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809222617594.png" alt="" style="zoom:80%;" /><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/37A6B8A2834C976A8F8BE17C70264E2F.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809222637530.png" alt="" style="zoom:80%;" /><hr><h2 id="zip-unzipæŒ‡ä»¤"><a href="#zip-unzipæŒ‡ä»¤" class="headerlink" title="zip&#x2F;unzipæŒ‡ä»¤"></a>zip&#x2F;unzipæŒ‡ä»¤</h2><h3 id="åŸºæœ¬ä»‹ç»-1"><a href="#åŸºæœ¬ä»‹ç»-1" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/93E3DA6725B2B1DD7497DB216FEC04D3.png" alt="img"></p><h3 id="åŸºæœ¬è¯­æ³•-1"><a href="#åŸºæœ¬è¯­æ³•-1" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">zip</span> <span class="token punctuation">[</span>é€‰é¡¹<span class="token punctuation">]</span> XXX.zip å°†è¦å‹ç¼©çš„å†…å®¹                     //åŠŸèƒ½æè¿°ï¼šå‹ç¼©æ–‡ä»¶å’Œç›®å½•çš„å‘½ä»¤<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><strong>zipå¸¸ç”¨é€‰é¡¹</strong>ï¼š<img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/6408C9F389FBDF9AB74E416260834D7F.png" alt="" style="zoom: 50%;" /></p></blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">unzip</span> <span class="token punctuation">[</span>é€‰é¡¹<span class="token punctuation">]</span> XXX.zip                                        //åŠŸèƒ½æè¿°ï¼šè§£å‹ç¼©æ–‡ä»¶<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><strong>unzipå¸¸ç”¨é€‰é¡¹</strong>ï¼š<img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/9A35DFAE82ACEDE7042385A6922EE360.png" alt="" style="zoom:50%;" /></p></blockquote><h3 id="2-2åº”ç”¨å®ä¾‹"><a href="#2-2åº”ç”¨å®ä¾‹" class="headerlink" title="2.2åº”ç”¨å®ä¾‹"></a>2.2åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/A71FF130E9E717F6A5E4D23047C7BA9B.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809224547807.png" alt="" style="zoom:80%;" /><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809224617021.png" alt="" style="zoom:80%;" /><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/05CE37D931E1320A6B252632BF9A7ACE.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809224956839.png" alt="" style="zoom:80%;" /><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809225021264.png" alt="" style="zoom:80%;" /><hr><h2 id="taræŒ‡ä»¤-æœ€å¸¸ç”¨"><a href="#taræŒ‡ä»¤-æœ€å¸¸ç”¨" class="headerlink" title="taræŒ‡ä»¤[æœ€å¸¸ç”¨]"></a>taræŒ‡ä»¤[æœ€å¸¸ç”¨]</h2><h3 id="åŸºæœ¬ä»‹ç»-2"><a href="#åŸºæœ¬ä»‹ç»-2" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/00AD0AE81E9730D6EA78F90A04D91D49.png"></p><h3 id="åŸºæœ¬è¯­æ³•-2"><a href="#åŸºæœ¬è¯­æ³•-2" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><p>å‹ç¼©è¿˜æ˜¯è§£å‹ï¼Ÿé€šè¿‡<strong>é€‰é¡¹</strong>å¤„ç†ï¼</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">tar</span> <span class="token punctuation">[</span>é€‰é¡¹<span class="token punctuation">]</span> XXX.tar.gz æ‰“åŒ…çš„å†…å®¹              //åŠŸèƒ½æè¿°ï¼šæ‰“åŒ…ç›®å½•ï¼Œå‹ç¼©åæ ¼å¼.tar.gz<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><strong>é€‰é¡¹è¯´æ˜</strong>ï¼š<img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/3829F6F6F6491E73B0EA0CFCC7771CF4.png" alt="" style="zoom: 65%;" /></p></blockquote><h3 id="åº”ç”¨å®ä¾‹-1"><a href="#åº”ç”¨å®ä¾‹-1" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/6575EB5FCD117CFE7C41D25C368B5A3A.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809231338890.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/6BDCF1A6F4D5197B83627DC091AD2B0C.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809231502591.png" alt="" style="zoom:80%;" /><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809231528753.png" alt="" style="zoom:80%;" /><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/5C7FCEEEA153EF43DF5E933E8F0B5B53.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809231812270.png" alt="" style="zoom:80%;" /><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/78D084F1D08E3FE1F2E7DFBC13380F3B.png"></p><blockquote><p><strong><code>-C</code> åé¢ä»£è¡¨è§£å‹åè¦å­˜æ”¾çš„ä½ç½®</strong></p></blockquote><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809232124717.png" alt="" style="zoom:80%;" /><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809232145318.png" alt="" style="zoom:80%;" />]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>18.æœç´¢æŸ¥æ‰¾ç±»</title>
      <link href="/2024/02/16/18-%E6%90%9C%E7%B4%A2%E6%9F%A5%E6%89%BE%E7%B1%BB/"/>
      <url>/2024/02/16/18-%E6%90%9C%E7%B4%A2%E6%9F%A5%E6%89%BE%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<h1 id="æœç´¢æŸ¥æ‰¾ç±»"><a href="#æœç´¢æŸ¥æ‰¾ç±»" class="headerlink" title="æœç´¢æŸ¥æ‰¾ç±»"></a>æœç´¢æŸ¥æ‰¾ç±»</h1><h2 id="findæŒ‡ä»¤"><a href="#findæŒ‡ä»¤" class="headerlink" title="findæŒ‡ä»¤"></a>findæŒ‡ä»¤</h2><h3 id="åŸºæœ¬ä»‹ç»"><a href="#åŸºæœ¬ä»‹ç»" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/77E05E562997ABC261D4D859767BC055.png"></p><h3 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">find</span> <span class="token punctuation">[</span>æœç´¢èŒƒå›´<span class="token punctuation">]</span> <span class="token punctuation">[</span>é€‰é¡¹<span class="token punctuation">]</span> <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><strong>é€‰é¡¹è¯´æ˜ï¼š<img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/89308E08108BD82D9C28FE9FCB853179.png" alt="" style="zoom:67%;" /></strong></p></blockquote><h3 id="åº”ç”¨å®ä¾‹"><a href="#åº”ç”¨å®ä¾‹" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/FC7D779F892DEDE491B4B0276D043D72.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809203729224.png" alt="" style="zoom:80%;" /><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/56AAC01C77797BFA4BE171C6571C451B.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809203754895.png" alt="" style="zoom:80%;" /><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/5D1E767F9D74A70483ECD927B639880A.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809203941290.png" alt="" style="zoom:80%;" /><hr><h2 id="locateæŒ‡ä»¤"><a href="#locateæŒ‡ä»¤" class="headerlink" title="locateæŒ‡ä»¤"></a>locateæŒ‡ä»¤</h2><h3 id="åŸºæœ¬ä»‹ç»-1"><a href="#åŸºæœ¬ä»‹ç»-1" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/2D4DA6D9DA3AD87F245410E09B87A508.png"></p><h3 id="åŸºæœ¬è¯­æ³•-1"><a href="#åŸºæœ¬è¯­æ³•-1" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">locate</span> æœç´¢æ–‡ä»¶<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="ç‰¹åˆ«è¯´æ˜"><a href="#ç‰¹åˆ«è¯´æ˜" class="headerlink" title="ç‰¹åˆ«è¯´æ˜"></a>ç‰¹åˆ«è¯´æ˜</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/ED51517B6B96577F33ADA3A653FF1E7B.png"></p><h3 id="åº”ç”¨å®ä¾‹-1"><a href="#åº”ç”¨å®ä¾‹-1" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/D07A184817F40B3DE3450B9C44BFE2C0.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809204741792.png" alt="" style="zoom:80%;" /><h3 id="è¡¥å……æŒ‡ä»¤ï¼šwhich"><a href="#è¡¥å……æŒ‡ä»¤ï¼šwhich" class="headerlink" title="è¡¥å……æŒ‡ä»¤ï¼šwhich"></a>è¡¥å……æŒ‡ä»¤ï¼šwhich</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/0E9F0AAF988D08738CA9C0588433A68A.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809204936863.png" alt="" style="zoom:80%;" /><hr><h2 id="grepæŒ‡ä»¤ä¸ç®¡é“ç¬¦å·"><a href="#grepæŒ‡ä»¤ä¸ç®¡é“ç¬¦å·" class="headerlink" title="grepæŒ‡ä»¤ä¸ç®¡é“ç¬¦å·"></a>grepæŒ‡ä»¤ä¸ç®¡é“ç¬¦å·</h2><h3 id="åŸºæœ¬ä»‹ç»-2"><a href="#åŸºæœ¬ä»‹ç»-2" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/5BD96628FC2E829C6F856339098F4CD9.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/F84B0FD905AF51FD95B03F68BC8FD671.png" alt="" style="zoom:33%;" /><h3 id="åŸºæœ¬è¯­æ³•-2"><a href="#åŸºæœ¬è¯­æ³•-2" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-none"><code class="language-none">$ grep [é€‰é¡¹] æŸ¥æ‰¾å†…å®¹ æºæ–‡ä»¶<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š<img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/93A718A964C3CE67C840C3A8EA984D7B.png" alt="" style="zoom:67%;" /></p></blockquote><h3 id="åº”ç”¨å®ä¾‹-2"><a href="#åº”ç”¨å®ä¾‹-2" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/CCB351D055CEE05C0B1F0FC7A469BD67.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809212950788.png" alt="" style="zoom:80%;" />]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>17.æ—¶é—´æ—¥æœŸç±»</title>
      <link href="/2024/02/16/17-%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E7%B1%BB/"/>
      <url>/2024/02/16/17-%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<h1 id="æ—¶é—´æ—¥æœŸç±»"><a href="#æ—¶é—´æ—¥æœŸç±»" class="headerlink" title="æ—¶é—´æ—¥æœŸç±»"></a>æ—¶é—´æ—¥æœŸç±»</h1><h2 id="1-dateæŒ‡ä»¤"><a href="#1-dateæŒ‡ä»¤" class="headerlink" title="1.dateæŒ‡ä»¤"></a>1.dateæŒ‡ä»¤</h2><h3 id="1-0åŸºæœ¬ä»‹ç»"><a href="#1-0åŸºæœ¬ä»‹ç»" class="headerlink" title="1.0åŸºæœ¬ä»‹ç»"></a>1.0åŸºæœ¬ä»‹ç»</h3><p><strong>æ˜¾ç¤º&#x2F;è®¾ç½® æ—¶é—´æ—¥æœŸ</strong></p><h3 id="1-1åŸºæœ¬è¯­æ³•"><a href="#1-1åŸºæœ¬è¯­æ³•" class="headerlink" title="1.1åŸºæœ¬è¯­æ³•"></a>1.1åŸºæœ¬è¯­æ³•</h3><p><strong>æ˜¾ç¤ºå½“å‰æ—¶é—´</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">date</span>                                                      //åŠŸèƒ½æè¿°ï¼šæ˜¾ç¤ºå½“å‰æ—¶é—´<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>æ˜¾ç¤ºå½“å‰å¹´ä»½</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">date</span> +%Y                                                  //åŠŸèƒ½æè¿°ï¼šæ˜¾ç¤ºå½“å‰å¹´ä»½<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>æ˜¾ç¤ºå½“å‰æœˆä»½</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">date</span> +%m                                                  //åŠŸèƒ½æè¿°ï¼šæ˜¾ç¤ºå½“å‰æœˆä»½<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>æ˜¾ç¤ºå½“å‰æ˜¯å“ªå¤©</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">date</span> +%d                                              //åŠŸèƒ½æè¿°ï¼šæ˜¾ç¤ºå½“å‰æ˜¯é‚£ä¸€å¤©<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>æ˜¾ç¤ºå¹´æœˆæ—¥æ—¶åˆ†ç§’</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">date</span> <span class="token string">"+%Y-%m-%d %H:%M:%S"</span>                             //åŠŸèƒ½æè¿°ï¼šæ˜¾ç¤ºå¹´æœˆæ—¥æ—¶åˆ†ç§’<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>è®¾ç½®æ—¥æœŸ</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">date</span> <span class="token parameter variable">-s</span> <span class="token string">"å­—ç¬¦ä¸²æ—¶é—´"</span>                                           //åŠŸèƒ½æè¿°ï¼šè®¾ç½®æ—¥æœŸ<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><strong>æ”¹å›æ¥ï¼šhwclock -s</strong></p></blockquote><h3 id="1-2åº”ç”¨å®ä¾‹"><a href="#1-2åº”ç”¨å®ä¾‹" class="headerlink" title="1.2åº”ç”¨å®ä¾‹"></a>1.2åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/8ABF75B3728F8E15A7A48380F4CBAA16.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809194535631.png" alt="" style="zoom:80%;" /><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/6A6C769E3C834DA359762B9339039691.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809194555687.png" alt="" style="zoom:80%;" /><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/C6B54D889AE2962F7C47FE3A6950049A.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809194612029.png" alt="" style="zoom:80%;" /><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/7B502BA4F722643C6C191B98FBF697AC.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809195358342.png" alt="" style="zoom:80%;" /><hr><h2 id="2-calæŒ‡ä»¤"><a href="#2-calæŒ‡ä»¤" class="headerlink" title="2.calæŒ‡ä»¤"></a>2.calæŒ‡ä»¤</h2><h3 id="2-0åŸºæœ¬ä»‹ç»"><a href="#2-0åŸºæœ¬ä»‹ç»" class="headerlink" title="2.0åŸºæœ¬ä»‹ç»"></a>2.0åŸºæœ¬ä»‹ç»</h3><p><strong>æŸ¥çœ‹æ—¥å†æŒ‡ä»¤</strong></p><h3 id="2-1åŸºæœ¬è¯­æ³•"><a href="#2-1åŸºæœ¬è¯­æ³•" class="headerlink" title="2.1åŸºæœ¬è¯­æ³•"></a>2.1åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">cal</span> <span class="token punctuation">[</span>é€‰é¡¹<span class="token punctuation">]</span>                                        //åŠŸèƒ½æè¿°ï¼šä¸åŠ é€‰é¡¹ï¼Œæ˜¾ç¤ºæœ¬æœˆæ—¥å†<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="2-2åº”ç”¨å®ä¾‹"><a href="#2-2åº”ç”¨å®ä¾‹" class="headerlink" title="2.2åº”ç”¨å®ä¾‹"></a>2.2åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/72092FC33B3DB20EFF86EA61799FECE1.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809195920702.png" alt="" style="zoom:80%;" /><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/2B727A72DB4806E0A7554F6572938296.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809200037461.png" alt="" style="zoom:67%;" />]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>16.æ–‡ä»¶ç›®å½•ç±»</title>
      <link href="/2024/02/16/16-%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%E7%B1%BB/"/>
      <url>/2024/02/16/16-%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<h1 id="æ–‡ä»¶ç›®å½•ç±»-å¸¸ç”¨"><a href="#æ–‡ä»¶ç›®å½•ç±»-å¸¸ç”¨" class="headerlink" title="æ–‡ä»¶ç›®å½•ç±»[å¸¸ç”¨]"></a>æ–‡ä»¶ç›®å½•ç±»[å¸¸ç”¨]</h1><h2 id="pwdæŒ‡ä»¤"><a href="#pwdæŒ‡ä»¤" class="headerlink" title="pwdæŒ‡ä»¤"></a>pwdæŒ‡ä»¤</h2><h3 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token builtin class-name">pwd</span>                                           //åŠŸèƒ½æè¿°ï¼šæ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•çš„ç»å¯¹è·¯å¾„<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><strong>ç»å¯¹è·¯å¾„ï¼šä»<code>æ ¹ç›®å½•</code>å¼€å§‹å®šä½</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/5BFEEA3D5941A8DB05D2BF56925D42D6.png" alt="" style="zoom: 30%;" /></blockquote><h3 id="åº”ç”¨å®ä¾‹"><a href="#åº”ç”¨å®ä¾‹" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/06AB2E3B982F1220AA07AD12ACABF477.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220808215443937.png" alt="" style="zoom:80%;" /><hr><h2 id="lsæŒ‡ä»¤"><a href="#lsæŒ‡ä»¤" class="headerlink" title="lsæŒ‡ä»¤"></a>lsæŒ‡ä»¤</h2><h3 id="åŸºæœ¬è¯­æ³•-1"><a href="#åŸºæœ¬è¯­æ³•-1" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">ls</span> <span class="token punctuation">[</span>é€‰é¡¹<span class="token punctuation">]</span> <span class="token punctuation">[</span>ç›®å½•/æ–‡ä»¶<span class="token punctuation">]</span>-a:æ˜¾ç¤ºå½“å‰ç›®å½•æ‰€æœ‰çš„æ–‡ä»¶å’Œç›®å½•ï¼ŒåŒ…å«éšè—çš„-l:ä»¥åˆ—è¡¨çš„æ–¹å¼é€è¡Œæ˜¾ç¤ºä¿¡æ¯<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="åº”ç”¨å®ä¾‹-1"><a href="#åº”ç”¨å®ä¾‹-1" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/290A10A6F2C14905C5052275034B013B.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220808215838834.png" alt="" style="zoom:80%;" /><hr><h2 id="cdæŒ‡ä»¤"><a href="#cdæŒ‡ä»¤" class="headerlink" title="cdæŒ‡ä»¤"></a>cdæŒ‡ä»¤</h2><h3 id="åŸºæœ¬è¯­æ³•-2"><a href="#åŸºæœ¬è¯­æ³•-2" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token builtin class-name">cd</span> <span class="token punctuation">[</span>å‚æ•°<span class="token punctuation">]</span>                                                //åŠŸèƒ½æè¿°ï¼šåˆ‡æ¢åˆ°æŒ‡å®šç›®å½•<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/1C6640B77A1B355CF3D91CC031E669A6.png"></p></blockquote><h3 id="åº”ç”¨å®ä¾‹-2"><a href="#åº”ç”¨å®ä¾‹-2" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/DDEB9FA6E319E0BB61FB6D353A20C984.png"></p><hr><h2 id="mkdiræŒ‡ä»¤"><a href="#mkdiræŒ‡ä»¤" class="headerlink" title="mkdiræŒ‡ä»¤"></a>mkdiræŒ‡ä»¤</h2><h3 id="åŸºæœ¬è¯­æ³•-3"><a href="#åŸºæœ¬è¯­æ³•-3" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">mkdir</span> <span class="token punctuation">[</span>é€‰é¡¹<span class="token punctuation">]</span> è¦åˆ›å»ºçš„ç›®å½•                                   //åŠŸèƒ½æè¿°ï¼šç”¨äºåˆ›å»ºç›®å½•<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><strong>å¸¸ç”¨é€‰é¡¹:</strong><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/36234DAE996873593851C4DFA8F8FC51.png" alt="" style="zoom:67%;" /></p></blockquote><h3 id="4-2åº”ç”¨å®ä¾‹"><a href="#4-2åº”ç”¨å®ä¾‹" class="headerlink" title="4.2åº”ç”¨å®ä¾‹"></a>4.2åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/AC9BFA47A2B382B3F5116DE7A4047017.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220808222758130.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/94FD9B7904FFB0FD858CD51F0C74515E.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220808223004858.png" alt="" style="zoom:80%;" /><hr><h2 id="rmdiræŒ‡ä»¤"><a href="#rmdiræŒ‡ä»¤" class="headerlink" title="rmdiræŒ‡ä»¤"></a>rmdiræŒ‡ä»¤</h2><h3 id="åŸºæœ¬è¯­æ³•-4"><a href="#åŸºæœ¬è¯­æ³•-4" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">rmdir</span> <span class="token punctuation">[</span>é€‰é¡¹<span class="token punctuation">]</span> è¦åˆ é™¤çš„ç©ºç›®å½•                                   //åŠŸèƒ½æè¿°ï¼šåˆ é™¤ç©ºç›®å½•<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="åº”ç”¨å®ä¾‹-3"><a href="#åº”ç”¨å®ä¾‹-3" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/0C79D717F2808E80E4C5EE319BDC9549.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220808224254517.png" alt="" style="zoom:80%;" /><h3 id="5-3ä½¿ç”¨ç»†èŠ‚"><a href="#5-3ä½¿ç”¨ç»†èŠ‚" class="headerlink" title="5.3ä½¿ç”¨ç»†èŠ‚"></a>5.3ä½¿ç”¨ç»†èŠ‚</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/EEFB371B20FC8CE074436D8BBD3CAE61.png"></p><blockquote><p>åˆ é™¤éç©ºç›®å½•ï¼š</p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220808224907559.png" alt="" style="zoom:80%;" /></blockquote><hr><h2 id="touchæŒ‡ä»¤"><a href="#touchæŒ‡ä»¤" class="headerlink" title="touchæŒ‡ä»¤"></a>touchæŒ‡ä»¤</h2><h3 id="åŸºæœ¬è¯­æ³•-5"><a href="#åŸºæœ¬è¯­æ³•-5" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">touch</span> æ–‡ä»¶åç§°                                               //åŠŸèƒ½æè¿°ï¼šåˆ›å»ºç©ºæ–‡ä»¶<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="åº”ç”¨å®ä¾‹-4"><a href="#åº”ç”¨å®ä¾‹-4" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/B7BAEE2D84551F87C1F8C188B1AAAEDF.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220808225333077.png" alt="" style="zoom:80%;" /><hr><h2 id="cpæŒ‡ä»¤"><a href="#cpæŒ‡ä»¤" class="headerlink" title="cpæŒ‡ä»¤"></a>cpæŒ‡ä»¤</h2><h3 id="åŸºæœ¬è¯­æ³•-6"><a href="#åŸºæœ¬è¯­æ³•-6" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">cp</span> <span class="token punctuation">[</span>é€‰é¡¹<span class="token punctuation">]</span> <span class="token builtin class-name">source</span> dest                                //åŠŸèƒ½æè¿°ï¼šæ‹·è´æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š<img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/69AEEA6A68975415E01FE67B8F2EEB27.png" alt="" style="zoom: 50%;" /></p></blockquote><h3 id="åº”ç”¨å®ä¾‹-5"><a href="#åº”ç”¨å®ä¾‹-5" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/A23F6DBCFA00A0ECBADD2773B6965781.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809095204102.png" alt="" style="zoom:80%;" /><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/544BDFFB9126FD723FAD6437396869D4.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809095653318.png" alt="" style="zoom:80%;" /><h3 id="ä½¿ç”¨ç»†èŠ‚"><a href="#ä½¿ç”¨ç»†èŠ‚" class="headerlink" title="ä½¿ç”¨ç»†èŠ‚"></a>ä½¿ç”¨ç»†èŠ‚</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/8257277E544CADD064E6B642A2E786EA.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809100401502.png" alt="" style="zoom:80%;" /><hr><h2 id="rmæŒ‡ä»¤"><a href="#rmæŒ‡ä»¤" class="headerlink" title="rmæŒ‡ä»¤"></a>rmæŒ‡ä»¤</h2><h3 id="åŸºæœ¬è¯­æ³•-7"><a href="#åŸºæœ¬è¯­æ³•-7" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">rm</span> <span class="token punctuation">[</span>é€‰é¡¹<span class="token punctuation">]</span> è¦åˆ é™¤çš„æ–‡ä»¶æˆ–ç›®å½•                            //åŠŸèƒ½æè¿°ï¼šæ‹·è´æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š<img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/9631072DC60DDD2F64AF92F26EAA8720.png" alt="" style="zoom: 50%;" /></p></blockquote><h3 id="8-2åº”ç”¨å®ä¾‹"><a href="#8-2åº”ç”¨å®ä¾‹" class="headerlink" title="8.2åº”ç”¨å®ä¾‹"></a>8.2åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/219740ECE7CC1D81673F4453F22B67F7.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809101752020.png" alt="" style="zoom:80%;" /><h3 id="8-3ä½¿ç”¨ç»†èŠ‚"><a href="#8-3ä½¿ç”¨ç»†èŠ‚" class="headerlink" title="8.3ä½¿ç”¨ç»†èŠ‚"></a>8.3ä½¿ç”¨ç»†èŠ‚</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/45E05A5A6AC0222BB91CC7C3EBF19CAE.png"></p><hr><h2 id="mvæŒ‡ä»¤"><a href="#mvæŒ‡ä»¤" class="headerlink" title="mvæŒ‡ä»¤"></a>mvæŒ‡ä»¤</h2><h3 id="åŸºæœ¬è¯­æ³•-8"><a href="#åŸºæœ¬è¯­æ³•-8" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">mv</span> oldNmaeFile newNameFile<span class="token punctuation">(</span>ä¸¤ä¸ªæ–‡ä»¶åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹<span class="token punctuation">)</span>             //åŠŸèƒ½æè¿°ï¼šæ–‡ä»¶é‡å‘½å<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">mv</span> /temp/movefile /targetFolder<span class="token punctuation">(</span>ä¸¤ä¸ªæ–‡ä»¶ä¸åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹<span class="token punctuation">)</span>        //åŠŸèƒ½æè¿°ï¼šç§»åŠ¨æ–‡ä»¶<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="åº”ç”¨å®ä¾‹-6"><a href="#åº”ç”¨å®ä¾‹-6" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/2AF41756999C7EBF56D09AA298198A0B.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809103529491.png" alt="" style="zoom:80%;" /><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/87105DAD59CD0DDA11AC0A1E071D27F2.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809104034678.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/59FA862DF9138E21E9D36F48BD045BF2.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809104641715.png" alt="" style="zoom:80%;" /><hr><h2 id="catæŒ‡ä»¤"><a href="#catæŒ‡ä»¤" class="headerlink" title="catæŒ‡ä»¤"></a>catæŒ‡ä»¤</h2><h3 id="åŸºæœ¬è¯­æ³•-9"><a href="#åŸºæœ¬è¯­æ³•-9" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">cat</span> <span class="token punctuation">[</span>é€‰é¡¹<span class="token punctuation">]</span> è¦æŸ¥çœ‹çš„æ–‡ä»¶                                     //åŠŸèƒ½æè¿°ï¼šæŸ¥çœ‹æ–‡ä»¶å†…å®¹<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š<img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/59FBE286B7C30585DE17009B13AE2102.png" alt="" style="zoom: 55%;" /></p></blockquote><p>æ³¨æ„ï¼šcatæŒ‡ä»¤æ¯”vimæŒ‡ä»¤æŸ¥çœ‹æ–‡ä»¶<strong>æ›´å®‰å…¨</strong></p><h3 id="åº”ç”¨å®ä¾‹-7"><a href="#åº”ç”¨å®ä¾‹-7" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/80C7678A8ADED443BF0055B5FADEFF8E.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809105425110.png" alt="" style="zoom:80%;" /><h3 id="ä½¿ç”¨ç»†èŠ‚-1"><a href="#ä½¿ç”¨ç»†èŠ‚-1" class="headerlink" title="ä½¿ç”¨ç»†èŠ‚"></a>ä½¿ç”¨ç»†èŠ‚</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/0325A14873CE307A4CFDCFB8D188E8A0.png"></p><hr><h2 id="moreæŒ‡ä»¤"><a href="#moreæŒ‡ä»¤" class="headerlink" title="moreæŒ‡ä»¤"></a>moreæŒ‡ä»¤</h2><h3 id="åŸºæœ¬ä»‹ç»"><a href="#åŸºæœ¬ä»‹ç»" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/1E8397467466EE3607D365F06D04606D.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/A955AECD9819E251DA90E4068D56DA3D.png" alt="" style="zoom:50%;" /><h3 id="åŸºæœ¬è¯­æ³•-10"><a href="#åŸºæœ¬è¯­æ³•-10" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">more</span> è¦æŸ¥çœ‹çš„æ–‡ä»¶ <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="åº”ç”¨å®ä¾‹-8"><a href="#åº”ç”¨å®ä¾‹-8" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/C5125A17BAFFCFCB96339E062133575D.png" alt="" style="zoom:67%;" /><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809110553303.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809110457994.png" alt="" style="zoom:80%;" /><hr><h2 id="lessæŒ‡ä»¤"><a href="#lessæŒ‡ä»¤" class="headerlink" title="lessæŒ‡ä»¤"></a>lessæŒ‡ä»¤</h2><h3 id="åŸºæœ¬ä»‹ç»-1"><a href="#åŸºæœ¬ä»‹ç»-1" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/5B5E09B2CBEC251FA45CCABEAB8DBAAA.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/0CBE4BB02F3EDEE51B10187A53E3DD1F.png" alt="" style="zoom:50%;" /><h3 id="åŸºæœ¬è¯­æ³•-11"><a href="#åŸºæœ¬è¯­æ³•-11" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">less</span> è¦æŸ¥çœ‹çš„æ–‡ä»¶<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="åº”ç”¨å®ä¾‹-9"><a href="#åº”ç”¨å®ä¾‹-9" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/35600645C57975A2B293E78FBB969481.png" alt="" style="zoom:67%;" /><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809160652448.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809161137027.png"></p><hr><h2 id="echoæŒ‡ä»¤"><a href="#echoæŒ‡ä»¤" class="headerlink" title="echoæŒ‡ä»¤"></a>echoæŒ‡ä»¤</h2><h3 id="åŸºæœ¬è¯­æ³•-12"><a href="#åŸºæœ¬è¯­æ³•-12" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token builtin class-name">echo</span> <span class="token punctuation">[</span>é€‰é¡¹<span class="token punctuation">]</span> <span class="token punctuation">[</span>è¾“å‡ºå†…å®¹<span class="token punctuation">]</span>                                      //åŠŸèƒ½æè¿°ï¼šæŸ¥çœ‹æ–‡ä»¶å†…å®¹<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="åº”ç”¨å®ä¾‹-10"><a href="#åº”ç”¨å®ä¾‹-10" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/35628673C35DE637CD9BC5E290F425BA.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809161635980.png" alt="" style="zoom:80%;" /><hr><h2 id="headæŒ‡ä»¤"><a href="#headæŒ‡ä»¤" class="headerlink" title="headæŒ‡ä»¤"></a>headæŒ‡ä»¤</h2><h3 id="åŸºæœ¬ä»‹ç»-2"><a href="#åŸºæœ¬ä»‹ç»-2" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/C46DE5EB667D513C2BE1B546E7D54219.png"></p><h3 id="åŸºæœ¬è¯­æ³•-13"><a href="#åŸºæœ¬è¯­æ³•-13" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><p><strong>é»˜è®¤æƒ…å†µ</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">head</span> æ–‡ä»¶                                            //åŠŸèƒ½æè¿°ï¼šæŸ¥çœ‹æ–‡ä»¶å‰10è¡Œå†…å®¹<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>æŒ‡å®šæƒ…å†µ</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">head</span> <span class="token parameter variable">-n</span> num æ–‡ä»¶                           //åŠŸèƒ½æè¿°ï¼šæŸ¥çœ‹æ–‡ä»¶å‰numè¡Œå†…å®¹,numè‡ªå®šä¹‰<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="åº”ç”¨å®ä¾‹-11"><a href="#åº”ç”¨å®ä¾‹-11" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/0D147FBE46745962A5925441B9871505.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809162351878.png" alt="" style="zoom: 67%;" /><hr><h2 id="tailæŒ‡ä»¤"><a href="#tailæŒ‡ä»¤" class="headerlink" title="tailæŒ‡ä»¤"></a>tailæŒ‡ä»¤</h2><h3 id="åŸºæœ¬ä»‹ç»-3"><a href="#åŸºæœ¬ä»‹ç»-3" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/AED45DD37A623585D1572E3167C468AA.png"></p><h3 id="åŸºæœ¬è¯­æ³•-14"><a href="#åŸºæœ¬è¯­æ³•-14" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><p><strong>é»˜è®¤æƒ…å†µ</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">tail</span> æ–‡ä»¶                                            //åŠŸèƒ½æè¿°ï¼šæŸ¥çœ‹æ–‡ä»¶å°¾10è¡Œå†…å®¹<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>æŒ‡å®šæƒ…å†µ</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">tail</span> <span class="token parameter variable">-n</span> num æ–‡ä»¶                           //åŠŸèƒ½æè¿°ï¼šæŸ¥çœ‹æ–‡ä»¶å°¾numè¡Œå†…å®¹,numè‡ªå®šä¹‰<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>ç‰¹åˆ«æŒ‡ä»¤</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">tail</span> <span class="token parameter variable">-f</span> æ–‡ä»¶                                    //åŠŸèƒ½æè¿°ï¼šå®æ—¶è¿½è¸ªè¯¥æ–‡æ¡£çš„æ‰€æœ‰æ›´æ–°<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><strong>Ctrl + c é€€å‡ºå®æ—¶ç›‘æ§</strong></p></blockquote><h3 id="åº”ç”¨å®ä¾‹-12"><a href="#åº”ç”¨å®ä¾‹-12" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/5E7F0B87D825A69DE67480185F1D6F1A.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809163224422.png" alt="" style="zoom:80%;" /><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/3222C9B563BE3F12FA823E0263E819E8.png"></p><blockquote><p><strong>&#x3D;&#x3D;ç”¨å¤„&#x3D;&#x3D;ï¼šç›‘æ§æ–‡ä»¶&#x2F;ç½‘ç»œç­‰â€¦</strong></p></blockquote><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809164020747.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809164117348.png"></p><hr><h2 id="æŒ‡ä»¤ä¸-æŒ‡ä»¤"><a href="#æŒ‡ä»¤ä¸-æŒ‡ä»¤" class="headerlink" title="&gt;æŒ‡ä»¤ä¸&gt;&gt;æŒ‡ä»¤"></a>&gt;æŒ‡ä»¤ä¸&gt;&gt;æŒ‡ä»¤</h2><h3 id="åŸºæœ¬ä»‹ç»-4"><a href="#åŸºæœ¬ä»‹ç»-4" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><blockquote><p><strong><code>&gt;</code>ï¼šè¦†ç›–</strong></p><p><strong><code>&gt;&gt;</code>ï¼šè¿½åŠ </strong></p></blockquote><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/771905E40006674D892B6E0950698097.png"></p><h3 id="åŸºæœ¬è¯­æ³•-15"><a href="#åŸºæœ¬è¯­æ³•-15" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><p><strong>è¦†ç›–å†™å…¥</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">ls</span> <span class="token parameter variable">-l</span> <span class="token operator">></span> æ–‡ä»¶                            //åŠŸèƒ½æè¿°ï¼šåˆ—è¡¨çš„å†…å®¹å†™å…¥æ–‡ä»¶a.txtä¸­<span class="token punctuation">(</span>è¦†ç›–å†™<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>è¿½åŠ å†™å…¥</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">ls</span> <span class="token parameter variable">-l</span> <span class="token operator">>></span> æ–‡ä»¶                              //åŠŸèƒ½æè¿°ï¼šåˆ—è¡¨çš„å†…å®¹è¿½åŠ åˆ°æ–‡ä»¶a.txtæœ«å°¾<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>æ–‡ä»¶å†…å®¹è¦†ç›–</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">cat</span> æ–‡ä»¶1 <span class="token operator">></span> æ–‡ä»¶2                                //åŠŸèƒ½æè¿°ï¼šå°†æ–‡ä»¶1çš„å†…å®¹è¦†ç›–åˆ°æ–‡ä»¶2<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>æ–‡ä»¶å†™å…¥</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token builtin class-name">echo</span> <span class="token string">"å†…å®¹"</span> <span class="token operator">></span> æ–‡ä»¶                        //åŠŸèƒ½æè¿°ï¼šå°†è¾“å‡ºçš„å†…å®¹å†™å…¥æ–‡ä»¶æœ«å°¾<span class="token punctuation">(</span>è¦†ç›–å†™<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ³¨æ„ï¼šä»¥ä¸Šå†™å…¥æ–‡ä»¶å¯¹è±¡ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨åˆ›å»º</p><h3 id="åº”ç”¨å®ä¾‹-13"><a href="#åº”ç”¨å®ä¾‹-13" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/57BAA03371EF4F03712C605AB7A77C7E.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809171050174.png" alt="" style="zoom: 67%;" /><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/BC12BA7AB549C2B7D9E9DC94EA7DC6D2.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809171430005.png" alt="" style="zoom: 67%;" /><hr><h2 id="lnæŒ‡ä»¤"><a href="#lnæŒ‡ä»¤" class="headerlink" title="lnæŒ‡ä»¤"></a>lnæŒ‡ä»¤</h2><h3 id="åŸºæœ¬ä»‹ç»-5"><a href="#åŸºæœ¬ä»‹ç»-5" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/67705F66BD1CC7097D016577A899277B.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/09953E345B25D0B16F09ED4A875AD51D.png" alt="" style="zoom: 25%;" /><h3 id="åŸºæœ¬è¯­æ³•-16"><a href="#åŸºæœ¬è¯­æ³•-16" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><p><strong>åˆ›å»ºè½¯é“¾æ¥</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">ln</span> <span class="token parameter variable">-s</span> <span class="token punctuation">[</span>åŸæ–‡ä»¶æˆ–ç›®å½•<span class="token punctuation">]</span> <span class="token punctuation">[</span>è½¯é“¾æ¥å<span class="token punctuation">]</span>                      //åŠŸèƒ½æè¿°ï¼šç»™åŸæ–‡ä»¶åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>åˆ é™¤è½¯é“¾æ¥</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">rm</span> <span class="token punctuation">[</span>é€‰é¡¹<span class="token punctuation">]</span> è¦åˆ é™¤çš„æ–‡ä»¶æˆ–ç›®å½•                  //æ³¨æ„ï¼šæœ«å°¾å¸¦<span class="token string">'/'</span>è¡¨ç¤ºç›®å½•ï¼›ä¸å¸¦<span class="token string">'/'</span>è¡¨ç¤ºæ–‡ä»¶<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="åº”ç”¨å®ä¾‹-14"><a href="#åº”ç”¨å®ä¾‹-14" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/E80DA331A3A9DACE7981E5F45CD45740.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809173607418.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/DC3E94F054E4D682982D910C143D1212.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809174251638.png" alt="" style="zoom:80%;" /><h3 id="ç»†èŠ‚è¯´æ˜"><a href="#ç»†èŠ‚è¯´æ˜" class="headerlink" title="ç»†èŠ‚è¯´æ˜"></a>ç»†èŠ‚è¯´æ˜</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/039984280F207E01E0BAC2E92B6DB00C.png"></p><hr><h2 id="historyæŒ‡ä»¤"><a href="#historyæŒ‡ä»¤" class="headerlink" title="historyæŒ‡ä»¤"></a>historyæŒ‡ä»¤</h2><h3 id="åŸºæœ¬ä»‹ç»-6"><a href="#åŸºæœ¬ä»‹ç»-6" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/9B8B9CFF97A87A183175FD04E840C8D5.png"></p><h3 id="åŸºæœ¬è¯­æ³•-17"><a href="#åŸºæœ¬è¯­æ³•-17" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">history</span>                                          //åŠŸèƒ½æè¿°ï¼šæŸ¥çœ‹å·²æ‰§è¡Œè¿‡çš„å†å²æŒ‡ä»¤<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="åº”ç”¨å®ä¾‹-15"><a href="#åº”ç”¨å®ä¾‹-15" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/020D75CF2547651F0D4E421F7181A904.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809175319279.png" alt="" style="zoom:80%;" /><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/81C584A7834914093909EDC86068BF1A.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809175350555.png" alt="" style="zoom:80%;" /><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/C100CBC9FDB2B891D062661FC52E3DCB.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220809175432914.png" alt="" style="zoom:80%;" />]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>15.å¸®åŠ©æŒ‡ä»¤</title>
      <link href="/2024/02/16/15-%E5%B8%AE%E5%8A%A9%E6%8C%87%E4%BB%A4/"/>
      <url>/2024/02/16/15-%E5%B8%AE%E5%8A%A9%E6%8C%87%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h1 id="å¸®åŠ©æŒ‡ä»¤"><a href="#å¸®åŠ©æŒ‡ä»¤" class="headerlink" title="å¸®åŠ©æŒ‡ä»¤"></a>å¸®åŠ©æŒ‡ä»¤</h1><h2 id="man-è·å¾—å¸®åŠ©ä¿¡æ¯"><a href="#man-è·å¾—å¸®åŠ©ä¿¡æ¯" class="headerlink" title="man è·å¾—å¸®åŠ©ä¿¡æ¯"></a>man è·å¾—å¸®åŠ©ä¿¡æ¯</h2><h3 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">man</span> <span class="token punctuation">[</span>å‘½ä»¤æˆ–é…ç½®æ–‡ä»¶<span class="token punctuation">]</span>                                   //åŠŸèƒ½æè¿°ï¼šè·å¾—æŒ‡ä»¤çš„å…·ä½“ç”¨æ³•<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="åº”ç”¨å®ä¾‹"><a href="#åº”ç”¨å®ä¾‹" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/2CB488C962EA1E8B9BC5C25F8CBC00A5.png" alt="img"></p><p>æŸ¥çœ‹ <strong>lså‘½ä»¤çš„ å¸®åŠ©ä¿¡æ¯</strong>         ğŸ‘‰ğŸ‘‰ğŸ‘‰<img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220808204321570.png" alt="" style="zoom:80%;" /></p><p><strong>ä¿¡æ¯1</strong></p><blockquote><p>linuxä¸­ï¼Œ<strong>éšè—æ–‡ä»¶</strong>ä»¥â€™ <code>.</code> â€˜å¼€å¤´<img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/15550A3AB97558C3537E81E37E65A477.png" alt="" style="zoom: 67%;" /></p><p><strong>æŒ‡ä»¤ï¼š<code>ls -a</code></strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220808205136279.png" alt="" style="zoom:80%;" /></blockquote><p><strong>ä¿¡æ¯2</strong></p><blockquote><p><strong>æŒ‡ä»¤ï¼š<code>ls -l</code></strong> <img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220808205945006.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220808210122531.png" alt="" style="zoom:80%;" /></blockquote><p><strong>ä¿¡æ¯3 [ä¿¡æ¯1 ä¸ ä¿¡æ¯2çš„æŒ‡ä»¤æ··åˆä½¿ç”¨]</strong></p><blockquote><p><strong>æŒ‡ä»¤ï¼š<code>ls -la (/æ–‡ä»¶ç›®å½•) / ls -al (/æ–‡ä»¶ç›®å½•)</code></strong> <strong>å•åˆ—è¾“å‡ºï¼Œå¹¶åŒ…å«éšè—æ–‡ä»¶</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220808211320199.png" alt="" style="zoom:80%;" /></blockquote><hr><h2 id="help-æŒ‡ä»¤"><a href="#help-æŒ‡ä»¤" class="headerlink" title="help æŒ‡ä»¤"></a>help æŒ‡ä»¤</h2><h3 id="åŸºæœ¬è¯­æ³•-1"><a href="#åŸºæœ¬è¯­æ³•-1" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token builtin class-name">help</span> å‘½ä»¤                                    //åŠŸèƒ½æè¿°ï¼šè·å¾—shellå†…ç½®å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="åº”ç”¨å®ä¾‹-1"><a href="#åº”ç”¨å®ä¾‹-1" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/F230BB3F0485C869E783792D09725B03.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220808212002581.png" alt="" style="zoom: 67%;" />]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>14.æ‰¾å›rootå¯†ç </title>
      <link href="/2024/02/16/14-%E6%89%BE%E5%9B%9Eroot%E5%AF%86%E7%A0%81/"/>
      <url>/2024/02/16/14-%E6%89%BE%E5%9B%9Eroot%E5%AF%86%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<h1 id="æ‰¾å›rootå¯†ç "><a href="#æ‰¾å›rootå¯†ç " class="headerlink" title="æ‰¾å›rootå¯†ç "></a>æ‰¾å›rootå¯†ç </h1><h2 id="é¢è¯•é¢˜"><a href="#é¢è¯•é¢˜" class="headerlink" title="é¢è¯•é¢˜"></a>é¢è¯•é¢˜</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/ABBFAB012CBF2DF13C2FECB57D8F4914.png"></p><hr><h2 id="ç­”æ¡ˆ"><a href="#ç­”æ¡ˆ" class="headerlink" title="ç­”æ¡ˆ"></a>ç­”æ¡ˆ</h2><h3 id="step1"><a href="#step1" class="headerlink" title="step1"></a>step1</h3><p><strong>å¼€æœºæ—¶ï¼Œ é€‰é¡¹ç•Œé¢ press â€œeâ€ [æ³¨æ„åªæœ‰5ç§’]</strong></p><h3 id="step2"><a href="#step2" class="headerlink" title="step2"></a>step2</h3><p><strong>æ‰¾åˆ° <code>linux16å¼€å¤´</code>æ®µè½ï¼Œç§»åŠ¨ä¸‹æ ‡åˆ°  <code>\zh_CN.UTF8</code>åé¢ã€‚ç©ºä¸€æ ¼ã€‚</strong></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/456D8EC021F0AA33D277488F528422D0.png"></p><p><strong>è¾“å…¥ï¼š<code>init=/bin/shã€‚</code>å›è½¦ã€‚</strong></p><h3 id="step3"><a href="#step3" class="headerlink" title="step3"></a>step3</h3><p>è¾“å…¥å®Œæˆåï¼Œç›´æ¥æŒ‰<code>å¿«æ·é”®ï¼šCtrl + x</code> ï¼Œ<strong>è¿›å…¥å•ç”¨æˆ·æ¨¡å¼</strong>ã€‚</p><h3 id="step4"><a href="#step4" class="headerlink" title="step4"></a>step4</h3><p>æ¥ç€ï¼Œåœ¨å…‰æ ‡é—ªçƒä½ç½®ä¸­<strong>è¾“å…¥ï¼š<code>mount -o remount,rw /</code></strong> [æ³¨æ„ç©ºæ ¼ï¼]ï¼Œå›è½¦</p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/F1DB67A6475EA8AAFF183E77ED7D8251.png"></p><h3 id="step5"><a href="#step5" class="headerlink" title="step5"></a>step5</h3><p>åœ¨æœ€æ–°çš„ä¸€è¡Œï¼Œ**<code>è¾“å…¥ï¼špasswd</code><strong>ï¼Œå®Œæˆåå›è½¦ã€‚</strong>è¾“å…¥å¯†ç ï¼Œç„¶åå†æ¬¡ç¡®è®¤å¯†ç (æœ€å¥½8ä½ä»¥ä¸Š)**</p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/E2F53817149E7FB14E2DA2E97F9ABDF7.png"></p><p>å¯†ç ä¿®æ”¹æˆåŠŸåï¼Œä¼šæ˜¾ç¤º passwdâ€¦çš„æ ·å¼ï¼Œè¯´æ˜å¯†ç ä¿®æ”¹æˆåŠŸã€‚</p><h3 id="step6"><a href="#step6" class="headerlink" title="step6"></a>step6</h3><p>æ¥ç€ï¼Œåœ¨é¼ æ ‡é—ªçƒä½ç½®ï¼Œ**<code>è¾“å…¥ï¼štouch /.autorelabel</code>**(æ³¨æ„ï¼štouch ä¸ &#x2F; ä¹‹é—´æœ‰ç©ºæ ¼)ï¼ŒæŒ‰å›è½¦é”®ã€‚</p><h3 id="step7"><a href="#step7" class="headerlink" title="step7"></a>step7</h3><p><strong><code>è¾“å…¥ï¼šexec /sbin/init</code></strong>(æ³¨æ„ï¼šexec ä¸ &#x2F; ä¹‹é—´æœ‰ç©ºæ ¼)ï¼ŒæŒ‰å›è½¦é”®,ç­‰å¾…ç³»ç»Ÿè‡ªåŠ¨ä¿®æ”¹å¯†ç (æ—¶é—´å¯èƒ½æœ‰ç‚¹é•¿ï¼Œè€å¿ƒç­‰å¾…)ï¼Œå®Œæˆåï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨é‡å¯ï¼Œ<strong>æ–°çš„å¯†ç ç”Ÿæ•ˆ</strong></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/EF9168DE6FD9F7A732D84B298DA02286.png"></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>13.æŒ‡å®šè¿è¡Œçº§åˆ«</title>
      <link href="/2024/02/16/13-%E6%8C%87%E5%AE%9A%E8%BF%90%E8%A1%8C%E7%BA%A7%E5%88%AB/"/>
      <url>/2024/02/16/13-%E6%8C%87%E5%AE%9A%E8%BF%90%E8%A1%8C%E7%BA%A7%E5%88%AB/</url>
      
        <content type="html"><![CDATA[<h1 id="æŒ‡å®šè¿è¡Œçº§åˆ«"><a href="#æŒ‡å®šè¿è¡Œçº§åˆ«" class="headerlink" title="æŒ‡å®šè¿è¡Œçº§åˆ«"></a>æŒ‡å®šè¿è¡Œçº§åˆ«</h1><h2 id="åŸºæœ¬ä»‹ç»"><a href="#åŸºæœ¬ä»‹ç»" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/A91A43F420123ECE49E540B571F692EF.png"></p><hr><h2 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h2><h3 id="æŸ¥çœ‹å½“å‰ç”¨æˆ·çº§åˆ«"><a href="#æŸ¥çœ‹å½“å‰ç”¨æˆ·çº§åˆ«" class="headerlink" title="æŸ¥çœ‹å½“å‰ç”¨æˆ·çº§åˆ«"></a>æŸ¥çœ‹å½“å‰ç”¨æˆ·çº§åˆ«</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ systemctl get-default<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="è®¾ç½®å½“å‰ç”¨æˆ·çº§åˆ«"><a href="#è®¾ç½®å½“å‰ç”¨æˆ·çº§åˆ«" class="headerlink" title="è®¾ç½®å½“å‰ç”¨æˆ·çº§åˆ«"></a>è®¾ç½®å½“å‰ç”¨æˆ·çº§åˆ«</h3><p><strong>æ–¹æ³•1</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ systemctl set-default muili-user.target                      //è®¾ç½®ç”¨æˆ·çº§åˆ«ä¸º3<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ systemctl set-default graphical.target                       //è®¾ç½®ç”¨æˆ·çº§åˆ«ä¸º5<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><strong>æ³¨æ„ï¼š</strong><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/BDF2B9EDC3054AF7F59A99FF6E4CA2AF.png" alt="" style="zoom: 50%;" /></p></blockquote><p><strong>æ–¹æ³•2</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ init <span class="token punctuation">[</span>0123456<span class="token punctuation">]</span>                                               //è¿è¡Œçº§åˆ«3,5æœ€å¸¸ç”¨<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h2 id="åº”ç”¨æ¡ˆä¾‹"><a href="#åº”ç”¨æ¡ˆä¾‹" class="headerlink" title="åº”ç”¨æ¡ˆä¾‹"></a>åº”ç”¨æ¡ˆä¾‹</h2><p><strong>åœ¨XSHELLä¸Šè¿œç¨‹ç™»å½•Linuxç³»ç»Ÿï¼Œå¹¶æŸ¥è¯¢å’Œæ›´æ”¹è¿è¡Œçº§</strong></p><h3 id="æŸ¥è¯¢è¿è¡Œçº§åˆ«"><a href="#æŸ¥è¯¢è¿è¡Œçº§åˆ«" class="headerlink" title="æŸ¥è¯¢è¿è¡Œçº§åˆ«"></a>æŸ¥è¯¢è¿è¡Œçº§åˆ«</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/6Q8T@8RL4GEMJEHR09_%7BFP1.png"></p><h3 id="æ›´æ”¹è¿è¡Œçº§åˆ«"><a href="#æ›´æ”¹è¿è¡Œçº§åˆ«" class="headerlink" title="æ›´æ”¹è¿è¡Œçº§åˆ«"></a>æ›´æ”¹è¿è¡Œçº§åˆ«</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/L8CGF%7BJ8Y5P%600@N7NCI8NPN.png"></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>12.ç”¨æˆ·ç®¡ç†</title>
      <link href="/2024/02/16/12-%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86/"/>
      <url>/2024/02/16/12-%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h1 id="ç”¨æˆ·ç®¡ç†"><a href="#ç”¨æˆ·ç®¡ç†" class="headerlink" title="ç”¨æˆ·ç®¡ç†"></a>ç”¨æˆ·ç®¡ç†</h1><h2 id="åŸºæœ¬ä»‹ç»"><a href="#åŸºæœ¬ä»‹ç»" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/041D29E0D261FE9E42E253562D1A85D9.png"></p><hr><h2 id="æ·»åŠ ç”¨æˆ·"><a href="#æ·»åŠ ç”¨æˆ·" class="headerlink" title="æ·»åŠ ç”¨æˆ·"></a>æ·»åŠ ç”¨æˆ·</h2><h3 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">useradd</span> ç”¨æˆ·å<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="åº”ç”¨æ¡ˆä¾‹"><a href="#åº”ç”¨æ¡ˆä¾‹" class="headerlink" title="åº”ç”¨æ¡ˆä¾‹"></a>åº”ç”¨æ¡ˆä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/C1F0215FAEBE978AD3EF4F3A06C3A768.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220808105613284.png" alt="" style="zoom:80%;" /><h3 id="ç»†èŠ‚è¯´æ˜"><a href="#ç»†èŠ‚è¯´æ˜" class="headerlink" title="ç»†èŠ‚è¯´æ˜"></a>ç»†èŠ‚è¯´æ˜</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/6F531BDCA0DEEBE64E110DD9B22B2431.png"></p><p><strong>ä¸¾ä¾‹2ï¼šåœ¨æŒ‡å®šçš„ å®¶ç›®å½•&#x2F;home&#x2F;test ä¸‹åˆ›å»ºç”¨æˆ·king</strong></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220808110145779.png"></p><hr><h2 id="æŒ‡å®š-ä¿®æ”¹å¯†ç "><a href="#æŒ‡å®š-ä¿®æ”¹å¯†ç " class="headerlink" title="æŒ‡å®š&#x2F;ä¿®æ”¹å¯†ç "></a>æŒ‡å®š&#x2F;ä¿®æ”¹å¯†ç </h2><h3 id="åŸºæœ¬è¯­æ³•-1"><a href="#åŸºæœ¬è¯­æ³•-1" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ password ç”¨æˆ·å<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="åº”ç”¨æ¡ˆä¾‹-1"><a href="#åº”ç”¨æ¡ˆä¾‹-1" class="headerlink" title="åº”ç”¨æ¡ˆä¾‹"></a>åº”ç”¨æ¡ˆä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/4888467CD642A0AAEEF1C745C7264012.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220808110732358.png" alt="" style="zoom:80%;" /><p><strong>shellç™»å½• milanè´¦å·ï¼š</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/9478656E47937E570F8B1DCE03F51B32.png" alt="" style="zoom:30%;" /><hr><h2 id="åˆ é™¤ç”¨æˆ·"><a href="#åˆ é™¤ç”¨æˆ·" class="headerlink" title="åˆ é™¤ç”¨æˆ·"></a>åˆ é™¤ç”¨æˆ·</h2><h3 id="åŸºæœ¬è¯­æ³•-2"><a href="#åŸºæœ¬è¯­æ³•-2" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">userdel</span> <span class="token punctuation">[</span>-r<span class="token punctuation">]</span> ç”¨æˆ·å                                 //-rä¼šè¿å®¶ç›®å½•ä¹Ÿåˆ é™¤ï¼ //å®¶ç›®å½•åŒ…å«è´¦å·çš„æ‰€æœ‰ä»£ç èµ„æ–™<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="åº”ç”¨æ¡ˆä¾‹-2"><a href="#åº”ç”¨æ¡ˆä¾‹-2" class="headerlink" title="åº”ç”¨æ¡ˆä¾‹"></a>åº”ç”¨æ¡ˆä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/2057E303961414334DE3BA1172282B4C.png"></p><p>1.åˆ é™¤milanï¼Œä¿å­˜å®¶ç›®å½•</p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220808112546840.png" alt="" style="zoom:80%;" /><p>2.åˆ é™¤ç”¨æˆ·ä»¥åŠä¸»ç›®å½•</p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220808112914154.png" alt="" style="zoom:80%;" /><h3 id="ç»†èŠ‚è¯´æ˜-1"><a href="#ç»†èŠ‚è¯´æ˜-1" class="headerlink" title="ç»†èŠ‚è¯´æ˜"></a>ç»†èŠ‚è¯´æ˜</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/78DCA294BD0AEC20BD3336CCB6C4D4C6.png"></p><hr><h2 id="æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯æŒ‡ä»¤"><a href="#æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯æŒ‡ä»¤" class="headerlink" title="æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯æŒ‡ä»¤"></a>æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯æŒ‡ä»¤</h2><h3 id="åŸºæœ¬è¯­æ³•-3"><a href="#åŸºæœ¬è¯­æ³•-3" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">id</span> ç”¨æˆ·å<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="åº”ç”¨æ¡ˆä¾‹-3"><a href="#åº”ç”¨æ¡ˆä¾‹-3" class="headerlink" title="åº”ç”¨æ¡ˆä¾‹"></a>åº”ç”¨æ¡ˆä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/36022A3B622112A23DA50CA8977AE464.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220808114621931.png" alt="" style="zoom:80%;" /><h3 id="ç»†èŠ‚è¯´æ˜-2"><a href="#ç»†èŠ‚è¯´æ˜-2" class="headerlink" title="ç»†èŠ‚è¯´æ˜"></a>ç»†èŠ‚è¯´æ˜</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/3AA73C075EE92A2612A7CEC3A7970347.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220808114646973.png" alt="" style="zoom:80%;" /><hr><h2 id="åˆ‡æ¢ç”¨æˆ·"><a href="#åˆ‡æ¢ç”¨æˆ·" class="headerlink" title="åˆ‡æ¢ç”¨æˆ·"></a>åˆ‡æ¢ç”¨æˆ·</h2><h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/C1CD72D380A2F1F3275C1AA6D385220C.png"></p><h3 id="åŸºæœ¬è¯­æ³•-4"><a href="#åŸºæœ¬è¯­æ³•-4" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">su</span> - åˆ‡æ¢ç”¨æˆ·å<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="åº”ç”¨æ¡ˆä¾‹-4"><a href="#åº”ç”¨æ¡ˆä¾‹-4" class="headerlink" title="åº”ç”¨æ¡ˆä¾‹"></a>åº”ç”¨æ¡ˆä¾‹</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/A1A85A4B93AFBE9433C3D44F44206EAC.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220808115328807.png" alt="" style="zoom:80%;" /><h3 id="ç»†èŠ‚è¯´æ˜-3"><a href="#ç»†èŠ‚è¯´æ˜-3" class="headerlink" title="ç»†èŠ‚è¯´æ˜"></a>ç»†èŠ‚è¯´æ˜</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/19E971738C02A9017E376447EACDF52D.png"></p><hr><h2 id="æŸ¥çœ‹å½“å‰ç”¨æˆ·ä¿¡æ¯"><a href="#æŸ¥çœ‹å½“å‰ç”¨æˆ·ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹å½“å‰ç”¨æˆ·ä¿¡æ¯"></a>æŸ¥çœ‹å½“å‰ç”¨æˆ·ä¿¡æ¯</h2><h3 id="åŸºæœ¬è¯­æ³•-5"><a href="#åŸºæœ¬è¯­æ³•-5" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">whoami</span> / <span class="token function">who</span> am i                                 //å¸¦ç©ºæ ¼æ˜¾ç¤ºç™»é™†æ—¶é—´,ipç­‰ä¿¡æ¯<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="åº”ç”¨æ¡ˆä¾‹-5"><a href="#åº”ç”¨æ¡ˆä¾‹-5" class="headerlink" title="åº”ç”¨æ¡ˆä¾‹"></a>åº”ç”¨æ¡ˆä¾‹</h3><p><strong>æŸ¥è¯¢å½“åº—ç”¨æˆ·ä¿¡æ¯</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220808120013528.png" alt="" style="zoom:80%;" /><hr><h2 id="ç”¨æˆ·ç»„"><a href="#ç”¨æˆ·ç»„" class="headerlink" title="ç”¨æˆ·ç»„"></a>ç”¨æˆ·ç»„</h2><h3 id="ä»‹ç»-1"><a href="#ä»‹ç»-1" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/C22037CD5F18527D3B3B756CC95DCEDE.png"></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/57E1D8FC3698D208D8131860F8EAC0C3.png" alt="" style="zoom: 33%;" /><h3 id="åŸºæœ¬è¯­æ³•-6"><a href="#åŸºæœ¬è¯­æ³•-6" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><p><strong>æ–°å¢ç»„</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">groupadd</span> ç»„å<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>åˆ é™¤ç»„</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">groupdel</span> ç»„å<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>å¢åŠ ç”¨æˆ·æ—¶ç›´æ¥åŠ ä¸Šç»„</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">useradd</span> <span class="token parameter variable">-g</span> ç”¨æˆ·ç»„å ç”¨æˆ·å<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¢åŠ çš„ç”¨æˆ·åŠ åœ¨ <strong>ä¸ç”¨æˆ·ååŒåçš„ç»„</strong></p></blockquote><p><strong>ä¿®æ”¹ç”¨æˆ·ç»„</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">usermod</span> <span class="token parameter variable">-g</span> ç”¨æˆ·ç»„ ç”¨æˆ·å<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="æ¡ˆä¾‹æ¼”ç¤º"><a href="#æ¡ˆä¾‹æ¼”ç¤º" class="headerlink" title="æ¡ˆä¾‹æ¼”ç¤º"></a>æ¡ˆä¾‹æ¼”ç¤º</h3><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220808144446933.png" alt="" style="zoom:80%;" /><hr><h2 id="ç”¨æˆ·å’Œç»„ç›¸å…³æ–‡ä»¶"><a href="#ç”¨æˆ·å’Œç»„ç›¸å…³æ–‡ä»¶" class="headerlink" title="ç”¨æˆ·å’Œç»„ç›¸å…³æ–‡ä»¶"></a>ç”¨æˆ·å’Œç»„ç›¸å…³æ–‡ä»¶</h2><h3 id="etc-passwd-æ–‡ä»¶"><a href="#etc-passwd-æ–‡ä»¶" class="headerlink" title="&#x2F;etc&#x2F;passwd æ–‡ä»¶"></a>&#x2F;etc&#x2F;passwd æ–‡ä»¶</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/BCA70EADC13DD0BC2F8E5743EDEA8C09.png"></p><blockquote><p>vim &#x2F;etc&#x2F;passwd â¬‡ï¸</p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220808145718070.png" alt="" style="zoom:80%;" /></blockquote><h3 id="etc-shadow-æ–‡ä»¶"><a href="#etc-shadow-æ–‡ä»¶" class="headerlink" title="&#x2F;etc&#x2F;shadow æ–‡ä»¶"></a>&#x2F;etc&#x2F;shadow æ–‡ä»¶</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/29079501739AFD987C7DB998FFA3CB82.png"></p><blockquote><p>vim &#x2F;etc&#x2F;shadow â¬‡ï¸</p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220808150023967.png"></p></blockquote><h3 id="etc-group-æ–‡ä»¶"><a href="#etc-group-æ–‡ä»¶" class="headerlink" title="&#x2F;etc&#x2F;group æ–‡ä»¶"></a>&#x2F;etc&#x2F;group æ–‡ä»¶</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/9C33BA804848AC093F46D6A1650BEF90.png"></p><blockquote><p>vim &#x2F;etc&#x2F;group â¬‡ï¸</p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220808150243660.png" alt="" style="zoom:80%;" /></blockquote>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>11.ç”¨æˆ·ç™»å½•å’Œæ³¨é”€</title>
      <link href="/2024/02/16/11-%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E5%92%8C%E6%B3%A8%E9%94%80/"/>
      <url>/2024/02/16/11-%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E5%92%8C%E6%B3%A8%E9%94%80/</url>
      
        <content type="html"><![CDATA[<h1 id="ç”¨æˆ·ç™»å½•å’Œæ³¨é”€"><a href="#ç”¨æˆ·ç™»å½•å’Œæ³¨é”€" class="headerlink" title="ç”¨æˆ·ç™»å½•å’Œæ³¨é”€"></a>ç”¨æˆ·ç™»å½•å’Œæ³¨é”€</h1><h2 id="åŸºæœ¬ä»‹ç»"><a href="#åŸºæœ¬ä»‹ç»" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/962D3B825E0B898BC95969D50B9D666A.png"></p><blockquote><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/37E6A6468062834EEAFFEA32B2236197.png"></p></blockquote><hr><h2 id="ä½¿ç”¨ç»†èŠ‚"><a href="#ä½¿ç”¨ç»†èŠ‚" class="headerlink" title="ä½¿ç”¨ç»†èŠ‚"></a>ä½¿ç”¨ç»†èŠ‚</h2><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/7BEA15983E9E756510103947AB302A61.png" alt="" style="zoom: 67%;" /><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220808091126667.png"></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>10.å…³æœº&amp;é‡å¯å‘½ä»¤</title>
      <link href="/2024/02/16/10-%E5%85%B3%E6%9C%BA-%E9%87%8D%E5%90%AF%E5%91%BD%E4%BB%A4/"/>
      <url>/2024/02/16/10-%E5%85%B3%E6%9C%BA-%E9%87%8D%E5%90%AF%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h1 id="å…³æœº-é‡å¯å‘½ä»¤"><a href="#å…³æœº-é‡å¯å‘½ä»¤" class="headerlink" title="å…³æœº&amp;é‡å¯å‘½ä»¤"></a>å…³æœº&amp;é‡å¯å‘½ä»¤</h1><h2 id="åŸºæœ¬ä»‹ç»"><a href="#åŸºæœ¬ä»‹ç»" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/3EB81BA1E6BB74FDBC5F598900BB4288.png"></p><blockquote><p>hï¼šhalt(åœæ­¢)                             rï¼šreboot(é‡å¯)</p></blockquote><h3 id="æ³¨æ„ç»†èŠ‚"><a href="#æ³¨æ„ç»†èŠ‚" class="headerlink" title="æ³¨æ„ç»†èŠ‚"></a>æ³¨æ„ç»†èŠ‚</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/7EDC7ED6AEC39F4331AE2D4D284E2B12.png"></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>9.Viä¸Vimç¼–è¾‘å™¨</title>
      <link href="/2024/02/16/9-Vi%E4%B8%8EVim%E7%BC%96%E8%BE%91%E5%99%A8/"/>
      <url>/2024/02/16/9-Vi%E4%B8%8EVim%E7%BC%96%E8%BE%91%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="Viä¸Vimç¼–è¾‘å™¨"><a href="#Viä¸Vimç¼–è¾‘å™¨" class="headerlink" title="Viä¸Vimç¼–è¾‘å™¨"></a>Viä¸Vimç¼–è¾‘å™¨</h1><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/8061A92A202F07186252E6B4A6B16274.png"></p><h2 id="1-Viä¸Vimå¸¸ç”¨çš„ä¸‰ç§æ¨¡å¼"><a href="#1-Viä¸Vimå¸¸ç”¨çš„ä¸‰ç§æ¨¡å¼" class="headerlink" title="1.Viä¸Vimå¸¸ç”¨çš„ä¸‰ç§æ¨¡å¼"></a>1.Viä¸Vimå¸¸ç”¨çš„ä¸‰ç§æ¨¡å¼</h2><h3 id="1-æ­£å¸¸æ¨¡å¼-é»˜è®¤æ¨¡å¼"><a href="#1-æ­£å¸¸æ¨¡å¼-é»˜è®¤æ¨¡å¼" class="headerlink" title="1.æ­£å¸¸æ¨¡å¼[é»˜è®¤æ¨¡å¼]"></a>1.æ­£å¸¸æ¨¡å¼[é»˜è®¤æ¨¡å¼]</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/E1303355543223B6CCAEB9695FCD3DE0.png"></p><h3 id="2-æ’å…¥æ¨¡å¼"><a href="#2-æ’å…¥æ¨¡å¼" class="headerlink" title="2.æ’å…¥æ¨¡å¼"></a>2.æ’å…¥æ¨¡å¼</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/5C3B478E79C6435225263FC6D8192128.png"></p><h3 id="3-å‘½ä»¤è¡Œæ¨¡å¼"><a href="#3-å‘½ä»¤è¡Œæ¨¡å¼" class="headerlink" title="3.å‘½ä»¤è¡Œæ¨¡å¼"></a>3.å‘½ä»¤è¡Œæ¨¡å¼</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/CF89347E1F96D8FC0D6CFCD999E52C60.png"></p><hr><h2 id="2-å¿«é€Ÿå…¥é—¨"><a href="#2-å¿«é€Ÿå…¥é—¨" class="headerlink" title="2.å¿«é€Ÿå…¥é—¨"></a>2.å¿«é€Ÿå…¥é—¨</h2><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/38C385C572193EA2312D1FF730D9F21E.png" alt="" style="zoom:50%;" /><hr><h2 id="3-Viä¸Vimå„ä¸ªæ¨¡å¼çš„åˆ‡æ¢å›¾"><a href="#3-Viä¸Vimå„ä¸ªæ¨¡å¼çš„åˆ‡æ¢å›¾" class="headerlink" title="3.Viä¸Vimå„ä¸ªæ¨¡å¼çš„åˆ‡æ¢å›¾"></a>3.Viä¸Vimå„ä¸ªæ¨¡å¼çš„åˆ‡æ¢å›¾</h2><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/D9E464FBC7B1975837FA735004E376C4.png" alt="" style="zoom:50%;" /><hr><h2 id="4-å¿«æ·é”®ä½¿ç”¨ç»ƒä¹ -å¤šç»ƒ"><a href="#4-å¿«æ·é”®ä½¿ç”¨ç»ƒä¹ -å¤šç»ƒ" class="headerlink" title="4.å¿«æ·é”®ä½¿ç”¨ç»ƒä¹ [å¤šç»ƒ]"></a>4.å¿«æ·é”®ä½¿ç”¨ç»ƒä¹ [å¤šç»ƒ]</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/0059A4BB149C2CEDD2071085DC1362F7.png"></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>8.è¿œç¨‹ç™»å½• &amp;&amp; è¿œç¨‹æ–‡ä»¶ä¼ è¾“</title>
      <link href="/2024/02/16/8-%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95-%E8%BF%9C%E7%A8%8B%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93/"/>
      <url>/2024/02/16/8-%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95-%E8%BF%9C%E7%A8%8B%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93/</url>
      
        <content type="html"><![CDATA[<h1 id="è¿œç¨‹ç™»å½•-è¿œç¨‹æ–‡ä»¶ä¼ è¾“"><a href="#è¿œç¨‹ç™»å½•-è¿œç¨‹æ–‡ä»¶ä¼ è¾“" class="headerlink" title="è¿œç¨‹ç™»å½• &amp;&amp; è¿œç¨‹æ–‡ä»¶ä¼ è¾“"></a>è¿œç¨‹ç™»å½• &amp;&amp; è¿œç¨‹æ–‡ä»¶ä¼ è¾“</h1><h2 id="ä¸ºä»€ä¹ˆéœ€è¦è¿œç¨‹ç™»å½•Linuxï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦è¿œç¨‹ç™»å½•Linuxï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦è¿œç¨‹ç™»å½•Linuxï¼Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦è¿œç¨‹ç™»å½•Linuxï¼Ÿ</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/ED7244A74C32ED4537C779C337B1E09E.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/D662EFFF6FCC696B393FB44B7792DEB9.png"></p><blockquote><p>æ˜¾ç„¶ï¼Œè¿œç¨‹ç™»å½•<strong>è¦çŸ¥é“ipåœ°å€</strong></p><p><strong>LinuxæŒ‡ä»¤ï¼šæŸ¥çœ‹æœ¬æœºipåœ°å€</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span>$ <span class="token function">ifconfig</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/CC908B7C45893F34D8678BF2492F7D11.png"></p></blockquote><hr><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><h3 id="è¿œç¨‹ç™»å½•å·¥å…·"><a href="#è¿œç¨‹ç™»å½•å·¥å…·" class="headerlink" title="è¿œç¨‹ç™»å½•å·¥å…·"></a>è¿œç¨‹ç™»å½•å·¥å…·</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/FCB0B99133BB642883D627FAFA1BF476.png"></p><h3 id="è¿œç¨‹ä¸Šä¼ ä¸‹è½½æ–‡ä»¶-Xftp"><a href="#è¿œç¨‹ä¸Šä¼ ä¸‹è½½æ–‡ä»¶-Xftp" class="headerlink" title="è¿œç¨‹ä¸Šä¼ ä¸‹è½½æ–‡ä»¶[Xftp]"></a>è¿œç¨‹ä¸Šä¼ ä¸‹è½½æ–‡ä»¶[Xftp]</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/705F06A6E2E22C2A7A769639A3A5D221.png"></p><hr><h2 id="è¿œç¨‹ç™»å½•-XSHELL"><a href="#è¿œç¨‹ç™»å½•-XSHELL" class="headerlink" title="è¿œç¨‹ç™»å½•[XSHELL]"></a>è¿œç¨‹ç™»å½•[XSHELL]</h2><h3 id="step1ï¼šå¾—åˆ°Linuxç³»ç»Ÿä¸‹çš„æœ¬æœºip"><a href="#step1ï¼šå¾—åˆ°Linuxç³»ç»Ÿä¸‹çš„æœ¬æœºip" class="headerlink" title="step1ï¼šå¾—åˆ°Linuxç³»ç»Ÿä¸‹çš„æœ¬æœºip"></a>step1ï¼šå¾—åˆ°Linuxç³»ç»Ÿä¸‹çš„æœ¬æœºip</h3><p><strong>LinuxæŒ‡ä»¤ï¼šæŸ¥çœ‹æœ¬æœºipåœ°å€</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">ifconfig</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/CC908B7C45893F34D8678BF2492F7D11.png"></p><h3 id="step2ï¼šping-ip-çœ‹æ˜¯å¦æˆåŠŸè¿æ¥"><a href="#step2ï¼šping-ip-çœ‹æ˜¯å¦æˆåŠŸè¿æ¥" class="headerlink" title="step2ï¼šping ip ,çœ‹æ˜¯å¦æˆåŠŸè¿æ¥"></a>step2ï¼šping ip ,çœ‹æ˜¯å¦æˆåŠŸè¿æ¥</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Microsoft Windows <span class="token punctuation">[</span>ç‰ˆæœ¬ <span class="token number">10.0</span>.22000.795<span class="token punctuation">]</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> Microsoft Corporationã€‚ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚C:<span class="token punctuation">\</span>WINDOWS<span class="token punctuation">\</span>system3<span class="token operator"><span class="token file-descriptor important">2</span>></span>ping <span class="token number">192.168</span>.159.128æ­£åœ¨ Ping <span class="token number">192.168</span>.159.128 å…·æœ‰ <span class="token number">32</span> å­—èŠ‚çš„æ•°æ®:æ¥è‡ª <span class="token number">192.168</span>.159.128 çš„å›å¤: å­—èŠ‚<span class="token operator">=</span><span class="token number">32</span> æ—¶é—´<span class="token operator">&lt;</span>1ms <span class="token assign-left variable">TTL</span><span class="token operator">=</span><span class="token number">64</span>æ¥è‡ª <span class="token number">192.168</span>.159.128 çš„å›å¤: å­—èŠ‚<span class="token operator">=</span><span class="token number">32</span> æ—¶é—´<span class="token operator">=</span>1ms <span class="token assign-left variable">TTL</span><span class="token operator">=</span><span class="token number">64</span>æ¥è‡ª <span class="token number">192.168</span>.159.128 çš„å›å¤: å­—èŠ‚<span class="token operator">=</span><span class="token number">32</span> æ—¶é—´<span class="token operator">&lt;</span>1ms <span class="token assign-left variable">TTL</span><span class="token operator">=</span><span class="token number">64</span>æ¥è‡ª <span class="token number">192.168</span>.159.128 çš„å›å¤: å­—èŠ‚<span class="token operator">=</span><span class="token number">32</span> æ—¶é—´<span class="token operator">&lt;</span>1ms <span class="token assign-left variable">TTL</span><span class="token operator">=</span><span class="token number">64</span><span class="token number">192.168</span>.159.128 çš„ Ping ç»Ÿè®¡ä¿¡æ¯:    æ•°æ®åŒ…: å·²å‘é€ <span class="token operator">=</span> <span class="token number">4</span>ï¼Œå·²æ¥æ”¶ <span class="token operator">=</span> <span class="token number">4</span>ï¼Œä¸¢å¤± <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">(</span><span class="token number">0</span>% ä¸¢å¤±<span class="token punctuation">)</span>ï¼Œå¾€è¿”è¡Œç¨‹çš„ä¼°è®¡æ—¶é—´<span class="token punctuation">(</span>ä»¥æ¯«ç§’ä¸ºå•ä½<span class="token punctuation">)</span>:    æœ€çŸ­ <span class="token operator">=</span> 0msï¼Œæœ€é•¿ <span class="token operator">=</span> 1msï¼Œå¹³å‡ <span class="token operator">=</span> 0ms<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220807175328045.png"></p><h3 id="step3-æ–°å»º"><a href="#step3-æ–°å»º" class="headerlink" title="step3:æ–°å»º"></a>step3:æ–°å»º</h3><p>æ‰“å¼€XSHELLã€‚ç‚¹å‡»<strong>æ–°å»º</strong>ã€‚</p><img src="D:/markdown(typora)ä½¿ç”¨æ•™ç¨‹.assets/image-20220807175450624.png" alt="" style="zoom:67%;" /><p><strong>ä¸»æœºå·ï¼šå³Linuxç³»ç»Ÿä¸­ <code>ifconfig</code>å¾—åˆ°çš„ ipåœ°å€</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220807175754754.png" alt="" style="zoom:67%;" /><p>ç¡®å®šï¼Œå…³é—­</p><img src="D:/markdown(typora)ä½¿ç”¨æ•™ç¨‹.assets/image-20220807180031125.png" alt="" style="zoom:67%;" /><p><strong>åŒå‡»ä¼šè¯</strong></p><img src="D:/markdown(typora)ä½¿ç”¨æ•™ç¨‹.assets/image-20220807180157920.png" alt="" style="zoom: 50%;" /><blockquote><p><strong>æ¥å—å¹¶ä¿å­˜ï¼šä¿å­˜è®°å½•ï¼Œä¸‹æ¬¡å°±ä¸ç”¨è¿æ¥</strong></p><p><strong>ä¸€æ¬¡æ€§æ¥å—ï¼šä¸‹æ¬¡è¿˜è¦è¿æ¥</strong></p></blockquote><h3 id="step4ï¼šè¾“å…¥Linuxç³»ç»Ÿè´¦å·å’Œå¯†ç "><a href="#step4ï¼šè¾“å…¥Linuxç³»ç»Ÿè´¦å·å’Œå¯†ç " class="headerlink" title="step4ï¼šè¾“å…¥Linuxç³»ç»Ÿè´¦å·å’Œå¯†ç "></a>step4ï¼šè¾“å…¥Linuxç³»ç»Ÿè´¦å·å’Œå¯†ç </h3><img src="D:/markdown(typora)ä½¿ç”¨æ•™ç¨‹.assets/image-20220807180556686.png" alt="" style="zoom:67%;" /><img src="D:/markdown(typora)ä½¿ç”¨æ•™ç¨‹.assets/image-20220807180532335.png" alt="" style="zoom:67%;" /><h3 id="step5ï¼šç™»å½•æˆåŠŸ"><a href="#step5ï¼šç™»å½•æˆåŠŸ" class="headerlink" title="step5ï¼šç™»å½•æˆåŠŸ"></a>step5ï¼šç™»å½•æˆåŠŸ</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220807181155033.png"></p><hr><h2 id="è¿œç¨‹ä¸Šä¼ ä¸‹è½½æ–‡ä»¶-Xftp-1"><a href="#è¿œç¨‹ä¸Šä¼ ä¸‹è½½æ–‡ä»¶-Xftp-1" class="headerlink" title="è¿œç¨‹ä¸Šä¼ ä¸‹è½½æ–‡ä»¶[Xftp]"></a>è¿œç¨‹ä¸Šä¼ ä¸‹è½½æ–‡ä»¶[Xftp]</h2><h3 id="step1ï¼šå¾—åˆ°Linuxç³»ç»Ÿä¸‹çš„æœ¬æœºip-1"><a href="#step1ï¼šå¾—åˆ°Linuxç³»ç»Ÿä¸‹çš„æœ¬æœºip-1" class="headerlink" title="step1ï¼šå¾—åˆ°Linuxç³»ç»Ÿä¸‹çš„æœ¬æœºip"></a>step1ï¼šå¾—åˆ°Linuxç³»ç»Ÿä¸‹çš„æœ¬æœºip</h3><p><strong>LinuxæŒ‡ä»¤ï¼šæŸ¥çœ‹æœ¬æœºipåœ°å€</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">ifconfig</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/CC908B7C45893F34D8678BF2492F7D11.png"></p><h3 id="step2ï¼šping-ip-çœ‹æ˜¯å¦æˆåŠŸè¿æ¥-1"><a href="#step2ï¼šping-ip-çœ‹æ˜¯å¦æˆåŠŸè¿æ¥-1" class="headerlink" title="step2ï¼šping ip ,çœ‹æ˜¯å¦æˆåŠŸè¿æ¥"></a>step2ï¼šping ip ,çœ‹æ˜¯å¦æˆåŠŸè¿æ¥</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Microsoft Windows <span class="token punctuation">[</span>ç‰ˆæœ¬ <span class="token number">10.0</span>.22000.795<span class="token punctuation">]</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> Microsoft Corporationã€‚ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚C:<span class="token punctuation">\</span>WINDOWS<span class="token punctuation">\</span>system3<span class="token operator"><span class="token file-descriptor important">2</span>></span>ping <span class="token number">192.168</span>.159.128æ­£åœ¨ Ping <span class="token number">192.168</span>.159.128 å…·æœ‰ <span class="token number">32</span> å­—èŠ‚çš„æ•°æ®:æ¥è‡ª <span class="token number">192.168</span>.159.128 çš„å›å¤: å­—èŠ‚<span class="token operator">=</span><span class="token number">32</span> æ—¶é—´<span class="token operator">&lt;</span>1ms <span class="token assign-left variable">TTL</span><span class="token operator">=</span><span class="token number">64</span>æ¥è‡ª <span class="token number">192.168</span>.159.128 çš„å›å¤: å­—èŠ‚<span class="token operator">=</span><span class="token number">32</span> æ—¶é—´<span class="token operator">=</span>1ms <span class="token assign-left variable">TTL</span><span class="token operator">=</span><span class="token number">64</span>æ¥è‡ª <span class="token number">192.168</span>.159.128 çš„å›å¤: å­—èŠ‚<span class="token operator">=</span><span class="token number">32</span> æ—¶é—´<span class="token operator">&lt;</span>1ms <span class="token assign-left variable">TTL</span><span class="token operator">=</span><span class="token number">64</span>æ¥è‡ª <span class="token number">192.168</span>.159.128 çš„å›å¤: å­—èŠ‚<span class="token operator">=</span><span class="token number">32</span> æ—¶é—´<span class="token operator">&lt;</span>1ms <span class="token assign-left variable">TTL</span><span class="token operator">=</span><span class="token number">64</span><span class="token number">192.168</span>.159.128 çš„ Ping ç»Ÿè®¡ä¿¡æ¯:    æ•°æ®åŒ…: å·²å‘é€ <span class="token operator">=</span> <span class="token number">4</span>ï¼Œå·²æ¥æ”¶ <span class="token operator">=</span> <span class="token number">4</span>ï¼Œä¸¢å¤± <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">(</span><span class="token number">0</span>% ä¸¢å¤±<span class="token punctuation">)</span>ï¼Œå¾€è¿”è¡Œç¨‹çš„ä¼°è®¡æ—¶é—´<span class="token punctuation">(</span>ä»¥æ¯«ç§’ä¸ºå•ä½<span class="token punctuation">)</span>:    æœ€çŸ­ <span class="token operator">=</span> 0msï¼Œæœ€é•¿ <span class="token operator">=</span> 1msï¼Œå¹³å‡ <span class="token operator">=</span> 0ms<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220807175328045.png"></p><h3 id="step3-æ–°å»º-1"><a href="#step3-æ–°å»º-1" class="headerlink" title="step3:æ–°å»º"></a>step3:æ–°å»º</h3><p>æ‰“å¼€Xftpã€‚ç‚¹å‡»&#x3D;&#x3D;<strong>æ–°å»º</strong>&#x3D;&#x3D;ã€‚</p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220807181955227.png"></p><p><strong>ä¸»æœºå·ï¼šå³Linuxç³»ç»Ÿä¸­ &#x3D;&#x3D;ifconfigå¾—åˆ°çš„ ipåœ°å€&#x3D;&#x3D;</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220807182241058.png" alt="" style="zoom:67%;" /><p>ç¡®å®šï¼Œå…³é—­</p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220807182257136.png" alt="" style="zoom:67%;" /><p>ç‚¹å‡»ï¼šè¿æ¥</p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220807182357816.png" alt="" style="zoom: 67%;" /><p>ä¸€æ¬¡æ€§æ¥å—</p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220807182429128.png" alt="" style="zoom:67%;" /><h3 id="step4-è¾“å…¥Linuxç³»ç»Ÿè´¦å·å’Œå¯†ç "><a href="#step4-è¾“å…¥Linuxç³»ç»Ÿè´¦å·å’Œå¯†ç " class="headerlink" title="step4:è¾“å…¥Linuxç³»ç»Ÿè´¦å·å’Œå¯†ç "></a>step4:è¾“å…¥Linuxç³»ç»Ÿè´¦å·å’Œå¯†ç </h3><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220807182529873.png" alt="" style="zoom:67%;" /><h3 id="step5-ç™»å½•æˆåŠŸ"><a href="#step5-ç™»å½•æˆåŠŸ" class="headerlink" title="step5:ç™»å½•æˆåŠŸ"></a>step5:ç™»å½•æˆåŠŸ</h3><p><strong>å·¦è¾¹æ˜¯windowsæ¡Œé¢ï¼Œå³è¾¹æ˜¯Linuxæ¡Œé¢</strong></p><p><strong>é€‰å®šæ–‡ä»¶ä½ç½®ï¼Œç›´æ¥æ‹–åŠ¨&#x2F;å³é”®â€œä¼ è¾“â€ã€‚å³å¯ä¼ é€æ–‡ä»¶</strong></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220807182717047.png"></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>7.Linuxç›®å½•ç»“æ„</title>
      <link href="/2024/02/16/7-Linux%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/"/>
      <url>/2024/02/16/7-Linux%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<h1 id="Linuxç›®å½•ç»“æ„"><a href="#Linuxç›®å½•ç»“æ„" class="headerlink" title="Linuxç›®å½•ç»“æ„"></a>Linuxç›®å½•ç»“æ„</h1><h2 id="åŸºæœ¬ä»‹ç»"><a href="#åŸºæœ¬ä»‹ç»" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h2><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/BC8860FF38CD23C8768AE9FD867BB079.png" alt=""  /><h3 id="ç¤ºæ„å›¾"><a href="#ç¤ºæ„å›¾" class="headerlink" title="ç¤ºæ„å›¾"></a>ç¤ºæ„å›¾</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/0AAA45E049494FF7B1CA98ED26490B19.png"></p><hr><h2 id="å…·ä½“çš„ç›®å½•ç»“æ„-ä¸ç”¨èƒŒï¼ŒçŸ¥é“å³å¯"><a href="#å…·ä½“çš„ç›®å½•ç»“æ„-ä¸ç”¨èƒŒï¼ŒçŸ¥é“å³å¯" class="headerlink" title="å…·ä½“çš„ç›®å½•ç»“æ„(ä¸ç”¨èƒŒï¼ŒçŸ¥é“å³å¯)"></a>å…·ä½“çš„ç›®å½•ç»“æ„(ä¸ç”¨èƒŒï¼ŒçŸ¥é“å³å¯)</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/87ED9786DB9752B1F30812D9B39CEF98.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/96A65707359E0FE06ED591723DE9921A.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/19C9DEB919EC0CC3FC44042E491A798B.png"></p><p><strong>ä¸¾ä¾‹ï¼š</strong></p><p>1.åˆ›å»ºç”¨æˆ·jack</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">useradd</span> jack<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220807144236170.png" alt="" style="zoom: 67%;" /><p>2.åˆ é™¤ç”¨æˆ·jack</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">userdel</span> <span class="token parameter variable">-r</span> jack<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220807144536516.png" alt="" style="zoom:67%;" /><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/8C9C253722BD9659B13C65A18549A828.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/8893C92010DD4478A610E304A6CD3EF0.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/0FCE09F6043C25344935E05298E68B15.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/F7B34B3A93B81EF99E05D73B40907E52.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/D30488DB9D90A2877054EFBE274340B1.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/296353B2B9F3FD35859D372A28DF6F86.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240216201818082.png"></p><blockquote><p><strong>è¿™ä¸‰ä¸ªç›®å½•éƒ½ä¸èƒ½åŠ¨</strong></p></blockquote><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/A4E49BCC980066D22F85F5ADB4F300DA.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/679117FE405ECE0E0DF5B8A1FCA918C4.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/8552A3A7665E8EB08C0E62351DAAE494.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/426423CC97ED606E02F5496A2BDA2312.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/DE7045FE06B2FE26E084F3F8CD65CA7B.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/F96C724CC15C6246369584AA7721FB32.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/C4BD3775DFFE8FA11141F43AA5C80EF4.png"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/9972E8D22F1543C25B59BA6BF568C616.png"></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>6.vmtools</title>
      <link href="/2024/02/16/6-vmtools/"/>
      <url>/2024/02/16/6-vmtools/</url>
      
        <content type="html"><![CDATA[<h1 id="vmtools"><a href="#vmtools" class="headerlink" title="vmtools"></a>vmtools</h1><h2 id="1-ä»‹ç»"><a href="#1-ä»‹ç»" class="headerlink" title="1.ä»‹ç»"></a>1.ä»‹ç»</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/292C4098333EEAE974D519A91542DF7C.png"></p><hr><h2 id="2-å®‰è£…vmtoolsæ­¥éª¤"><a href="#2-å®‰è£…vmtoolsæ­¥éª¤" class="headerlink" title="2.å®‰è£…vmtoolsæ­¥éª¤"></a>2.å®‰è£…vmtoolsæ­¥éª¤</h2><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/FF45FCF542F555368E07B743777D294E.png" alt="" style="zoom:80%;" /><blockquote><p>æ–°ç‰ˆæœ¬VMè‡ªåŠ¨å®‰è£…</p></blockquote><hr><h2 id="3-å…±äº«æ–‡ä»¶ä½ç½®"><a href="#3-å…±äº«æ–‡ä»¶ä½ç½®" class="headerlink" title="3.å…±äº«æ–‡ä»¶ä½ç½®"></a>3.å…±äº«æ–‡ä»¶ä½ç½®</h2><p>&#x3D;&#x3D;<strong>ä¸»æ–‡ä»¶å¤¹ -&gt; å…¶ä»–ä½ç½® -&gt; è®¡ç®—æœº -&gt; mnt -&gt; hgfs -&gt; myshare</strong>&#x3D;&#x3D;</p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220807085433372.png" alt="" style="zoom:80%;" /><hr><h2 id="4-æ³¨æ„äº‹é¡¹ä¸ç»†èŠ‚è¯´æ˜"><a href="#4-æ³¨æ„äº‹é¡¹ä¸ç»†èŠ‚è¯´æ˜" class="headerlink" title="4.æ³¨æ„äº‹é¡¹ä¸ç»†èŠ‚è¯´æ˜"></a>4.æ³¨æ„äº‹é¡¹ä¸ç»†èŠ‚è¯´æ˜</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/131D96BDA7B4B3C2AAB76649D5666F91.png"></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>5.è™šæ‹Ÿæœºè¿ç§»å’Œåˆ é™¤</title>
      <link href="/2024/02/16/5-%E8%99%9A%E6%8B%9F%E6%9C%BA%E8%BF%81%E7%A7%BB%E5%92%8C%E5%88%A0%E9%99%A4/"/>
      <url>/2024/02/16/5-%E8%99%9A%E6%8B%9F%E6%9C%BA%E8%BF%81%E7%A7%BB%E5%92%8C%E5%88%A0%E9%99%A4/</url>
      
        <content type="html"><![CDATA[<h1 id="è™šæ‹Ÿæœºè¿ç§»å’Œåˆ é™¤"><a href="#è™šæ‹Ÿæœºè¿ç§»å’Œåˆ é™¤" class="headerlink" title="è™šæ‹Ÿæœºè¿ç§»å’Œåˆ é™¤"></a>è™šæ‹Ÿæœºè¿ç§»å’Œåˆ é™¤</h1><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/7A606ADD24C427E5FA8E64CD947D9896.png"></p><h2 id="æ¼”ç¤º"><a href="#æ¼”ç¤º" class="headerlink" title="æ¼”ç¤º"></a>æ¼”ç¤º</h2><h3 id="å‰ªåˆ‡"><a href="#å‰ªåˆ‡" class="headerlink" title="å‰ªåˆ‡"></a>å‰ªåˆ‡</h3><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220807090852620.png" alt="" style="zoom: 67%;" /><h3 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h3><p><strong>æ–¹å¼1</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220807090949278.png" alt="" style="zoom: 67%;" /><p><strong>æ–¹å¼2</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220807091038292.png" alt="" style="zoom: 67%;" /><blockquote><p>è¿™ä¸€æ­¥åªæ˜¯åˆ é™¤<strong>æ–‡ä»¶çš„æŒ‡å‘</strong>ï¼Œ<strong>æ–‡ä»¶æœ¬èº«</strong>æ²¡æœ‰è¢«åˆ é™¤(è¦åˆ é™¤è¿˜æ˜¯æ–¹å¼1)</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>4.è™šæ‹Ÿæœºå¿«ç…§</title>
      <link href="/2024/02/16/4-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%BF%AB%E7%85%A7/"/>
      <url>/2024/02/16/4-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%BF%AB%E7%85%A7/</url>
      
        <content type="html"><![CDATA[<h1 id="è™šæ‹Ÿæœºå¿«ç…§"><a href="#è™šæ‹Ÿæœºå¿«ç…§" class="headerlink" title="è™šæ‹Ÿæœºå¿«ç…§"></a>è™šæ‹Ÿæœºå¿«ç…§</h1><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/DF85657C89008E8112D5210F2AA1EC38.png"></p><blockquote><p><strong>ç±»ä¼¼äºæ•°æ®åº“çš„ rollbackï¼Œä½†è¿˜èƒ½å¾€åæ»šï¼Œç”šè‡³èƒ½äº§ç”Ÿåˆ†æ”¯ã€‚å¤šäº†è¿˜å ç”¨ç£ç›˜ç©ºé—´</strong></p></blockquote><h2 id="åº”ç”¨å®ä¾‹"><a href="#åº”ç”¨å®ä¾‹" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/F3226598F6D713C4BC9EAA00E24EC993.png"></p><h3 id="step1ï¼š"><a href="#step1ï¼š" class="headerlink" title="step1ï¼š"></a>step1ï¼š</h3><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220806233810162.png" alt="" style="zoom: 67%;" /><h3 id="step2ï¼š"><a href="#step2ï¼š" class="headerlink" title="step2ï¼š"></a>step2ï¼š</h3><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220806233920476.png" alt="" style="zoom: 80%;" /><h3 id="step3ï¼šè¿›è¡Œä¸€äº›æ“ä½œ-åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹"><a href="#step3ï¼šè¿›è¡Œä¸€äº›æ“ä½œ-åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹" class="headerlink" title="step3ï¼šè¿›è¡Œä¸€äº›æ“ä½œ[åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹]"></a>step3ï¼šè¿›è¡Œä¸€äº›æ“ä½œ[åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹]</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220806234156452.png"></p><h3 id="step4ï¼šå†æ‹ä¸€ä¸ªå¿«ç…§"><a href="#step4ï¼šå†æ‹ä¸€ä¸ªå¿«ç…§" class="headerlink" title="step4ï¼šå†æ‹ä¸€ä¸ªå¿«ç…§"></a>step4ï¼šå†æ‹ä¸€ä¸ªå¿«ç…§</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220806234301801.png"></p><h3 id="step5ï¼šå†è¿›è¡Œä¸€æ¬¡æ“ä½œ"><a href="#step5ï¼šå†è¿›è¡Œä¸€æ¬¡æ“ä½œ" class="headerlink" title="step5ï¼šå†è¿›è¡Œä¸€æ¬¡æ“ä½œ"></a>step5ï¼šå†è¿›è¡Œä¸€æ¬¡æ“ä½œ</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220806235141949.png"></p><h3 id="step6ï¼šå†æ‹ä¸€ä¸ªå¿«ç…§"><a href="#step6ï¼šå†æ‹ä¸€ä¸ªå¿«ç…§" class="headerlink" title="step6ï¼šå†æ‹ä¸€ä¸ªå¿«ç…§"></a>step6ï¼šå†æ‹ä¸€ä¸ªå¿«ç…§</h3><h3 id="step7ï¼šæ‰“å¼€å¿«ç…§ç®¡ç†å™¨"><a href="#step7ï¼šæ‰“å¼€å¿«ç…§ç®¡ç†å™¨" class="headerlink" title="step7ï¼šæ‰“å¼€å¿«ç…§ç®¡ç†å™¨"></a>step7ï¼šæ‰“å¼€å¿«ç…§ç®¡ç†å™¨</h3><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220806235518637.png" alt="" style="zoom:67%;" /><p>step8ï¼šç‚¹å‡»Aï¼Œç‚¹å‡»<strong>è½¬åˆ°</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220806235549930.png" alt="" style="zoom:67%;" /><blockquote><p><strong>ç³»ç»Ÿä¼šé‡å¯</strong></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3.è™šæ‹Ÿæœºå…‹éš†</title>
      <link href="/2024/02/16/3-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%85%8B%E9%9A%86/"/>
      <url>/2024/02/16/3-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%85%8B%E9%9A%86/</url>
      
        <content type="html"><![CDATA[<h1 id="è™šæ‹Ÿæœºå…‹éš†"><a href="#è™šæ‹Ÿæœºå…‹éš†" class="headerlink" title="è™šæ‹Ÿæœºå…‹éš†"></a>è™šæ‹Ÿæœºå…‹éš†</h1><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/90004CDA94A9E9C6F2650E44F7E6322E.png"></p><hr><h2 id="æ–¹å¼2æ¼”ç¤º"><a href="#æ–¹å¼2æ¼”ç¤º" class="headerlink" title="æ–¹å¼2æ¼”ç¤º"></a>æ–¹å¼2æ¼”ç¤º</h2><h3 id="step1ï¼š"><a href="#step1ï¼š" class="headerlink" title="step1ï¼š"></a>step1ï¼š</h3><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220806221303843.png" alt="" style="zoom:67%;" /><h3 id="step2ï¼š"><a href="#step2ï¼š" class="headerlink" title="step2ï¼š"></a>step2ï¼š</h3><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220806221420080.png" alt="" style="zoom:67%;" /><h3 id="step3ï¼š"><a href="#step3ï¼š" class="headerlink" title="step3ï¼š"></a>step3ï¼š</h3><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220806221457005.png" alt="" style="zoom:67%;" /><blockquote><p><strong>æœ¬è´¨å°±æ˜¯ç¬¬1ç§å…‹éš†æ–¹å¼</strong></p></blockquote><h3 id="step4ï¼š"><a href="#step4ï¼š" class="headerlink" title="step4ï¼š"></a>step4ï¼š</h3><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220806221657744.png" alt="" style="zoom:67%;" /><h3 id="æˆåŠŸï¼š"><a href="#æˆåŠŸï¼š" class="headerlink" title="æˆåŠŸï¼š"></a>æˆåŠŸï¼š</h3><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20220806221803634.png" alt="" style="zoom:67%;" />]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2.ç½‘ç»œè¿æ¥çš„ä¸‰ç§æ–¹å¼</title>
      <link href="/2024/02/16/2-%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F/"/>
      <url>/2024/02/16/2-%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="ç½‘ç»œè¿æ¥çš„ä¸‰ç§æ–¹å¼"><a href="#ç½‘ç»œè¿æ¥çš„ä¸‰ç§æ–¹å¼" class="headerlink" title="ç½‘ç»œè¿æ¥çš„ä¸‰ç§æ–¹å¼"></a>ç½‘ç»œè¿æ¥çš„ä¸‰ç§æ–¹å¼</h1><h2 id="1-æ¡¥æ¥æ¨¡å¼"><a href="#1-æ¡¥æ¥æ¨¡å¼" class="headerlink" title="1.æ¡¥æ¥æ¨¡å¼"></a>1.æ¡¥æ¥æ¨¡å¼</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/7499E9E339455A8549BFAC167703C829.png"></p><h3 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h3><p><strong>åŒä¸€ä¸ªç½‘ç»œä¸‹ipåœ°å€çš„ç½‘ç»œåœ°å€(å‰3ä¸ªå­—èŠ‚)å¿…é¡»ç›¸åŒï¼Œä¸»æœºåœ°å€(æœ€åä¸€ä¸ªå­—èŠ‚0~255)ä¸èƒ½ç›¸åŒï¼Œä½†æœ€å¤§åªæœ‰255ä¸ªï¼Œæ‰€èƒ½åŒæ—¶å®¹çº³çš„ä¸»æœºå¾ˆå°‘ï¼Œå®¹æ˜“é€ æˆipå†²çªã€‚</strong></p><hr><h2 id="2-NAT-ç½‘ç»œåœ°å€è½¬æ¢-æ¨¡å¼"><a href="#2-NAT-ç½‘ç»œåœ°å€è½¬æ¢-æ¨¡å¼" class="headerlink" title="2.NAT(ç½‘ç»œåœ°å€è½¬æ¢)æ¨¡å¼"></a>2.NAT(ç½‘ç»œåœ°å€è½¬æ¢)æ¨¡å¼</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/A46C4B9EAADB6089B239439B2479049F.png"></p><hr><h2 id="3-ä¸»æœºæ¨¡å¼"><a href="#3-ä¸»æœºæ¨¡å¼" class="headerlink" title="3.ä¸»æœºæ¨¡å¼"></a>3.ä¸»æœºæ¨¡å¼</h2><p><strong>ç‹¬ç«‹çš„ç³»ç»Ÿï¼Œä¸å’Œå¤–éƒ¨å‘ç”Ÿé€šä¿¡</strong></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1.Linuxä¸Unixçš„å…³ç³»</title>
      <link href="/2024/02/16/1-Linux%E4%B8%8EUnix%E7%9A%84%E5%85%B3%E7%B3%BB/"/>
      <url>/2024/02/16/1-Linux%E4%B8%8EUnix%E7%9A%84%E5%85%B3%E7%B3%BB/</url>
      
        <content type="html"><![CDATA[<h1 id="Linuxä¸Unixçš„å…³ç³»"><a href="#Linuxä¸Unixçš„å…³ç³»" class="headerlink" title="Linuxä¸Unixçš„å…³ç³»"></a>Linuxä¸Unixçš„å…³ç³»</h1><h2 id="1-unixæ€ä¹ˆæ¥çš„"><a href="#1-unixæ€ä¹ˆæ¥çš„" class="headerlink" title="1.unixæ€ä¹ˆæ¥çš„"></a>1.unixæ€ä¹ˆæ¥çš„</h2><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/2EBDCB93E6A61DCBF80BBEFBCA80CE25.png" alt="img" style="zoom:50%;" /><hr><h2 id="2-Linuxæ€ä¹ˆæ¥çš„"><a href="#2-Linuxæ€ä¹ˆæ¥çš„" class="headerlink" title="2.Linuxæ€ä¹ˆæ¥çš„"></a>2.Linuxæ€ä¹ˆæ¥çš„</h2><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/243CF83A5A2AF501CCC86A9D02EA9DAF.png" alt="img" style="zoom: 35%;" /><hr><h2 id="3-Linuxä¸Unixå…³ç³»å›¾"><a href="#3-Linuxä¸Unixå…³ç³»å›¾" class="headerlink" title="3.Linuxä¸Unixå…³ç³»å›¾"></a>3.Linuxä¸Unixå…³ç³»å›¾</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/3AED09E5CB05D5C8530EA45745448BA5.png" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>0.Linuxä»‹ç»</title>
      <link href="/2024/02/16/0.Linux%E4%BB%8B%E7%BB%8D/"/>
      <url>/2024/02/16/0.Linux%E4%BB%8B%E7%BB%8D/</url>
      
        <content type="html"><![CDATA[<h1 id="Linuxä»‹ç»"><a href="#Linuxä»‹ç»" class="headerlink" title="Linuxä»‹ç»"></a>Linuxä»‹ç»</h1><h2 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1.æ¦‚è¿°"></a>1.æ¦‚è¿°</h2><p><img src="D:\markdown(typora)ä½¿ç”¨æ•™ç¨‹.assets\2683F7BA416692134E45A0C96255C5A7.png"></p><hr><h2 id="2-Linuxä¹‹çˆ¶"><a href="#2-Linuxä¹‹çˆ¶" class="headerlink" title="2.Linuxä¹‹çˆ¶"></a>2.Linuxä¹‹çˆ¶</h2><p><img src="D:\markdown(typora)ä½¿ç”¨æ•™ç¨‹.assets\A2259D8123737C9775D672FECEEFDF2D.png"></p><hr><h2 id="3-ä¸»è¦å‘è¡Œç‰ˆæœ¬"><a href="#3-ä¸»è¦å‘è¡Œç‰ˆæœ¬" class="headerlink" title="3.ä¸»è¦å‘è¡Œç‰ˆæœ¬"></a>3.ä¸»è¦å‘è¡Œç‰ˆæœ¬</h2><p><img src="D:\markdown(typora)ä½¿ç”¨æ•™ç¨‹.assets\BB0902C19CE1F75DEE276585593DC80A.png"></p><blockquote><p><strong>Linux</strong>æ˜¯ä¸€ä¸ª<strong>å†…æ ¸</strong>ï¼Œå…¶ä»–å„ç§å‘è¡Œç‰ˆéƒ½æ˜¯åœ¨å†…æ ¸ä¸Šçš„è¿›ä¸€æ­¥<strong>å°è£…</strong></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ³›å‹ä¾èµ–æ³¨å…¥</title>
      <link href="/2024/02/16/%E6%B3%9B%E5%9E%8B%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/"/>
      <url>/2024/02/16/%E6%B3%9B%E5%9E%8B%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/</url>
      
        <content type="html"><![CDATA[<h1 id="æ³›å‹ä¾èµ–æ³¨å…¥"><a href="#æ³›å‹ä¾èµ–æ³¨å…¥" class="headerlink" title="æ³›å‹ä¾èµ–æ³¨å…¥"></a>æ³›å‹ä¾èµ–æ³¨å…¥</h1><p>[TOC]</p><h2 id="åŸºæœ¬è¯´æ˜"><a href="#åŸºæœ¬è¯´æ˜" class="headerlink" title="åŸºæœ¬è¯´æ˜"></a>åŸºæœ¬è¯´æ˜</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240114195428691.png"></p><h3 id="æ¡ˆä¾‹åˆ†æ"><a href="#æ¡ˆä¾‹åˆ†æ" class="headerlink" title="æ¡ˆä¾‹åˆ†æ"></a>æ¡ˆä¾‹åˆ†æ</h3><p><strong>è¦æ±‚ï¼šå°†å¤šä¸ªDaoå¯¹è±¡ä½œä¸ºå±æ€§æ³¨å…¥åˆ°å¤šä¸ªServiceå¯¹è±¡ä¸­ï¼Œæ€ä¹ˆåšï¼Ÿ</strong></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240114225329629.png"></p><p><strong><code>ä¼ ç»Ÿæ–¹æ³•</code>ï¼šå°†å¤šä¸ªDaoå¯¹è±¡è£…é…&#x2F;æ³¨å…¥åˆ°Serviceå¯¹è±¡ä¸­ -&gt; åˆ†åˆ«å¯¹Daoå¯¹è±¡æ ‡è¯†idå¹¶å¼•ç”¨(&#x3D;&#x3D;é—®é¢˜ï¼šéº»çƒ¦&#x3D;&#x3D;)</strong></p><p><strong><code>æ³›å‹ä¾èµ–æ³¨å…¥</code>ï¼šServiceå’ŒDaoéƒ½æœ‰è‡ªå·±çˆ¶ç±» -&gt; çˆ¶ç±»ä¹‹é—´è£…é…(BaseDaoè£…é…åˆ°BaseServiceï¼Œå½¢å¼ä¸Šï¼Œå› ä¸ºä¸ä¼šå®ä¾‹åŒ–)ï¼Œ<u>åœ¨å¾—åˆ°BaseServiceå¯¹è±¡æ—¶ä¼ å…¥æ³›å‹(Daoç±»)</u>ï¼Œå³å¯å®Œæˆè£…é…ã€‚</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240114231608796.png" alt="" style="zoom: 67%;" /><p>Bookç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>depinjection</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>Phoneç±»</p><pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">package com.lhyedu.spring.depinjection;public class Phone &#123;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>BaseDaoç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>depinjection</span><span class="token punctuation">;</span><span class="token comment">//è‡ªå®šä¹‰æ³›å‹ç±»ï¼Œå­ç±»ç»§æ‰¿æ—¶å°±è¦ä¼ å‚æ•°</span><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">BaseDao</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>BookDaoç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>depinjection</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PhoneDao</span> <span class="token keyword">extends</span> <span class="token class-name">BaseDao</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Phone</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"PhoneDao çš„ save()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>PhoneDaoç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>depinjection</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Repository</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Repository</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PhoneDao</span> <span class="token keyword">extends</span> <span class="token class-name">BaseDao</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Phone</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"PhoneDao çš„ save()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>BaseServiceç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>depinjection</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BaseService</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Autowired</span><span class="token punctuation">(</span>required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">BaseDao</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> baseDao<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        baseDao<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>BookServiceç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>depinjection</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookService</span> <span class="token keyword">extends</span> <span class="token class-name">BaseService</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Book</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span><span class="token comment">//é€šè¿‡æ³›å‹ä¼ å…¥T=Book</span>    <span class="token comment">//çˆ¶ç±»BaseServiceæœ‰BaseDaoå±æ€§</span>    <span class="token comment">//BaseDao&lt;T>å¯å°†æ³›å‹Tæ³¨å…¥å­ç±»</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>PhoneServiceç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>depinjection</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PhoneService</span> <span class="token keyword">extends</span> <span class="token class-name">BaseService</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Phone</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span><span class="token comment">//é€šè¿‡æ³›å‹ä¼ å…¥T=Phone</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBeanTest</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//é€šè¿‡"æ³›å‹ä¾èµ–"é…ç½®bean</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setProByDependencyInjection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>                <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">PhoneService</span> phoneService <span class="token operator">=</span> ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"phoneService"</span><span class="token punctuation">,</span> <span class="token class-name">PhoneService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        phoneService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å®é™…è°ƒç”¨å±æ€§phoneDaoçš„saveæ–¹æ³•</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">PhoneDao</span> çš„ <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ioc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springæ¨¡æ‹Ÿ-SpringåŸºäºæ³¨è§£é…ç½®çš„ç¨‹åº</title>
      <link href="/2024/02/16/Spring%E6%A8%A1%E6%8B%9F-Spring%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E9%85%8D%E7%BD%AE%E7%9A%84%E7%A8%8B%E5%BA%8F/"/>
      <url>/2024/02/16/Spring%E6%A8%A1%E6%8B%9F-Spring%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E9%85%8D%E7%BD%AE%E7%9A%84%E7%A8%8B%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="Springæ¨¡æ‹Ÿâ€”SpringåŸºäºæ³¨è§£é…ç½®çš„ç¨‹åº"><a href="#Springæ¨¡æ‹Ÿâ€”SpringåŸºäºæ³¨è§£é…ç½®çš„ç¨‹åº" class="headerlink" title="Springæ¨¡æ‹Ÿâ€”SpringåŸºäºæ³¨è§£é…ç½®çš„ç¨‹åº"></a>Springæ¨¡æ‹Ÿâ€”SpringåŸºäºæ³¨è§£é…ç½®çš„ç¨‹åº</h1><ol><li><strong>è‡ªå·±å†™ä¸€ä¸ªç®€å•çš„Springå®¹å™¨ï¼Œé€šè¿‡è¯»å–ç±»çš„æ³¨è§£(@Component @Controller @Service @Reponsitory)ï¼Œå°†å¯¹è±¡æ³¨å…¥åˆ°IOCå®¹å™¨ä¸­ã€‚</strong></li><li><strong>ä¹Ÿå°±æ˜¯è¯´ã€‚ä¸ä½¿ç”¨SpringåŸç”Ÿæ¡†æ¶ï¼Œè‡ªå·±ä½¿ç”¨IO+Annotation+åå°„+é›†åˆ å®ç°ï¼Œæ‰“é€šSpringæ³¨è§£æ–¹å¼çš„è®¡æ•°ç—›ç‚¹ã€‚</strong></li></ol><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240109092903430.png" alt="image-20240109092903430"></p><hr><p><strong>é¡¹ç›®ç»“æ„ï¼š</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240110105107756.png" alt="" style="zoom: 67%;" /><p><strong>MyComponentç±»</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>component</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span><span class="token comment">/** * @Component:æ ‡è¯†è¯¥ç±»æ˜¯ä¸ªç»„ä»¶ï¼Œæ˜¯ä¸€ä¸ªé€šç”¨çš„æ³¨è§£ */</span><span class="token annotation punctuation">@Component</span><span class="token punctuation">(</span><span class="token string">"lhy1"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ComponentScanæ³¨è§£</strong></p><blockquote><p>&#x3D;&#x3D;<strong>è‡ªå®šä¹‰æ³¨è§£</strong>&#x3D;&#x3D;</p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>annotation</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ElementType</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Retention</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RetentionPolicy</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Target</span></span><span class="token punctuation">;</span><span class="token comment">//@Target(ElementType.TYPE)æŒ‡å®šæˆ‘ä»¬çš„ComponentScanæ³¨è§£å¯ä»¥ä¿®é¥°Typeç¨‹åºå…ƒç´ </span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">)</span><span class="token comment">//@Retention(RetentionPolicy.RUNTIME)æŒ‡å®šæ³¨è§£ä¿ç•™èŒƒå›´</span><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">ComponentScan</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>LhySpringConfigç±»</strong></p><blockquote><p><strong>ä½œç”¨ï¼šç±»ä¼¼äºSpringåŸç”Ÿæ¡†æ¶ä¸‹çš„ <em>&#x3D;&#x3D;Beans.xmlæ–‡ä»¶&#x3D;&#x3D;</em></strong></p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>annotation</span><span class="token punctuation">;</span><span class="token comment">/** * è¿™æ˜¯ä¸€ä¸ªé…ç½®ä¹‹ç±» * ä½œç”¨ï¼šç±»ä¼¼ï¼šåŸç”ŸSpringæ¡†æ¶çš„ beans.xmlæ–‡ä»¶ */</span><span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"com.lhyedu.spring.component"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LhySpringConfig</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>LhySpringApplicationContextç±»</strong></p><blockquote><p><strong>ä½œç”¨ï¼šç±»ä¼¼äºSpringåŸç”Ÿæ¡†æ¶ä¸‹çš„ <em>&#x3D;&#x3D;iocå®¹å™¨&#x3D;&#x3D;</em></strong></p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>annotation</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Controller</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Repository</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">File</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">URL</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ConcurrentHashMap</span></span><span class="token punctuation">;</span><span class="token comment">/** * ç±»ä¼¼äºSpringåŸç”Ÿæ¡†æ¶çš„ IOC */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LhySpringApplicationContext</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Class</span> configClass<span class="token punctuation">;</span>    <span class="token comment">//iocå­˜æ”¾çš„å°±æ˜¯é€šè¿‡åå°„åˆ›å»ºçš„å¯¹è±¡</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> ioc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//æ„é€ å™¨</span>    <span class="token keyword">public</span> <span class="token class-name">LhySpringApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">Class</span> configClass<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>configClass <span class="token operator">=</span> configClass<span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"this.configClass = "</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>configClass<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è·å–è¦æ‰«æçš„åŒ…</span>        <span class="token comment">//1.å¾—åˆ°configClassçš„ @ComponentScan(value = "com.lhyedu.spring.component")æ³¨è§£</span>        <span class="token class-name">ComponentScan</span> componentScan <span class="token operator">=</span>                <span class="token punctuation">(</span><span class="token class-name">ComponentScan</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>configClass<span class="token punctuation">.</span><span class="token function">getDeclaredAnnotation</span><span class="token punctuation">(</span><span class="token class-name">ComponentScan</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//2.é€šè¿‡ComponentScançš„valueå¾—åˆ°è¦æ‰«æçš„åŒ…</span>        <span class="token class-name">String</span> path <span class="token operator">=</span> componentScan<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//3.è·å–æ‰«æè·¯å¾„ä¸‹çš„æ‰€æœ‰ç±»æ–‡ä»¶(.classæ–‡ä»¶)</span>        <span class="token comment">//(1)å…ˆè¦å¾—åˆ°ç±»çš„åŠ è½½å™¨</span>        <span class="token class-name">ClassLoader</span> classLoader <span class="token operator">=</span> <span class="token class-name">LhySpringApplicationContext</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//(2)é€šè¿‡ç±»åŠ è½½å™¨ è·å–åˆ°è¦æ‰«æåŒ…çš„url</span>        <span class="token comment">//å°†"com.lhyedu.spring.component"æ¢ä¸º"com/lhyedu/spring/component"</span>        path <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">,</span> <span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//file:/D:/lhy_spring/spring5/out/production/spring5/com/lhyedu/spring/component</span>        <span class="token class-name">URL</span> resource <span class="token operator">=</span> classLoader<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//3.å°†è¦åŠ è½½çš„èµ„æºè·¯å¾„ä¸‹çš„æ–‡ä»¶è¿›è¡Œéå†(I/O)</span>        <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>resource<span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ–‡ä»¶å¯èƒ½æ˜¯:æ™®é€šæ–‡ä»¶/ç›®å½•æ–‡ä»¶</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">//è‹¥ä¸ºç›®å½•æ–‡ä»¶</span>            <span class="token class-name">File</span><span class="token punctuation">[</span><span class="token punctuation">]</span> files <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">listFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">File</span> f <span class="token operator">:</span> files<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">//è·å–å½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶(.classæ–‡ä»¶)</span>                <span class="token class-name">String</span> fileAbsolutePath <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// System.out.println("======================================");</span>                <span class="token comment">//System.out.println("æ–‡ä»¶çš„ç»å¯¹è·¯å¾„=" + fileAbsolutePath);</span>                <span class="token comment">//(1)è·å–ç±»å</span>                <span class="token comment">//file:/D:/.../com/lhyedu/spring/component/UserDao.class</span>                <span class="token comment">//åˆ‡å‰²æˆ:UserDao</span>                <span class="token class-name">String</span> className <span class="token operator">=</span> fileAbsolutePath                        <span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>fileAbsolutePath<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">"\\"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>                                fileAbsolutePath<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">".class"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//className = UserDao</span>                <span class="token comment">//(2)è·å–ç±»çš„å…¨è·¯å¾„(å…¨ç±»å)</span>                <span class="token class-name">String</span> classFullPath <span class="token operator">=</span>                        path<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> <span class="token string">"."</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"."</span> <span class="token operator">+</span> className<span class="token punctuation">;</span>                <span class="token comment">//(3)åˆ¤æ–­è¯¥ç±»æ˜¯å¦éœ€è¦æ³¨å…¥åˆ°å®¹å™¨ä¸­(è¿‡æ»¤æ²¡åŠ æ³¨è§£çš„ç±»)</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    <span class="token comment">//è¿™æ˜¯å°±å¾—åˆ°äº†è¯¥ç±»(classFullPath)å¯¹åº”çš„classå¯¹è±¡</span>                    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> aClass <span class="token operator">=</span> classLoader<span class="token punctuation">.</span><span class="token function">loadClass</span><span class="token punctuation">(</span>classFullPath<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">//åˆ¤æ–­æ˜¯å¦æœ‰æ³¨è§£</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>aClass<span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">Component</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token operator">||</span>                        aClass<span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">Controller</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token operator">||</span>                        aClass<span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">Service</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token operator">||</span>                        aClass<span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">Repository</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        <span class="token comment">//å°†æ³¨è§£çš„valueè®¾ä¸ºå¯¹è±¡çš„åå­—</span>                        <span class="token comment">//ä»…ä»¥Componentä¸ºä¾‹ï¼Œå…¶ä»–åŒç†...</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span>aClass<span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">Component</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                            <span class="token class-name">Component</span> component <span class="token operator">=</span> aClass<span class="token punctuation">.</span><span class="token function">getDeclaredAnnotation</span><span class="token punctuation">(</span><span class="token class-name">Component</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                            <span class="token class-name">String</span> id <span class="token operator">=</span> component<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                                className <span class="token operator">=</span> id<span class="token punctuation">;</span>                            <span class="token punctuation">&#125;</span>                        <span class="token punctuation">&#125;</span>                        <span class="token comment">//è¿™æ˜¯å°±å¯ä»¥åå°„å¯¹è±¡ï¼Œå¹¶æ”¾å…¥å®¹å™¨ä¸­</span>                        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>classFullPath<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token class-name">Object</span> instance <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment">//æ”¾å…¥åˆ°å®¹å™¨ä¸­</span>                        ioc<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>className<span class="token punctuation">,</span> instance<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> ioc<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>Testç±»(ä¸»æ–¹æ³•)</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>annotation</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//è¿™é‡Œç›¸å½“äºï¼š</span>        <span class="token comment">//ApplicationContext ioc =</span>        <span class="token comment">//    new ClassPathXmlApplicationContext("beans03.xml");</span>        <span class="token class-name">LhySpringApplicationContext</span> ioc <span class="token operator">=</span>                <span class="token keyword">new</span> <span class="token class-name">LhySpringApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">LhySpringConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Object</span> bean <span class="token operator">=</span> ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"lhy1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>è¿è¡Œç»“æœ</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">this</span><span class="token punctuation">.</span>configClass <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span>LhySpringConfig</span>com<span class="token operator">/</span>lhyedu<span class="token operator">/</span>spring<span class="token operator">/</span>component<span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>component<span class="token punctuation">.</span></span>MyComponent</span><span class="token annotation punctuation">@30f39991</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240110105601810.png"></p>]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ioc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springé…ç½®Bean</title>
      <link href="/2024/02/16/Spring%E9%85%8D%E7%BD%AEBean/"/>
      <url>/2024/02/16/Spring%E9%85%8D%E7%BD%AEBean/</url>
      
        <content type="html"><![CDATA[<h1 id="Springé…ç½®Bean"><a href="#Springé…ç½®Bean" class="headerlink" title="Springé…ç½®Bean"></a>Springé…ç½®Bean</h1><p>[TOC]</p><p><strong>ä»¥Monsterç±»ä¸ºä¾‹</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>bean</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Monster</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> monsterId<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> skill<span class="token punctuation">;</span>    <span class="token comment">//æ— å‚æ„é€ å™¨ä¸€å®šè¦å†™ï¼Œåå°„æ—¶éœ€è¦ä½¿ç”¨æ— å‚æ„é€ å™¨ï¼ï¼ï¼</span>    <span class="token keyword">public</span> <span class="token class-name">Monster</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">Monster</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> monsterId<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> skill<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>monsterId <span class="token operator">=</span> monsterId<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>skill <span class="token operator">=</span> skill<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//setæ–¹æ³•ä¸€å®šè¦å†™ï¼Œåå°„æ—¶ç”¨è¿™ä¸ªæ–¹æ³•åˆå§‹åŒ–ç±»çš„å±æ€§ï¼ï¼ï¼</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMonsterId</span><span class="token punctuation">(</span><span class="token keyword">int</span> monsterId<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>monsterId <span class="token operator">=</span> monsterId<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSkill</span><span class="token punctuation">(</span><span class="token class-name">String</span> skill<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>skill <span class="token operator">=</span> skill<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"Monster&#123;"</span> <span class="token operator">+</span>                <span class="token string">"monsterId='"</span> <span class="token operator">+</span> monsterId <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>                <span class="token string">", name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>                <span class="token string">", skill='"</span> <span class="token operator">+</span> skill <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>                <span class="token char">'&#125;'</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åŸºäºxmlæ–‡ä»¶é…ç½®"><a href="#åŸºäºxmlæ–‡ä»¶é…ç½®" class="headerlink" title="åŸºäºxmlæ–‡ä»¶é…ç½®"></a>åŸºäºxmlæ–‡ä»¶é…ç½®</h2><h3 id="1-åˆ›å»ºBeanå¯¹è±¡"><a href="#1-åˆ›å»ºBeanå¯¹è±¡" class="headerlink" title="1.åˆ›å»ºBeanå¯¹è±¡"></a>1.åˆ›å»ºBeanå¯¹è±¡</h3><h4 id="â‘ é€šè¿‡ç±»å‹è·å–bean"><a href="#â‘ é€šè¿‡ç±»å‹è·å–bean" class="headerlink" title="â‘ é€šè¿‡ç±»å‹è·å–bean"></a>â‘ é€šè¿‡ç±»å‹è·å–bean</h4><p><strong>è¦æ±‚iocå®¹å™¨ä¸­çš„åŒä¸€ä¸ªç±»çš„beanåªèƒ½æœ‰ä¸€ä¸ªï¼Œå¦åˆ™ä¼šæŠ›å‡ºNoUniqueBeanDefinitionExceptionï¼</strong></p><blockquote><p><strong>åº”ç”¨åœºæ™¯ï¼šæ¯”å¦‚XxxAction&#x2F;Servlet&#x2F;Controlleråœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­åªéœ€è¦ä¸€ä¸ªå¯¹è±¡å®ä¾‹(å•ä¾‹)</strong></p></blockquote><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.bean.Monster<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>monsterId<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>200<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ç™½éª¨ç²¾<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>skill<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>åƒäºº<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBeanTest</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBeanByConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>                <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Monster</span> bean <span class="token operator">=</span> ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Monster</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Monster</span><span class="token punctuation">&#123;</span>monsterId<span class="token operator">=</span><span class="token char">'2'</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token char">'èœ˜è››ç²¾'</span><span class="token punctuation">,</span> skill<span class="token operator">=</span><span class="token char">'åä¸'</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="â‘¡é€šè¿‡æ„é€ å™¨é…ç½®bean"><a href="#â‘¡é€šè¿‡æ„é€ å™¨é…ç½®bean" class="headerlink" title="â‘¡é€šè¿‡æ„é€ å™¨é…ç½®bean"></a>â‘¡é€šè¿‡æ„é€ å™¨é…ç½®bean</h4><p>æ–¹æ³•1</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--åœ¨Springçš„IOCå®¹å™¨ä¸­ï¼Œé€šè¿‡ æ„é€ å™¨ é…ç½®bean--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.bean.Monster<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>monster03<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--indexæ ‡è¯† æ„é€ å™¨çš„å‚æ•°ä¸‹æ ‡--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>èœ˜è››ç²¾<span class="token punctuation">"</span></span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>åä¸<span class="token punctuation">"</span></span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ–¹æ³•2</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.bean.Monster<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>monster04<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--indexæ ‡è¯† æ„é€ å™¨çš„å‚æ•°ä¸‹æ ‡--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>java.lang.Integer<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ç™½éª¨ç²¾<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>java.lang.String<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ç™½éª¨é­<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>java.lang.String<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBeanTest</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBeanByConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>                <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Monster</span> monster03 <span class="token operator">=</span> ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"monster03"</span><span class="token punctuation">,</span> <span class="token class-name">Monster</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>monster03<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Monster</span> monster04 <span class="token operator">=</span> ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"monster04"</span><span class="token punctuation">,</span> <span class="token class-name">Monster</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>monster04<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Monster</span><span class="token punctuation">&#123;</span>monsterId<span class="token operator">=</span><span class="token char">'2'</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token char">'èœ˜è››ç²¾'</span><span class="token punctuation">,</span> skill<span class="token operator">=</span><span class="token char">'åä¸'</span><span class="token punctuation">&#125;</span><span class="token class-name">Monster</span><span class="token punctuation">&#123;</span>monsterId<span class="token operator">=</span><span class="token char">'3'</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token char">'ç™½éª¨ç²¾'</span><span class="token punctuation">,</span> skill<span class="token operator">=</span><span class="token char">'ç™½éª¨é­'</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="2-æ³¨å…¥å…¶ä»–beanå¯¹è±¡-å¸¸ç”¨"><a href="#2-æ³¨å…¥å…¶ä»–beanå¯¹è±¡-å¸¸ç”¨" class="headerlink" title="2.æ³¨å…¥å…¶ä»–beanå¯¹è±¡(å¸¸ç”¨)"></a>2.æ³¨å…¥å…¶ä»–beanå¯¹è±¡(å¸¸ç”¨)</h3><p><strong>iocå®¹å™¨ä¸­çš„æŸä¸ªbeanå¯¹è±¡çš„ä¸šåŠ¡é€»è¾‘éœ€è¦å¼•ç”¨åˆ°iocå®¹å™¨çš„å¦ä¸€ä¸ªbeanå¯¹è±¡</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240111153013789.png" alt="" style="zoom:50%;" /><p>MemberDAOImplç±»(Daoå±‚)</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>dao</span><span class="token punctuation">;</span><span class="token comment">//Daoç±»</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MemberDAOImpl</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//æ„é€ å™¨</span>    <span class="token keyword">public</span> <span class="token class-name">MemberDAOImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"MemberDAOImpl æ„é€ å™¨..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"MemberDAOImpl addæ–¹æ³•..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>MemberServiceImplç±»(Serviceå±‚)</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span></span><span class="token class-name">Service</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>dao<span class="token punctuation">.</span></span><span class="token class-name">MemberDAOImpl</span></span><span class="token punctuation">;</span><span class="token comment">//Serviceå±‚</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MemberServiceImpl</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">MemberDAOImpl</span> memberDAO<span class="token punctuation">;</span><span class="token comment">//å±æ€§:å¼•ç”¨DAOå±‚å¯¹è±¡</span>    <span class="token comment">//getter&amp;setter</span>    <span class="token keyword">public</span> <span class="token class-name">MemberDAOImpl</span> <span class="token function">getMemberDAO</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> memberDAO<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemberDAO</span><span class="token punctuation">(</span><span class="token class-name">MemberDAOImpl</span> memberDAO<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>memberDAO <span class="token operator">=</span> memberDAO<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token comment">//è°ƒç”¨Daoå±‚çš„å±æ€§çš„æ–¹æ³•ï¼</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"MemberServiceImpl addæ–¹æ³•..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        memberDAO<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>beans.xml</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span><span class="token constant">DAO</span>å±‚<span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"memberDAO"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"com.lhyedu.spring.dao.MemberDAOImpl"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span><span class="token class-name">Service</span>å±‚<span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"ms"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"com.lhyedu.spring.Service.MemberServiceImpl"</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>propertyæ ‡ç­¾å†…çš„refæ ‡ç­¾ï¼Œå¡«å¼•ç”¨çš„ å¯¹è±¡id<span class="token operator">--</span><span class="token operator">></span>    <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"memberDAO"</span> ref<span class="token operator">=</span><span class="token string">"memberDAO"</span><span class="token operator">/</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBeanTest</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBeanByRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>                <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">MemberServiceImpl</span> ms <span class="token operator">=</span> ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"ms"</span><span class="token punctuation">,</span> <span class="token class-name">MemberServiceImpl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ms<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">MemberDAOImpl</span> æ„é€ å™¨<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token class-name">MemberServiceImpl</span> addæ–¹æ³•<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token class-name">MemberDAOImpl</span> addæ–¹æ³•<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="3-æ³¨å…¥å†…éƒ¨beanå¯¹è±¡"><a href="#3-æ³¨å…¥å†…éƒ¨beanå¯¹è±¡" class="headerlink" title="3.æ³¨å…¥å†…éƒ¨beanå¯¹è±¡"></a>3.æ³¨å…¥å†…éƒ¨beanå¯¹è±¡</h3><p><strong>ç›´æ¥å°†æŸä¸ªbean ä½œä¸ºå±æ€§(å†…éƒ¨beanå¯¹è±¡)æ³¨å…¥å¦ä¸€ä¸ªbeanä¸­ã€‚</strong></p><p>ä»¥å‰é¢çš„MemberDAOImplç±»(Daoå±‚)å’ŒMemberServiceImplç±»(Serviceå±‚)ä¸ºä¾‹ï¼š</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ms2<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.Service.MemberServiceImpl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>memberDAO<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--æ³¨å…¥ä¸€ä¸ªå†…éƒ¨bean--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.dao.MemberDAOImpl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong><u>ä»¥Masterç±»ä¸ºä¾‹</u></strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Master</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Monster</span><span class="token punctuation">></span></span> monsterList<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Monster</span><span class="token punctuation">></span></span> monsterMap<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Monster</span><span class="token punctuation">></span></span> monsterSet<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> monsterName<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Properties</span> pros<span class="token punctuation">;</span><span class="token comment">//HashTableçš„å­ç±»ï¼Œæ˜¯key-valueçš„å½¢å¼</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMonsterList</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Monster</span><span class="token punctuation">></span></span> monsterList<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>monsterList <span class="token operator">=</span> monsterList<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMonsterMap</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Monster</span><span class="token punctuation">></span></span> monsterMap<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>monsterMap <span class="token operator">=</span> monsterMap<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMonsterSet</span><span class="token punctuation">(</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Monster</span><span class="token punctuation">></span></span> monsterSet<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>monsterSet <span class="token operator">=</span> monsterSet<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMonsterName</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> monsterName<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>monsterName <span class="token operator">=</span> monsterName<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPros</span><span class="token punctuation">(</span><span class="token class-name">Properties</span> pros<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>pros <span class="token operator">=</span> pros<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="â‘ æ³¨å…¥Listå±æ€§"><a href="#â‘ æ³¨å…¥Listå±æ€§" class="headerlink" title="â‘ æ³¨å…¥Listå±æ€§"></a>â‘ æ³¨å…¥Listå±æ€§</h4><p>beans.xml</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--é…ç½®Masterå¯¹è±¡--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.bean.Master<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>master<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å¤ªä¸Šè€å›<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!--ç»™Listå±æ€§èµ‹å€¼--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>monsterList<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>monster01<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>monster02<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.bean.Monster<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>è€é¼ ç²¾<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="â‘¡æ³¨å…¥Mapå±æ€§"><a href="#â‘¡æ³¨å…¥Mapå±æ€§" class="headerlink" title="â‘¡æ³¨å…¥Mapå±æ€§"></a>â‘¡æ³¨å…¥Mapå±æ€§</h4><p>beans.xml</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--é…ç½®Masterå¯¹è±¡--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.bean.Master<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>master<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å¤ªä¸Šè€å›<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!--ç»™Mapå±æ€§èµ‹å€¼--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>monsterMap<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>map</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--key--></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>monsterket01<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>monster01<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token comment">&lt;!--value--></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>entry</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>map</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="â‘¢æ³¨å…¥Setå±æ€§"><a href="#â‘¢æ³¨å…¥Setå±æ€§" class="headerlink" title="â‘¢æ³¨å…¥Setå±æ€§"></a>â‘¢æ³¨å…¥Setå±æ€§</h4><p>beans.xml</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--é…ç½®Masterå¯¹è±¡--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.bean.Master<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>master<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å¤ªä¸Šè€å›<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!--ç»™Setå±æ€§èµ‹å€¼--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>monsterSet<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>monster01<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.bean.Monster<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ç‰›é­”ç‹<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>monsterId<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>999<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>skill<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>unknown<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="â‘£æ³¨å…¥Array-æ•°ç»„-å±æ€§"><a href="#â‘£æ³¨å…¥Array-æ•°ç»„-å±æ€§" class="headerlink" title="â‘£æ³¨å…¥Array(æ•°ç»„)å±æ€§"></a>â‘£æ³¨å…¥Array(æ•°ç»„)å±æ€§</h4><p>beans.xml</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--é…ç½®Masterå¯¹è±¡--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.bean.Master<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>master<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å¤ªä¸Šè€å›<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!--ç»™Array(æ•°ç»„)å±æ€§èµ‹å€¼--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>monsterName<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>array</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>é‡‘è§’å¤§ç‹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>é“¶è§’å¤§ç‹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>array</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="â‘¤æ³¨å…¥Propertieså±æ€§"><a href="#â‘¤æ³¨å…¥Propertieså±æ€§" class="headerlink" title="â‘¤æ³¨å…¥Propertieså±æ€§"></a>â‘¤æ³¨å…¥Propertieså±æ€§</h4><p>beans.xml</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--é…ç½®Masterå¯¹è±¡--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.bean.Master<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>master<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å¤ªä¸Šè€å›<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!--ç»™Propertieså±æ€§èµ‹å€¼--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pros<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>props</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>k1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Javaå·¥ç¨‹å¸ˆ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>k2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å‰ç«¯å·¥ç¨‹å¸ˆ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>k3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å¤§æ•°æ®å·¥ç¨‹å¸ˆ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>props</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-çº§è”å±æ€§èµ‹å€¼"><a href="#4-çº§è”å±æ€§èµ‹å€¼" class="headerlink" title="4.çº§è”å±æ€§èµ‹å€¼"></a>4.çº§è”å±æ€§èµ‹å€¼</h3><p><strong>springçš„iocå®¹å™¨ï¼Œå¯ä»¥&#x3D;&#x3D;ç›´æ¥ç»™beanå¯¹è±¡çš„å±æ€§çš„å±æ€§èµ‹å€¼&#x3D;&#x3D;ï¼Œå³ï¼šçº§è”å±æ€§èµ‹å€¼</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240111210408994.png" alt="" style="zoom:50%;" /><p>Deptç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>bean</span><span class="token punctuation">;</span><span class="token comment">//éƒ¨é—¨ç±»</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dept</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"Dept&#123;"</span> <span class="token operator">+</span>                <span class="token string">"name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>                <span class="token char">'&#125;'</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Empç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>bean</span><span class="token punctuation">;</span><span class="token comment">//å‘˜å·¥ç±»</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Emp</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Dept</span> dept<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Emp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> name<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">Dept</span> <span class="token function">getDept</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> dept<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDept</span><span class="token punctuation">(</span><span class="token class-name">Dept</span> dept<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>dept <span class="token operator">=</span> dept<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"Emp&#123;"</span> <span class="token operator">+</span>                <span class="token string">"name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>                <span class="token string">", dept="</span> <span class="token operator">+</span> dept <span class="token operator">+</span>                <span class="token char">'&#125;'</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>beans.xml</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--é…ç½®Deptå¯¹è±¡--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.bean.Dept<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dept<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--é…ç½®Empå¯¹è±¡--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.bean.Emp<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>emp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--ç»™Empç±»çš„ å±æ€§çš„å±æ€§èµ‹å€¼--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lhy<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dept<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dept<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!--è¿™é‡Œå¸Œæœ›ç»™deptçš„nameå±æ€§èµ‹å€¼[çº§è”å±æ€§èµ‹å€¼] -> æ ¼å¼ï¼š--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dept.name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Javaå¼€å‘éƒ¨é—¨<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-JAVA" data-language="JAVA"><code class="language-JAVA">public class SpringBeanTest &#123;    @Test    public void setProByRelation() &#123;        ApplicationContext ioc &#x3D;                new ClassPathXmlApplicationContext(&quot;beans.xml&quot;);        Emp emp &#x3D; ioc.getBean(&quot;emp&quot;, Emp.class);        System.out.println(emp);    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Emp</span><span class="token punctuation">&#123;</span>name<span class="token operator">=</span><span class="token char">'lhy'</span><span class="token punctuation">,</span> dept<span class="token operator">=</span><span class="token class-name">Dept</span><span class="token punctuation">&#123;</span>name<span class="token operator">=</span>'<span class="token class-name">Java</span>å¼€å‘éƒ¨é—¨'<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="5-å·¥å‚æ¨¡å¼è·å–beanå¯¹è±¡"><a href="#5-å·¥å‚æ¨¡å¼è·å–beanå¯¹è±¡" class="headerlink" title="5.å·¥å‚æ¨¡å¼è·å–beanå¯¹è±¡"></a>5.å·¥å‚æ¨¡å¼è·å–beanå¯¹è±¡</h3><h4 id="â‘ é™æ€å·¥å‚è·å–beanå¯¹è±¡"><a href="#â‘ é™æ€å·¥å‚è·å–beanå¯¹è±¡" class="headerlink" title="â‘ é™æ€å·¥å‚è·å–beanå¯¹è±¡"></a>â‘ é™æ€å·¥å‚è·å–beanå¯¹è±¡</h4><p><strong>åœ¨springçš„iocå®¹å™¨ï¼Œå¯ä»¥é€šè¿‡<u>é™æ€å·¥å‚</u>è·å–beanå¯¹è±¡ã€‚</strong></p><p>é™æ€å·¥å‚ç±»ï¼šMyStaticFactory</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>factory</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Monster</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span><span class="token comment">//é™æ€å·¥å‚ç±»ï¼Œå¯ä»¥è¿”å›Monsterå¯¹è±¡</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyStaticFactory</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Monster</span><span class="token punctuation">></span></span> monsterMap<span class="token punctuation">;</span>    <span class="token comment">//ä½¿ç”¨ é™æ€ä»£ç å— è¿›è¡Œåˆå§‹åŒ–</span>    <span class="token keyword">static</span> <span class="token punctuation">&#123;</span>        monsterMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        monsterMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"monster_01"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Monster</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">"é»„è¢æ€ª"</span><span class="token punctuation">,</span> <span class="token string">"ä¸€é˜³æŒ‡"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        monsterMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"monster_02"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Monster</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">"ä¹å¤´é‡‘é›•"</span><span class="token punctuation">,</span> <span class="token string">"å¦‚æ¥ç¥æŒ"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//[é‡ç‚¹ï¼]æä¾›ä¸€ä¸ªæ–¹æ³•è¿”å›Monsterå¯¹è±¡</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Monster</span> <span class="token function">getMonster</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> monsterMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>beans.xml</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--é…ç½®monsterå¯¹è±¡ï¼Œé€šè¿‡é™æ€å·¥å‚è·å–--></span><span class="token comment">&lt;!--é‡ç‚¹ï¼ï¼ï¼    1.classæ ‡ç­¾ï¼šå¡«å†™ é™æ€å·¥å‚ç±»çš„å…¨ç±»å    2.factory-methodæ ‡ç­¾ï¼šå¡«å†™è·å–å¯¹è±¡çš„æ–¹æ³•--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>m1<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.factory.MyStaticFactory<span class="token punctuation">"</span></span> <span class="token attr-name">factory-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getMonster<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--constructor-arg:factory-methodæ–¹æ³•çš„å‚æ•°--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>monster_01<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBeanTest</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getBeanByStaticFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>                <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Monster</span> m1 <span class="token operator">=</span> ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"m1"</span><span class="token punctuation">,</span> <span class="token class-name">Monster</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>m1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Monster</span><span class="token punctuation">&#123;</span>monsterId<span class="token operator">=</span><span class="token char">'100'</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token char">'é»„è¢æ€ª'</span><span class="token punctuation">,</span> skill<span class="token operator">=</span><span class="token char">'ä¸€é˜³æŒ‡'</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="â‘¡å®ä¾‹å·¥å‚è·å–beanå¯¹è±¡"><a href="#â‘¡å®ä¾‹å·¥å‚è·å–beanå¯¹è±¡" class="headerlink" title="â‘¡å®ä¾‹å·¥å‚è·å–beanå¯¹è±¡"></a>â‘¡å®ä¾‹å·¥å‚è·å–beanå¯¹è±¡</h4><p><strong>åœ¨springçš„iocå®¹å™¨ï¼Œå¯ä»¥é€šè¿‡<u>å®ä¾‹å·¥å‚</u>è·å–beanå¯¹è±¡ã€‚</strong></p><p>é™æ€å·¥å‚ç±»ï¼šMyInstanceFactory</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>factory</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Monster</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span><span class="token comment">//å®ä¾‹å·¥å‚ç±»ï¼Œå¯ä»¥è¿”å›Monsterå¯¹è±¡</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyInstanceFactory</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span>  <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Monster</span><span class="token punctuation">></span></span> monsterMap<span class="token punctuation">;</span>    <span class="token comment">//ä½¿ç”¨ é™æ€ä»£ç å— è¿›è¡Œåˆå§‹åŒ–</span>    <span class="token punctuation">&#123;</span>        monsterMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        monsterMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"monster_01"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Monster</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">"é»„è¢æ€ª"</span><span class="token punctuation">,</span> <span class="token string">"ä¸€é˜³æŒ‡"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        monsterMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"monster_02"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Monster</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">"ä¹å¤´é‡‘é›•"</span><span class="token punctuation">,</span> <span class="token string">"å¦‚æ¥ç¥æŒ"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">Monster</span> <span class="token function">getMonster</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> monsterMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>beans.xml</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--é…ç½®monsterå¯¹è±¡ï¼Œé€šè¿‡å®ä¾‹å·¥å‚è·å–--></span><span class="token comment">&lt;!--1.å…ˆé…ç½®å®ä¾‹å·¥å‚ç±»çš„bean--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mif<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.factory.MyInstanceFactory<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token comment">&lt;!--2.å†é…ç½®è¦å®ä¾‹å·¥å‚è¿”å›çš„ç±»å¯¹è±¡        factory-beanï¼šéœ€è¦ä½¿ç”¨çš„å®ä¾‹å·¥å‚çš„bean        factory-methodæ ‡ç­¾ï¼šå¡«å†™è·å–å¯¹è±¡çš„æ–¹æ³•--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>m2<span class="token punctuation">"</span></span> <span class="token attr-name">factory-bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mif<span class="token punctuation">"</span></span> <span class="token attr-name">factory-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getMonster<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--constructor-arg:factory-methodæ–¹æ³•çš„å‚æ•°--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>monster_01<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBeanTest</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getBeanByInstanceFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>                <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Monster</span> m2 <span class="token operator">=</span> ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"m2"</span><span class="token punctuation">,</span> <span class="token class-name">Monster</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>m2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Monster</span><span class="token punctuation">&#123;</span>monsterId<span class="token operator">=</span><span class="token char">'200'</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token char">'ä¹å¤´é‡‘é›•'</span><span class="token punctuation">,</span> skill<span class="token operator">=</span><span class="token char">'å¦‚æ¥ç¥æŒ'</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="â‘¢é€šè¿‡FactoryBeanè·å–å¯¹è±¡-é‡ç‚¹"><a href="#â‘¢é€šè¿‡FactoryBeanè·å–å¯¹è±¡-é‡ç‚¹" class="headerlink" title="â‘¢é€šè¿‡FactoryBeanè·å–å¯¹è±¡(é‡ç‚¹)"></a>â‘¢é€šè¿‡FactoryBeanè·å–å¯¹è±¡(é‡ç‚¹)</h4><p><strong>åœ¨Springçš„iocå®¹å™¨ï¼Œé€šè¿‡FactoryBeanè·å–beanå¯¹è±¡(é‡ç‚¹)ã€‚</strong></p><p><strong>é€šè¿‡åˆ›å»º ï¼šç±» implements FactoryBean<Monster>ã€‚ç»´æŠ¤ä¸€ä¸ª<code>Map</code>å’Œ<code>key</code>å±æ€§&#x3D;&#x3D;ï¼Œ&#x3D;&#x3D;å¹¶å®ç°ä»¥ä¸‹ä¸‰ä¸ªæ–¹æ³•ï¼š</strong></p><ol><li><code>getObject()</code>ï¼šè¿”å› Mapå±æ€§ä¸­ä¸keyValå¯¹åº”çš„ å¯¹è±¡</li><li><code>getObjectType()</code>ï¼šè¿”å› Mapå±æ€§ä¸­valueçš„.classå¯¹è±¡</li><li><code>isSingleton()</code>ï¼šæ˜¯å¦ä»¥å•ä¾‹å½¢å¼ä¿å­˜beanå¯¹è±¡</li></ol><p>MyFactoryBeanç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>factory</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Monster</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span></span><span class="token class-name">FactoryBean</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyFactoryBean</span> <span class="token keyword">implements</span> <span class="token class-name">FactoryBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Monster</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> key<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Monster</span><span class="token punctuation">></span></span> monster_map<span class="token punctuation">;</span>    <span class="token punctuation">&#123;</span>        monster_map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        monster_map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"monster03"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Monster</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">"é»„è¢æ€ª"</span><span class="token punctuation">,</span> <span class="token string">"ä¸€é˜³æŒ‡"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        monster_map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"monster04"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Monster</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">"ä¹å¤´é‡‘é›•"</span><span class="token punctuation">,</span> <span class="token string">"å¦‚æ¥ç¥æŒ"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setKey</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//è¿”å› Mapå±æ€§ä¸­ä¸keyValå¯¹åº”çš„ å¯¹è±¡</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Monster</span> <span class="token function">getObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> monster_map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//è¿”å› Mapå±æ€§ä¸­valueçš„.classå¯¹è±¡</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> <span class="token function">getObjectType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">Monster</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//æ˜¯å¦ä»¥å•ä¾‹å½¢å¼ä¿å­˜beanå¯¹è±¡</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>beans.xml</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--é…ç½®Monsterå¯¹è±¡ï¼Œé€šè¿‡FactoryBeanè·å–--></span><span class="token comment">&lt;!--classï¼šæŒ‡å®šä½¿ç”¨çš„FactoryBean    name="key"ï¼šæ ‡è¯†å±æ€§key; value="monster04":keyçš„å€¼--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>monster_04<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.factory.MyFactoryBean<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>key<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>monster04<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBeanTest</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getBeanByFactoryBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>                <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Monster</span> my_monster_05 <span class="token operator">=</span> ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"my_monster_05"</span><span class="token punctuation">,</span> <span class="token class-name">Monster</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>my_monster_05<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Monster</span><span class="token punctuation">&#123;</span>monsterId<span class="token operator">=</span><span class="token char">'100'</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token char">'é»„è¢æ€ª'</span><span class="token punctuation">,</span> skill<span class="token operator">=</span><span class="token char">'ä¸€é˜³æŒ‡'</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h2 id="Beanç›¸å…³"><a href="#Beanç›¸å…³" class="headerlink" title="Beanç›¸å…³"></a>Beanç›¸å…³</h2><h3 id="1-beané…ç½®ä¿¡æ¯é‡ç”¨-ç»§æ‰¿"><a href="#1-beané…ç½®ä¿¡æ¯é‡ç”¨-ç»§æ‰¿" class="headerlink" title="1.beané…ç½®ä¿¡æ¯é‡ç”¨(ç»§æ‰¿)"></a>1.beané…ç½®ä¿¡æ¯é‡ç”¨(ç»§æ‰¿)</h3><p><strong>åœ¨springçš„iocå®¹å™¨ä¸­ï¼Œæä¾›äº†ä¸€ç§ç»§æ‰¿çš„æ–¹å¼æ¥å®ç°beané…ç½®ä¿¡æ¯çš„é‡ç”¨ã€‚&#x3D;&#x3D;&gt;parentæ ‡ç­¾</strong></p><p>beans.xml</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup">    <span class="token comment">&lt;!--é…ç½®Monsterå¯¹è±¡--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>monster04<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.bean.Monster<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>monsterId<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>èœˆèš£ç²¾<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>skill<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å“²äºº<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--å†é…ç½®ä¸€ä¸ªMonsterå¯¹è±¡        ä½†è¿™ä¸ªå¯¹è±¡çš„å±æ€§å€¼ å’Œmonster04ä¸€æ ·ï¼ï¼        parentæ ‡ç­¾:è¡¨ç¤ºä¸parent="~"å¯¹è±¡çš„å±æ€§ä¸€è‡´--></span><span class="token comment">&lt;!--æ³¨æ„ï¼šå½“å†beanæ ‡ç­¾ä¸­åŠ å…¥ abstract="true"åï¼Œè¿™ä¸ªbeanåªèƒ½è¢«ç»§æ‰¿ï¼Œä¸èƒ½å®ä¾‹åŒ–ï¼--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>monster05<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.bean.Monster<span class="token punctuation">"</span></span> <span class="token attr-name">parent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>monster04<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBeanTest</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getBeanByExtend</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>                <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"monster04"</span><span class="token punctuation">,</span> <span class="token class-name">Monster</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"monster05"</span><span class="token punctuation">,</span> <span class="token class-name">Monster</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Monster</span><span class="token punctuation">&#123;</span>monsterId<span class="token operator">=</span><span class="token char">'10'</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token char">'èœˆèš£ç²¾'</span><span class="token punctuation">,</span> skill<span class="token operator">=</span><span class="token char">'å“²äºº'</span><span class="token punctuation">&#125;</span><span class="token class-name">Monster</span><span class="token punctuation">&#123;</span>monsterId<span class="token operator">=</span><span class="token char">'10'</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token char">'èœˆèš£ç²¾'</span><span class="token punctuation">,</span> skill<span class="token operator">=</span><span class="token char">'å“²äºº'</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="2-beanåˆ›å»ºé¡ºåº"><a href="#2-beanåˆ›å»ºé¡ºåº" class="headerlink" title="2.beanåˆ›å»ºé¡ºåº"></a>2.beanåˆ›å»ºé¡ºåº</h3><h4 id="â‘ beans-xmlè§£æé¡ºåº"><a href="#â‘ beans-xmlè§£æé¡ºåº" class="headerlink" title="â‘ beans.xmlè§£æé¡ºåº"></a>â‘ beans.xmlè§£æé¡ºåº</h4><p>Test1ç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>bean</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test1</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token class-name">Test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Test1æ„é€ å™¨è¢«è°ƒç”¨..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Test2ç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>bean</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test2</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token class-name">Test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Test2æ„é€ å™¨è¢«è°ƒç”¨..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><u><strong>åœ¨Springçš„iocå®¹å™¨ä¸­ï¼Œé»˜è®¤æ˜¯æŒ‰ç…§é…ç½®çš„é¡ºåºåˆ›å»ºbeanå¯¹è±¡ã€‚</strong></u></p><p>beans.xml</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--iocå®¹å™¨ä¸­ï¼Œé»˜è®¤æ˜¯æŒ‰ç…§é…ç½®çš„é¡ºåºåˆ›å»ºbeanå¯¹è±¡(åˆ›å»ºt1->åˆ›å»ºt2)--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>t1<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.bean.Test1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>t2<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.bean.Test2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBeanTest</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getBeanByCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>                <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Test1</span>æ„é€ å™¨è¢«è°ƒç”¨<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token class-name">Test2</span>æ„é€ å™¨è¢«è°ƒç”¨<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><u><strong>æ ¹æ®<code>depends-on</code>æ ‡ç­¾ï¼Œå¯æŒ‡å®šbeanåˆå§‹åŒ–çš„é¡ºåº(ä¾èµ–å…³ç³»)ã€‚</strong></u></p><p>beans.xml</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--depends-on="t2"æ ‡ç­¾:å…ˆåˆ›å»ºt2->å†åˆ›å»ºt1--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>t1<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.bean.Test1<span class="token punctuation">"</span></span> <span class="token attr-name">depends-on</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>t2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>t2<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.bean.Test2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBeanTest</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getBeanByCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>                <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Test2</span>æ„é€ å™¨è¢«è°ƒç”¨<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token class-name">Test1</span>æ„é€ å™¨è¢«è°ƒç”¨<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="â‘¡beanå¯¹è±¡ã®åˆ›å»ºé¡ºåº"><a href="#â‘¡beanå¯¹è±¡ã®åˆ›å»ºé¡ºåº" class="headerlink" title="â‘¡beanå¯¹è±¡ã®åˆ›å»ºé¡ºåº"></a>â‘¡beanå¯¹è±¡ã®åˆ›å»ºé¡ºåº</h4><p><strong>åˆ†æä¸¤ä¸ªbeanåˆ›å»ºçš„é¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--é…ç½®MemberDaoå¯¹è±¡--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.dao.MemberDAOImpl<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>memberDAO<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.Service.MemberServiceImpl<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>memberService<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>memberDAO<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>memberDAO<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li><strong>å…ˆåˆ›å»º id&#x3D;memberDAO</strong></li><li><strong>å†åˆ›å»º id&#x3D;memberService</strong></li><li><strong>å†è°ƒç”¨memberService.setMemberDAO()å®Œæˆå¼•ç”¨</strong></li></ol><p><strong>åˆ†æä¸¤ä¸ªbeanåˆ›å»ºçš„é¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.Service.MemberServiceImpl<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>memberService<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>memberDAO<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>memberDAO<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--é…ç½®MemberDaoå¯¹è±¡--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.dao.MemberDAOImpl<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>memberDAO<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li><strong>å…ˆåˆ›å»º id&#x3D;memberService</strong></li><li><strong>å†åˆ›å»º id&#x3D;memberDAO</strong></li><li><strong>å†è°ƒç”¨memberService.setMemberDAO()å®Œæˆå¼•ç”¨</strong></li></ol><blockquote><p><strong>æ€»ç»“ï¼šå…ˆæŒ‰xmlé¡ºåºåˆ›å»ºbeanå¯¹è±¡ï¼›å†é€šè¿‡åå°„ï¼Œæ ¹æ®å±æ€§å¼•ç”¨è°ƒç”¨setteræ–¹æ³•(é˜²æ­¢ç©ºå¼•ç”¨)</strong></p></blockquote><h3 id="3-beançš„å•ä¾‹-å¤šä¾‹"><a href="#3-beançš„å•ä¾‹-å¤šä¾‹" class="headerlink" title="3.beançš„å•ä¾‹&amp;å¤šä¾‹"></a>3.beançš„å•ä¾‹&amp;å¤šä¾‹</h3><p>ä»¥ä»¥ä¸‹æµ‹è¯•æ–‡ä»¶ä¸ºä¾‹ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>bean</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ„é€ å™¨è¢«è°ƒç”¨.."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"Cat&#123;"</span> <span class="token operator">+</span>                <span class="token string">"id="</span> <span class="token operator">+</span> id <span class="token operator">+</span>                <span class="token string">", name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>                <span class="token char">'&#125;'</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBeanTest</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getBeanBySingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>                <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"cat0"</span><span class="token punctuation">,</span> <span class="token class-name">Cat</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong><code>å•ä¾‹æ¨¡å¼</code>ï¼šåœ¨springçš„iocå®¹å™¨ï¼Œåœ¨é»˜è®¤æ˜¯æŒ‰ç…§å•ä¾‹åˆ›å»º(<code>scope=&quot;singleton&quot;</code>)çš„ï¼Œå³é…ç½®ä¸€ä¸ªbeanå¯¹è±¡åï¼Œiocå®¹å™¨åªä¼šåˆ›å»ºä¸€ä¸ªbeanå®ä¾‹ã€‚</strong></p><p>beans.xml</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>é»˜è®¤æƒ…å†µä¸‹ï¼Œscope<span class="token operator">=</span><span class="token string">"singleton"</span><span class="token punctuation">(</span>å•ä¾‹<span class="token punctuation">)</span><span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"cat0"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"com.lhyedu.spring.bean.Cat"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"id"</span> value<span class="token operator">=</span><span class="token string">"1"</span><span class="token operator">/</span><span class="token operator">></span>    <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"name"</span> value<span class="token operator">=</span><span class="token string">"å°èŠ±çŒ«"</span><span class="token operator">/</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œç»“æœï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java">æ„é€ å™¨è¢«è°ƒç”¨<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment">//åªåˆ›é€ äº†ä¸€ä¸ªCatå¯¹è±¡</span><span class="token class-name">Cat</span><span class="token punctuation">&#123;</span>id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token char">'å°èŠ±çŒ«'</span><span class="token punctuation">&#125;</span><span class="token class-name">Cat</span><span class="token punctuation">&#123;</span>id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token char">'å°èŠ±çŒ«'</span><span class="token punctuation">&#125;</span><span class="token class-name">Cat</span><span class="token punctuation">&#123;</span>id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token char">'å°èŠ±çŒ«'</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong><code>å¤šä¾‹æ¨¡å¼</code>ï¼šå¦‚æœå¸Œæœ›iocå®¹å™¨é…ç½®æŸä¸ªbeanå¯¹è±¡ï¼Œæ˜¯ä»¥å¤šä¸ªå®ä¾‹å½¢å¼åˆ›å»ºçš„åˆ™å¯ä»¥é€šè¿‡é…ç½®<code>scope=&quot;prototype&quot;</code></strong></p><p>beans.xml</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--scope="prototype"(åŸå‹)ï¼Œæ¯æ¬¡getBeanéƒ½åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡--></span><span class="token comment">&lt;!--æ‡’åŠ è½½é»˜è®¤ä¸ºfalse ==> lazy-init="false"--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cat0<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.bean.Cat<span class="token punctuation">"</span></span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>prototype<span class="token punctuation">"</span></span> <span class="token attr-name">lazy-init</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å°èŠ±çŒ«<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>è¡¥å……ï¼š<code>lazy-init(æ‡’åŠ è½½)</code>ï¼šiocå®¹å™¨åˆå§‹åŒ–æ—¶ä¸åˆ›å»ºï¼ŒgetBeanæ–¹æ³•è°ƒç”¨æ—¶æ‰åˆ›å»º</strong></p></blockquote><p> è¿è¡Œç»“æœï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java">æ„é€ å™¨è¢«è°ƒç”¨<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment">//åˆ›å»ºå¤šä¸ªCatå¯¹è±¡</span><span class="token class-name">Cat</span><span class="token punctuation">&#123;</span>id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token char">'å°èŠ±çŒ«'</span><span class="token punctuation">&#125;</span><span class="token comment">//ä¸”å¯ä»¥çœ‹å‡ºï¼šCatå¯¹è±¡åˆ›å»ºæ˜¯åœ¨getBeanæ–¹æ³•è°ƒç”¨æ—¶ï¼Œè€Œéiocåˆå§‹åŒ–æ—¶</span>æ„é€ å™¨è¢«è°ƒç”¨<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token class-name">Cat</span><span class="token punctuation">&#123;</span>id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token char">'å°èŠ±çŒ«'</span><span class="token punctuation">&#125;</span>æ„é€ å™¨è¢«è°ƒç”¨<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token class-name">Cat</span><span class="token punctuation">&#123;</span>id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token char">'å°èŠ±çŒ«'</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-beançš„ç”Ÿå‘½å‘¨æœŸ-é‡ç‚¹"><a href="#4-beançš„ç”Ÿå‘½å‘¨æœŸ-é‡ç‚¹" class="headerlink" title="4.beançš„ç”Ÿå‘½å‘¨æœŸ(é‡ç‚¹)"></a>4.beançš„ç”Ÿå‘½å‘¨æœŸ(é‡ç‚¹)</h3><p><strong>beanå¯¹è±¡çš„åˆ›å»ºæ˜¯ç”±JVMå®Œæˆçš„ï¼Œç„¶åæ‰§è¡Œå¦‚ä¸‹æ–¹æ³•ï¼š</strong></p><ol><li><strong>æ‰§è¡Œæ„é€ å™¨</strong></li><li><strong>æ‰§è¡Œsetteræ–¹æ³•</strong></li><li><strong>è°ƒç”¨beançš„åˆå§‹åŒ–æ–¹æ³•(éœ€è¦é…ç½®<code>init-method</code>æ ‡ç­¾)</strong></li><li><strong>ä½¿ç”¨bean</strong></li><li><strong>å½“å®¹å™¨å…³é—­æ—¶ï¼Œè°ƒç”¨beançš„é”€æ¯æ–¹æ³•(éœ€è¦é…ç½®<code>destroy-method</code>æ ‡ç­¾)</strong></li></ol><p>Houseç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>bean</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">House</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">House</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"House() æ„é€ å™¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"setXx()æ–¹æ³•è¢«è°ƒç”¨.."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"House init().."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"House destroy().."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>beans.xml</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--init-method="init":æŒ‡å®šinitå‡½æ•°ä¸ºbeanåˆå§‹åŒ–æ–¹æ³•    destroy-method="destroy":æŒ‡å®šdestroyå‡½æ•°ä¸ºbeané”€æ¯æ–¹æ³•--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>house<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.bean.House<span class="token punctuation">"</span></span>       <span class="token attr-name">init-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>init<span class="token punctuation">"</span></span> <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>destroy<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>åŒ—äº¬è±ªå®…<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBeanTest</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">BeanLife</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>                <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">House</span> house <span class="token operator">=</span> ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"house"</span><span class="token punctuation">,</span> <span class="token class-name">House</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä½¿ç”¨bean = "</span> <span class="token operator">+</span> house<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//iocç¼–è¯‘ç±»å‹ï¼šApplicationContext(æ— closeæ–¹æ³•)</span>        <span class="token comment">//iocè¿è¡Œç±»å‹ï¼šClassPathXmlApplicationContext(æœ‰closeæ–¹æ³•)</span>        <span class="token comment">//iocç¼–è¯‘ç±»å‹->å‘ä¸‹è½¬å‹ï¼Œå†è°ƒç”¨closeæ–¹æ³•</span>        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">)</span> ioc<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">House</span><span class="token punctuation">(</span><span class="token punctuation">)</span> æ„é€ å™¨<span class="token function">setXx</span><span class="token punctuation">(</span><span class="token punctuation">)</span>æ–¹æ³•è¢«è°ƒç”¨<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token class-name">House</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span>ä½¿ç”¨bean <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span>House</span><span class="token annotation punctuation">@7e6f74c</span><span class="token class-name">House</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="åç½®å¤„ç†å™¨-æ¶‰åŠAOPå…ˆä¸ç»†è®²"><a href="#åç½®å¤„ç†å™¨-æ¶‰åŠAOPå…ˆä¸ç»†è®²" class="headerlink" title="åç½®å¤„ç†å™¨(æ¶‰åŠAOPå…ˆä¸ç»†è®²)"></a>åç½®å¤„ç†å™¨(æ¶‰åŠAOPå…ˆä¸ç»†è®²)</h2><ul><li><strong>åœ¨springçš„iocå®¹å™¨ä¸­ï¼Œå¯ä»¥é…ç½®beançš„åç½®å¤„ç†å™¨ï¼ˆæœ¬è´¨ï¼šä¸€ä¸ªbeanå¯¹è±¡ï¼Œä½œç”¨æ¯”è¾ƒç‰¹æ®Šï¼‰</strong></li><li><strong>è¯¥å¤„ç†å™¨(&#x2F;å¯¹è±¡)ä¼šåœ¨beanåˆå§‹åŒ–æ–¹æ³•(<code>init-method</code>)è°ƒç”¨å‰å’Œåˆå§‹åŒ–æ–¹æ³•è°ƒç”¨åè¢«è°ƒç”¨</strong></li><li><strong>ç¨‹åºå‘˜å¯ä»¥åœ¨åç½®å¤„ç†å™¨ä¸­ç¼–å†™è‡ªå·±çš„ä»£ç </strong></li></ul><p>Houseç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>bean</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">House</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">House</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"House() æ„é€ å™¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"setXx()æ–¹æ³•è¢«è°ƒç”¨.."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"House init().."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"House destroy().."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>åç½®å¤„ç†å™¨(implements BeanPostProcessorå¹¶è¦é‡å†™ä¸¤ä¸ªæ–¹æ³•)</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>bean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span></span><span class="token class-name">BeansException</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">BeanPostProcessor</span></span><span class="token punctuation">;</span><span class="token comment">//åç½®å¤„ç†å™¨</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyBeanPostProcessor</span> <span class="token keyword">implements</span> <span class="token class-name">BeanPostProcessor</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * ä»€ä¹ˆæ—¶å€™è¢«è°ƒç”¨ï¼šåœ¨beançš„init-methodæ–¹æ³•å‰ä¼šè¢«è°ƒç”¨     * @param beanï¼šä¼ å…¥çš„åœ¨iocå®¹å™¨ä¸­ é…ç½®çš„beanå¯¹è±¡     * @param beanNameï¼šä¼ å…¥çš„åœ¨iocå®¹å™¨ä¸­åˆ›å»º/é…ç½®beançš„id     * @return ç¨‹åºå‘˜å¯¹ä¼ å…¥çš„beanè¿›è¡Œä¿®æ”¹/å¤„ç†ï¼Œå†è¿”å›     * @throws BeansException     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">postProcessBeforeInitialization</span><span class="token punctuation">(</span><span class="token class-name">Object</span> bean<span class="token punctuation">,</span> <span class="token class-name">String</span> beanName<span class="token punctuation">)</span>            <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"postProcessBeforeInitializationè¢«è°ƒç”¨ã€‚bean="</span> <span class="token operator">+</span> beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> bean<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * ä»€ä¹ˆæ—¶å€™è¢«è°ƒç”¨ï¼šåœ¨beançš„init-methodæ–¹æ³•åä¼šè¢«è°ƒç”¨     * å…¶ä»–åŒä¸Š     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">postProcessAfterInitialization</span><span class="token punctuation">(</span><span class="token class-name">Object</span> bean<span class="token punctuation">,</span> <span class="token class-name">String</span> beanName<span class="token punctuation">)</span>            <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"postProcessAfterInitializationè¢«è°ƒç”¨ã€‚bean="</span> <span class="token operator">+</span> beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> bean<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>beans.xml</strong></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--é‡ç‚¹ï¼šé…ç½®åç»­å¤„ç†å™¨ç±»bean->è¯¥beanåˆå§‹åŒ–åä½œç”¨äºå…¶ä»–beançš„åˆå§‹åŒ–(åˆ‡é¢ç¼–ç¨‹AOP)--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.bean.MyBeanPostProcessor<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mbpp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment">&lt;!--åŒ…å«åç½®å¤„ç†å™¨å¤„ç†çš„beançš„ç”Ÿå‘½å‘¨æœŸ--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>house<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.bean.House<span class="token punctuation">"</span></span>          <span class="token attr-name">init-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>init<span class="token punctuation">"</span></span> <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>destroy<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>åŒ—äº¬è±ªå®…<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBeanTest</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">BeanPostProcessorTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>                <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">House</span> house <span class="token operator">=</span> ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"house"</span><span class="token punctuation">,</span> <span class="token class-name">House</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">)</span> ioc<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">House</span><span class="token punctuation">(</span><span class="token punctuation">)</span> æ„é€ å™¨<span class="token function">setXx</span><span class="token punctuation">(</span><span class="token punctuation">)</span>æ–¹æ³•è¢«è°ƒç”¨<span class="token punctuation">.</span><span class="token punctuation">.</span>postProcessBeforeInitializationè¢«è°ƒç”¨ã€‚bean<span class="token operator">=</span>house<span class="token comment">//init-methodå‰è¢«è°ƒç”¨</span><span class="token class-name">House</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span>postProcessAfterInitializationè¢«è°ƒç”¨ã€‚bean<span class="token operator">=</span>house<span class="token comment">//init-methodåè¢«è°ƒç”¨</span><span class="token class-name">House</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>è¯´æ˜ï¼š</strong></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240113153614549.png"></p></blockquote><hr><h2 id="åŸºäºæ³¨è§£"><a href="#åŸºäºæ³¨è§£" class="headerlink" title="åŸºäºæ³¨è§£"></a>åŸºäºæ³¨è§£</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/137F684734D3DBF1ECE25CD7A9B3B803.png"></p><h3 id="1-å¿«é€Ÿå…¥é—¨"><a href="#1-å¿«é€Ÿå…¥é—¨" class="headerlink" title="1.å¿«é€Ÿå…¥é—¨"></a>1.å¿«é€Ÿå…¥é—¨</h3><p><strong>ä½¿ç”¨æ³¨è§£çš„æ–¹å¼æ¥é…ç½®<code>Controller</code>&#x2F;<code>Service</code>&#x2F;<code>Respository</code>&#x2F;<code>Component</code>ã€‚</strong></p><ul><li>å¼•å…¥<code>spring-aop-5.3.8.jar</code>ï¼Œåœ¨<code>spring/libs</code>ä¸‹æ‹·è´å³å¯</li><li>åˆ›å»º<code>UserController.java</code>ï¼Œ<code>UserService.java</code>ï¼Œ<code>UserDao.java</code>ï¼Œ<code>MyComponent.java</code></li></ul><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240113192508746.png" alt="" style="zoom: 50%;" /><p>UserDaoç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Repository</span></span><span class="token punctuation">;</span><span class="token comment">//@Repository:æ ‡è®°ä¸ºä¸€ä¸ªæŒä¹…åŒ–çš„ç±»ï¼Œé€šå¸¸ç”¨äºDaoç±»</span><span class="token annotation punctuation">@Repository</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDao</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>UserServiceç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span><span class="token comment">//@Serviceï¼šè¡¨ç¤ºæ˜¯ä¸€ä¸ªå¤„ç†ä¸šåŠ¡é€»è¾‘çš„ç±»ï¼Œé€šå¸¸ç”¨äºServiceç±»</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>UserControllerç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Controller</span></span><span class="token punctuation">;</span><span class="token comment">//@Controllerï¼šæ ‡è¯†æ˜¯ä¸€ä¸ªæ§åˆ¶å™¨ï¼Œé€šå¸¸ç”¨äºServlet</span><span class="token annotation punctuation">@Controller</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>MyComponentç±»</p><pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">import org.springframework.stereotype.Component;&#x2F;&#x2F;@Componentï¼šæ ‡è¯†æ˜¯ä¸€ä¸ªç»„ä»¶(é€šç”¨æ³¨è§£ï¼Œæ‰«æåˆ°è¯¥æ ‡è¯†è‡ªåŠ¨åˆ›å»º)@Componentpublic class MyComponent &#123;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>beans.xmlï¼ˆæŒ‡å®šæ³¨è§£æ‰«æèŒƒå›´ï¼‰</strong></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--ä¸èƒ½å¿˜ï¼ï¼é…ç½®è‡ªåŠ¨æ‰«æçš„åŒ…ï¼Œæ³¨æ„éœ€è¦åŠ å…¥contextåç§°ç©ºé—´--></span><span class="token comment">&lt;!--base-packageï¼šiocåˆå§‹åŒ–æ—¶ï¼Œé€’å½’æ‰«ææŒ‡å®šçš„åŒ…ï¼Œåˆ›å»ºæ ‡æœ‰æ³¨è§£çš„beanå¯¹è±¡--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.component<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBeanTest</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBeanByAnnotation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>                <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ–­ç‚¹</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>debugå‘ç°ï¼Œå››ä¸ªæ³¨è§£æ ‡è¯†çš„ç±»åœ¨iocå®¹å™¨åˆå§‹åŒ–æ—¶å³åˆ›å»ºæˆåŠŸï¼</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240113200814466.png" alt="" style="zoom:67%;" /><h3 id="2-æ³¨æ„äº‹é¡¹"><a href="#2-æ³¨æ„äº‹é¡¹" class="headerlink" title="2.æ³¨æ„äº‹é¡¹"></a>2.æ³¨æ„äº‹é¡¹</h3><ul><li><p><strong>éœ€è¦å¯¼å…¥spring-aop-5.3.8.jar</strong></p></li><li><p><strong>å¿…é¡»åœ¨springé…ç½®æ–‡ä»¶ä¸­æŒ‡å®šâ€æŒ‡å®šæ‰«æçš„åŒ…åŠå­åŒ…â€(<code>base-package=&quot;~.*&quot;</code>)ï¼ŒIOCå®¹å™¨æ‰èƒ½æ£€æµ‹åˆ°å½“å‰é¡¹ç›®ä¸­å“ªäº›ç±»è¢«æ ‡è¯†äº†æ³¨è§£</strong></p></li><li><p><strong>Springçš„IOCå®¹å™¨ä¸èƒ½æ£€æµ‹ä¸€ä¸ªä½¿ç”¨äº†@Controlleræ³¨è§£çš„ç±»åˆ°åº•æ˜¯ä¸æ˜¯ä¸€ä¸ªçœŸæ­£çš„æ§åˆ¶å™¨ã€‚æ³¨è§£çš„åç§°æ˜¯ç”¨äºç¨‹åºå‘˜è‡ªå·±è¯†åˆ«å½“å‰æ ‡è¯†çš„æ˜¯ä»€ä¹ˆç»„ä»¶ã€‚å…¶å®ƒçš„@Service@Repositoryä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ã€ä¹Ÿå°±æ˜¯è¯´springçš„IOCå®¹å™¨åªè¦æ£€æŸ¥åˆ°æ³¨è§£å°±ä¼šç”Ÿæˆå¯¹è±¡ï¼Œä½†æ˜¯è¿™ä¸ªæ³¨è§£çš„å«ä¹‰springä¸ä¼šè¯†åˆ«ï¼Œæ³¨è§£æ˜¯ç»™ç¨‹åºå‘˜ç¼–ç¨‹æ–¹ä¾¿çœ‹çš„ã€‘</strong></p></li><li><pre><code class="xml">    &lt;context:component-scan base-package=&quot;com.lhyedu.spring.component&quot;                             resource-pattern=&quot;User*.class&quot;/&gt;<pre class="line-numbers language-none"><code class="language-none">  **&#96;resource-pattern&#x3D;&quot;User*.class&quot;&#96;ï¼šè¡¨ç¤ºåªæ‰«ææ»¡è¶³éœ€è¦çš„ç±»**- **æ’é™¤å“ªäº›ç±»ï¼š&#96;exclude-filter&#96;**  **åŒ…æ‹¬å“ªäº›ç±»ï¼š&#96;include-filter&#96;**  &#96;&#96;&#96;xml  &lt;context:component-scan base-package&#x3D;&quot;com.lhyedu.spring.component&quot;&gt;  &lt;!--exclude-filteræ ‡ç­¾ï¼šè¿‡æ»¤çš„æ³¨è§£ï¼Œiocåˆå§‹åŒ–æ—¶ä¸ä¼šåˆ›å»ºï¼›include-filterä½œç”¨ç›¸å--&gt;      &lt;!--expression&#x3D;&quot;~&quot;ï¼šè¦æ’é™¤æ³¨è§£çš„å…¨ç±»å--&gt;      &lt;context:exclude-filter type&#x3D;&quot;annotation&quot; expression&#x3D;&quot;org.springframework.stereotype.Service&quot;&#x2F;&gt;  &lt;&#x2F;context:component-scan&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></code></pre></li></ul><hr><h2 id="beançš„è‡ªåŠ¨è£…é…-é«˜é¢‘é¢è¯•é¢˜"><a href="#beançš„è‡ªåŠ¨è£…é…-é«˜é¢‘é¢è¯•é¢˜" class="headerlink" title="beançš„è‡ªåŠ¨è£…é…(é«˜é¢‘é¢è¯•é¢˜)"></a>beançš„è‡ªåŠ¨è£…é…(é«˜é¢‘é¢è¯•é¢˜)</h2><p><strong>åœ¨springçš„iocå®¹å™¨ï¼Œå¯ä»¥å®ç°è‡ªåŠ¨è£…é…bean</strong></p><h3 id="1-åŸºäºxml"><a href="#1-åŸºäºxml" class="headerlink" title="1.åŸºäºxml"></a>1.åŸºäºxml</h3><ul><li><p><strong><code>autowire=&quot;byType&quot;</code>ï¼šåœ¨åˆ›å»ºbeanå¯¹è±¡æ—¶ï¼Œé€šè¿‡ <u>ç±»å‹</u> ç»™å±æ€§è‡ªåŠ¨å®Œæˆå¼•ç”¨</strong></p><blockquote><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token operator">></span><span class="token number">1</span><span class="token punctuation">)</span>æ¯”å¦‚OrderServiceå¯¹è±¡æœ‰ private OrderDao orderDao<span class="token operator">></span><span class="token number">2</span><span class="token punctuation">)</span>å°±ä¼šåœ¨å®¹å™¨ä¸­æ‰¾ OrderDaoç±»å‹ çš„å¯¹è±¡ã€‚æœ‰<span class="token operator">-></span>è‡ªåŠ¨è£…é…ï¼›å¤šä¸ªåŒç±»å‹<span class="token operator">-></span>æŠ¥é”™<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></blockquote></li><li><p><strong><code>autowire=&quot;byName&quot;</code>ï¼šåœ¨åˆ›å»ºbeanå¯¹è±¡æ—¶ï¼Œé€šè¿‡ <u>beançš„id</u> ç»™å±æ€§è‡ªåŠ¨å®Œæˆå¼•ç”¨</strong></p><blockquote><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token operator">></span><span class="token number">1</span><span class="token punctuation">)</span>æ¯”å¦‚OrderServiceå¯¹è±¡æœ‰ private OrderDao orderDao<span class="token operator">></span><span class="token number">2</span><span class="token punctuation">)</span>å†çœ‹å±æ€§çš„<span class="token function">setXxx</span><span class="token punctuation">(</span><span class="token punctuation">)</span>æ–¹æ³•çš„<span class="token function">xxx</span><span class="token punctuation">(</span>é‡ç‚¹<span class="token punctuation">)</span><span class="token operator">></span><span class="token number">3</span><span class="token punctuation">)</span>å¦‚æœæ²¡æœ‰<span class="token operator">-></span>åˆ™è£…é…å¤±è´¥<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></blockquote></li></ul><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/2BBE76BF9000858CEE336954BE414048.png" alt="img"></p><p>OrderDaoç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>dao</span><span class="token punctuation">;</span><span class="token comment">//Daoå±‚</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderDao</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//æ–¹æ³•</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">saveOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¿å­˜ ä¸€ä¸ªè®¢å•..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>OrderServiceç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span></span><span class="token class-name">Service</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>dao<span class="token punctuation">.</span></span><span class="token class-name">OrderDao</span></span><span class="token punctuation">;</span><span class="token comment">//Serviceå±‚</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderService</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//å¼•ç”¨åˆ°Daoç±»ä¸ºå±æ€§</span>    <span class="token keyword">private</span> <span class="token class-name">OrderDao</span> orderDao<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">OrderDao</span> <span class="token function">getOrderDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> orderDao<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setOrderDao</span><span class="token punctuation">(</span><span class="token class-name">OrderDao</span> orderDao<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>orderDao <span class="token operator">=</span> orderDao<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>OrderActionç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>web</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span></span><span class="token class-name">Service</span><span class="token punctuation">.</span><span class="token class-name">OrderService</span></span><span class="token punctuation">;</span><span class="token comment">//Controllerå±‚</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderAction</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//å¼•ç”¨åˆ°Serviceç±»ä¸ºå±æ€§</span>    <span class="token keyword">private</span> <span class="token class-name">OrderService</span> orderService<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">OrderService</span> <span class="token function">getOrderService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> orderService<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setOrderService</span><span class="token punctuation">(</span><span class="token class-name">OrderService</span> orderService<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>orderService <span class="token operator">=</span> orderService<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>beans.xmlï¼ˆè‡ªåŠ¨è£…é…beanå±æ€§ï¼š<code>autowire</code>æ ‡ç­¾ï¼‰</strong></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--é…ç½®OrderDaoå¯¹è±¡--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.dao.OrderDao<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>orderDao<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token comment">&lt;!--é…ç½®OrderServiceå¯¹è±¡ï¼Œä½†ä¸å¯¹å±æ€§è¿›è¡Œ&lt;property>å¼•ç”¨èµ‹å€¼->è‡ªåŠ¨è£…é…--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.Service.OrderService<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>orderService<span class="token punctuation">"</span></span> <span class="token attr-name">autowire</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>byType<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token comment">&lt;!--é…ç½®OrderActionå¯¹è±¡ï¼Œä½†ä¸å¯¹å±æ€§è¿›è¡Œ&lt;property>å¼•ç”¨èµ‹å€¼->è‡ªåŠ¨è£…é…--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.web.OrderAction<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>orderAction<span class="token punctuation">"</span></span> <span class="token attr-name">autowire</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>byName<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBeanTest</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBeanByAutowried</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>                <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">OrderAction</span> oa <span class="token operator">=</span> ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"orderAction"</span><span class="token punctuation">,</span> <span class="token class-name">OrderAction</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">OrderService</span> os <span class="token operator">=</span> oa<span class="token punctuation">.</span><span class="token function">getOrderService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>os<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//éªŒè¯OrderActionæ˜¯å¦æˆåŠŸè£…é…OrderService</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span><span class="token function">getOrderDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//éªŒè¯OrderServiceæ˜¯å¦æˆåŠŸè£…é…OrderDao</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span></span>Service<span class="token punctuation">.</span>OrderService</span><span class="token annotation punctuation">@34123d65</span><span class="token comment">//Actionçš„Serviceå±æ€§è£…é…æˆåŠŸ</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>dao<span class="token punctuation">.</span></span>OrderDao</span><span class="token annotation punctuation">@59474f18</span><span class="token comment">//Serviceçš„Daoå±æ€§è£…é…æˆåŠŸ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="2-åŸºäºæ³¨è§£"><a href="#2-åŸºäºæ³¨è§£" class="headerlink" title="2.åŸºäºæ³¨è§£"></a>2.åŸºäºæ³¨è§£</h3><p><strong>åŸºäºæ³¨è§£é…ç½®beanï¼Œä¹Ÿå¯å®ç°è‡ªåŠ¨è£…é…ï¼Œä½¿ç”¨çš„æ³¨è§£æ˜¯ï¼š@Autowiredæˆ–@Resource</strong></p><blockquote><p><strong>é‡ç‚¹ï¼šé™¤äº†æ³›å‹ä¾èµ–æ³¨å…¥çš„æƒ…å†µç”¨ï¼š@Autowiredï¼›å…¶ä»–å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½ç”¨ï¼š@Resource</strong></p></blockquote><h4 id="â‘ -Autowired"><a href="#â‘ -Autowired" class="headerlink" title="â‘ @Autowired"></a>â‘ @Autowired</h4><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/9AD44BEEA0E3B23AE32A1BA9CEFE7FDF.png"></p><p>UserServiceç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>component</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span><span class="token comment">//@Serviceï¼šè¡¨ç¤ºæ˜¯ä¸€ä¸ªå¤„ç†ä¸šåŠ¡é€»è¾‘çš„ç±»ï¼Œé€šå¸¸ç”¨äºServiceç±»</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"UserService hi()~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>UserControllerç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>component</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Controller</span></span><span class="token punctuation">;</span><span class="token comment">//@Controllerï¼šæ ‡è¯†æ˜¯ä¸€ä¸ªæ§åˆ¶å™¨ï¼Œé€šå¸¸ç”¨äºServlet</span><span class="token annotation punctuation">@Controller</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//è‡ªåŠ¨è£…é…</span>    <span class="token comment">//1)åœ¨IOCå®¹å™¨ä¸­æŸ¥æ‰¾å¸¦è£…é…ç»„ä»¶çš„ç±»å‹ï¼Œå¦‚æœæœ‰å”¯ä¸€beanåŒ¹é…(æŒ‰ç±»å‹)->è£…é…</span>    <span class="token comment">//2)è‹¥å¸¦è£…é…ç±»å‹åœ¨iocå®¹å™¨æœ‰å¤šä¸ªï¼Œåˆ™æ ¹æ®å¸¦è£…é…å±æ€§å±æ€§åä½œä¸ºidæŸ¥æ‰¾</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"UserController çš„sayOk()~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        userService<span class="token punctuation">.</span><span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è°ƒç”¨Serviceå±‚å±æ€§çš„æ–¹æ³•</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>beans.xml</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.component<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.component.UserService<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>service<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBeanTest</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setProByAutowired</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>                <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">UserController</span> userController <span class="token operator">=</span> ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"userController"</span><span class="token punctuation">,</span> <span class="token class-name">UserController</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        userController<span class="token punctuation">.</span><span class="token function">sayOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">UserController</span> çš„<span class="token function">sayOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">~</span><span class="token class-name">UserService</span> <span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">~</span><span class="token comment">//UserControllerçš„UserServiceå±æ€§çš„hi()è°ƒç”¨æˆåŠŸ->è£…é…æˆåŠŸ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="â‘¡-Resource"><a href="#â‘¡-Resource" class="headerlink" title="â‘¡@Resource"></a>â‘¡@Resource</h4><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/46AFBEF7DAC9335D09DB228F1F564B76.png"></p><p>UserServiceç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>component</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span><span class="token comment">//@Serviceï¼šè¡¨ç¤ºæ˜¯ä¸€ä¸ªå¤„ç†ä¸šåŠ¡é€»è¾‘çš„ç±»ï¼Œé€šå¸¸ç”¨äºServiceç±»</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"UserService hi()~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>UserControllerç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>component</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Controller</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span></span><span class="token punctuation">;</span><span class="token comment">//@Controllerï¼šæ ‡è¯†æ˜¯ä¸€ä¸ªæ§åˆ¶å™¨ï¼Œé€šå¸¸ç”¨äºServlet</span><span class="token annotation punctuation">@Controller</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//@Resourceä¸¤ä¸ªä½œç”¨å±æ€§ï¼šnameå’Œtype(ç±»ä¼¼xmlé…ç½®ä¸‹çš„autowiredæ ‡ç­¾)</span>    <span class="token comment">//1)æ²¡æŒ‡å®š -> é»˜è®¤byNameæ³¨å…¥ï¼Œæ²¡æ‰¾åˆ°åœ¨ä½¿ç”¨byTypeæ³¨å…¥</span>    <span class="token comment">//2)@Resource(type=UserService.class)->è¦æ±‚å®¹å™¨ä¸­åªèƒ½æœ‰1ä¸ªè¯¥ç±»å‹å¯¹è±¡</span>    <span class="token annotation punctuation">@Resource</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"service200"</span><span class="token punctuation">)</span><span class="token comment">//beanä¸­å¼•ç”¨çš„id</span>    <span class="token keyword">private</span> <span class="token class-name">UserService</span> userServiceWuYiYi<span class="token punctuation">;</span><span class="token comment">//æ­¤æ—¶è¿™é‡Œçš„å˜é‡åæ— æ„ä¹‰ï¼</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"UserController çš„sayOk()~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        userServiceWuYiYi<span class="token punctuation">.</span><span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è°ƒç”¨Serviceå±‚å±æ€§çš„æ–¹æ³•</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>beans.xml</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token operator">&lt;</span>context<span class="token operator">:</span>component<span class="token operator">-</span>scan base<span class="token operator">-</span><span class="token keyword">package</span><span class="token operator">=</span><span class="token string">"com.lhyedu.spring.component"</span><span class="token operator">/</span><span class="token operator">></span><span class="token operator">&lt;</span>bean <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"com.lhyedu.spring.component.UserService"</span> id<span class="token operator">=</span><span class="token string">"service200"</span><span class="token operator">/</span><span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBeanTest</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setProByResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>                <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">UserController</span> userController <span class="token operator">=</span> ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"userController"</span><span class="token punctuation">,</span> <span class="token class-name">UserController</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        userController<span class="token punctuation">.</span><span class="token function">sayOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">UserController</span> çš„<span class="token function">sayOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">~</span><span class="token class-name">UserService</span> <span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">~</span><span class="token comment">//è£…é…æˆåŠŸ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ioc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springå®¹å™¨ç»“æ„å‰–æ</title>
      <link href="/2024/02/16/Spring%E5%AE%B9%E5%99%A8%E7%BB%93%E6%9E%84%E5%89%96%E6%9E%90/"/>
      <url>/2024/02/16/Spring%E5%AE%B9%E5%99%A8%E7%BB%93%E6%9E%84%E5%89%96%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1 id="Springå®¹å™¨ç»“æ„å‰–æ"><a href="#Springå®¹å™¨ç»“æ„å‰–æ" class="headerlink" title="Springå®¹å™¨ç»“æ„å‰–æ"></a>Springå®¹å™¨ç»“æ„å‰–æ</h1><p>[TOC]</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>test</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Monster</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ApplicationContext</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">ClassPathXmlApplicationContext</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBeanTest</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>                <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Monster</span> monster01 <span class="token operator">=</span> ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"monster01"</span><span class="token punctuation">,</span> <span class="token class-name">Monster</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>monster01<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ–­ç‚¹</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240110223306082.png"></p><hr><h2 id="beanDefinitionMap"><a href="#beanDefinitionMap" class="headerlink" title="beanDefinitionMap"></a>beanDefinitionMap</h2><blockquote><p>è¯¥ç±»çš„æ‰€æœ‰å±æ€§</p></blockquote><p><code>ioc</code> -&gt; <code>beanfactory</code></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240110223503783.png"></p><p><code>beanfactory</code> -&gt; <code>beanDefinitionMap</code></p><blockquote><p><strong>æ³¨æ„ï¼šbeanDefinitionMapçš„æ•°æ®ç±»å‹æ˜¯ï¼šConcurrentHashMap</strong></p></blockquote><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240110223757080.png"></p><hr><h2 id="beanDefinitionMapçš„-å±æ€§"><a href="#beanDefinitionMapçš„-å±æ€§" class="headerlink" title="beanDefinitionMapçš„ å±æ€§"></a>beanDefinitionMapçš„ å±æ€§</h2><h3 id="â‘ table-æ•°ç»„"><a href="#â‘ table-æ•°ç»„" class="headerlink" title="â‘ table[]æ•°ç»„"></a>â‘ table[]æ•°ç»„</h3><p><strong>ä¿å­˜é…ç½®çš„<u>beanä¿¡æ¯</u>ã€‚</strong></p><blockquote><p><strong>table[]æ•°ç»„çš„æ•°æ®ç±»å‹æ˜¯ï¼šConcurrentHashMapçš„å†…éƒ¨ç±»ï¼šConcurrentHashMap$Node</strong></p></blockquote><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240110230125665.png"></p><h3 id="â‘¡propertyValues"><a href="#â‘¡propertyValues" class="headerlink" title="â‘¡propertyValues"></a>â‘¡propertyValues</h3><p><strong>ä¿å­˜é…ç½®<u>beançš„â€å±æ€§â€ä¿¡æ¯</u>ã€‚</strong></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240110230908336.png"></p><hr><h2 id="singletonObjects"><a href="#singletonObjects" class="headerlink" title="singletonObjects"></a>singletonObjects</h2><blockquote><p><strong>æ³¨æ„ï¼šsingletonObjectsçš„æ•°æ®ç±»å‹ä¹Ÿæ˜¯ï¼šConcurrentHashMap</strong></p></blockquote><p><strong>ä¹Ÿç»´æŠ¤ä¸€ä¸ªtable[]å±æ€§ï¼Œä¿å­˜<u>åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡</u>ã€‚</strong></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240110231757802.png"></p><hr><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240110232915695.png"></p><hr><h2 id="xmlä¸æŒ‡å®šid"><a href="#xmlä¸æŒ‡å®šid" class="headerlink" title="xmlä¸æŒ‡å®šid"></a>xmlä¸æŒ‡å®šid</h2><p><strong>åœ¨beans.xmlæ–‡ä»¶ä¸­ï¼Œæ³¨å…¥ä¸¤ä¸ªMonsterå¯¹è±¡ï¼Œä½†å‡ä¸æŒ‡å®šidï¼š</strong></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.bean.Monster<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>monsterId<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ç‰›é­”ç‹<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>skill<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ç‰›é­”ç‹æ‹³<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.bean.Monster<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>monsterId<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>200<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ç™½éª¨ç²¾<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>skill<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>åƒäºº<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>è¿è¡Œä¼šä¸ä¼šæŠ¥é”™ï¼Ÿ</strong></p><p><u><strong>ç­”ï¼šä¸ä¼šã€‚ç³»ç»Ÿä¼šé»˜è®¤åˆ†é…idï¼Œåˆ†é…è§„åˆ™æ˜¯<code>å…¨ç±»å#1</code>ï¼Œ<code>å…¨ç±»å#2</code>ï¼Œ<code>å…¨ç±»å#n</code>ã€‚</strong></u></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>test</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ApplicationContext</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">ClassPathXmlApplicationContext</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBeanTest</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//1.åˆ›å»ºIOCå®¹å™¨å¯¹è±¡</span>        <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>                <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//BeanDefinitionNames[]:ä¿å­˜å¯¹è±¡çš„å˜é‡åï¼Œä¾¿äºæŸ¥æ‰¾</span>        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> beanDefinitionNames <span class="token operator">=</span> ioc<span class="token punctuation">.</span><span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> s <span class="token operator">:</span> beanDefinitionNames<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span>Monster</span>#<span class="token number">0</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span>Monster</span>#<span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ioc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¼•è¨€</title>
      <link href="/2024/02/16/%E5%BC%95%E8%A8%80/"/>
      <url>/2024/02/16/%E5%BC%95%E8%A8%80/</url>
      
        <content type="html"><![CDATA[<h1 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h1><p>[TOC]</p><h2 id="Springæ ¸å¿ƒå­¦ä¹ å†…å®¹"><a href="#Springæ ¸å¿ƒå­¦ä¹ å†…å®¹" class="headerlink" title="Springæ ¸å¿ƒå­¦ä¹ å†…å®¹"></a>Springæ ¸å¿ƒå­¦ä¹ å†…å®¹</h2><ol><li><strong><code>IOC(Inversion Of Controlleræ§åˆ¶åè½¬)</code>ï¼šç®¡ç† Javaå¯¹è±¡</strong></li><li><strong><code>AOP(åˆ‡é¢ç¼–ç¨‹)</code></strong></li><li><strong><code>JdbcTemplate</code>ï¼šæ˜¯Springæä¾›çš„ä¸€å¥—è®¿é—®æ•°æ®åº“çš„æŠ€æœ¯(åº”ç”¨æ€§å¼º)</strong></li><li><strong><code>å£°æ˜å¼äº‹åŠ¡</code>ï¼šåŸºäºIOC&#x2F;AOPå®ç°äº‹åŠ¡ç®¡ç†(ç†è§£è¾ƒå›°éš¾)</strong></li></ol><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240110191915708.png" alt="" style="zoom:67%;" /><hr><h2 id="Springå‡ ä¸ªé‡è¦æ¦‚å¿µ"><a href="#Springå‡ ä¸ªé‡è¦æ¦‚å¿µ" class="headerlink" title="Springå‡ ä¸ªé‡è¦æ¦‚å¿µ"></a>Springå‡ ä¸ªé‡è¦æ¦‚å¿µ</h2><h3 id="Springå¯ä»¥æ•´åˆå…¶ä»–æ¡†æ¶"><a href="#Springå¯ä»¥æ•´åˆå…¶ä»–æ¡†æ¶" class="headerlink" title="Springå¯ä»¥æ•´åˆå…¶ä»–æ¡†æ¶"></a>Springå¯ä»¥æ•´åˆå…¶ä»–æ¡†æ¶</h3><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240110194939562.png" alt="" style="zoom: 33%;" /><h3 id="Springçš„2ä¸ªæ ¸å¿ƒæ¦‚å¿µ-IOC-AOP"><a href="#Springçš„2ä¸ªæ ¸å¿ƒæ¦‚å¿µ-IOC-AOP" class="headerlink" title="Springçš„2ä¸ªæ ¸å¿ƒæ¦‚å¿µ:IOC&amp;AOP"></a>Springçš„2ä¸ªæ ¸å¿ƒæ¦‚å¿µ:IOC&amp;AOP</h3><p><u><strong>ä¼ ç»Ÿå¼€å‘æ¨¡å¼ï¼šJdbcUtils&#x2F;åå°„</strong></u></p><ul><li>ç¨‹åºå‘˜ç¼–å†™ç¨‹åºï¼Œåœ¨ç¨‹åºä¸­è¯»å–é…ç½®ä¿¡æ¯</li><li>åˆ›å»ºå¯¹è±¡ï¼Œnew ObjectXxx() &#x2F; åå°„åˆ›å»ºå¯¹è±¡</li><li>ä½¿ç”¨å¯¹è±¡å®Œæˆä»»åŠ¡</li></ul><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240110195157780.png"></p><p><u><strong>IOCå¼€å‘æ¨¡å¼ï¼š[EmpAction EmpService EmpDao Emp]</strong></u></p><ul><li>Springæ ¹æ®é…ç½®æ–‡ä»¶(xml&#x2F;æ³¨è§£)ï¼Œåˆ›å»ºå¯¹è±¡ï¼Œå¹¶æ”¾åˆ°å®¹å™¨(ConcurrentHaspMap)ä¸­ï¼Œå¹¶å®Œæˆå¯¹è±¡é—´çš„ä¾èµ–</li><li>å½“éœ€è¦åˆ›å»ºæŸä¸ªå¯¹è±¡å®ä¾‹æ—¶ï¼Œå°±ç›´æ¥ä»å®¹å™¨ä¸­è·å–å³å¯</li><li>ç¨‹åºå‘˜æ›´å…³æ³¨ç›¸åº”ä¸šåŠ¡(è€Œénew å¯¹è±¡)</li></ul><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240110195900586.png" alt="" style="zoom: 50%;" /><h3 id="Springæ ¸å¿ƒä»·å€¼"><a href="#Springæ ¸å¿ƒä»·å€¼" class="headerlink" title="Springæ ¸å¿ƒä»·å€¼"></a>Springæ ¸å¿ƒä»·å€¼</h3><p><font color="red" size=3>é€šè¿‡é…ç½®ï¼Œç»™ç¨‹åºæä¾›éœ€è¦ä½¿ç”¨çš„webå±‚[Servlet(Action&#x2F;Controller)] &#x2F; Service &#x2F; Dao &#x2F; [JavaBean&#x2F;entity] å¯¹è±¡</font></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240110201426657.png" alt="" style="zoom: 67%;" /><hr><h2 id="å¿«é€Ÿå…¥é—¨"><a href="#å¿«é€Ÿå…¥é—¨" class="headerlink" title="å¿«é€Ÿå…¥é—¨"></a>å¿«é€Ÿå…¥é—¨</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/56978B79DCB6704E251BBEB235CC4F29.png"></p><p><strong>åœ¨é¡¹ç›®ä¸‹åˆ›å»º<code>lib</code>ç›®å½•ï¼Œåœ¨åŒ…ä¸­å°†ä»¥ä¸‹5ä¸ª<code>.jar</code>åŒ…å¤åˆ¶å¹¶åŠ å…¥ç›®å½•(add as library)</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240110202626370.png" alt="" style="zoom: 67%;" /><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240110202900432.png" alt="" style="zoom: 67%;" /><p><strong>å·¦é”®<code>src</code>-&gt; <code>New</code> -&gt; <code>XML Configuration File</code> -&gt; <code>Spring Config</code> -&gt; <code>beans.xml</code></strong></p><p><strong>beans.xmlæ–‡ä»¶</strong></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--é…ç½®Monsterå¯¹è±¡        1.class:ç±»çš„å…¨è·¯å¾„        2.id:è¯¥ç±»åˆ›å»ºçš„å¯¹è±¡çš„ å˜é‡å--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.lhyedu.spring.bean.Monster<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>monster01<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--        &lt;property>&lt;/property>:é…ç½®ç±»çš„ å±æ€§æ ‡ç­¾        1)name:å±æ€§å        2)value:èµ‹å€¼--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>monsterId<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ç‰›é­”ç‹<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>skill<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ç‰›é­”ç‹æ‹³<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>Monsterç±»</strong></p><blockquote><p><strong>æ³¨æ„ï¼šåå°„åˆ›å»ºå¯¹è±¡æ—¶ä¼šç”¨åˆ°&#x3D;&#x3D;æ— å‚æ„é€ å™¨&#x3D;&#x3D;ä¸&#x3D;&#x3D;setæ–¹æ³•&#x3D;&#x3D;ï¼Œå®šä¹‰ç±»æ—¶å¿…é¡»å†™ä¸Šï¼ï¼ï¼</strong></p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>bean</span><span class="token punctuation">;</span><span class="token comment">/** * javaBean/Entity */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Monster</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> monsterId<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> skill<span class="token punctuation">;</span>    <span class="token comment">//æ— å‚æ„é€ å™¨ä¸€å®šè¦å†™ï¼Œåå°„æ—¶éœ€è¦ä½¿ç”¨æ— å‚æ„é€ å™¨ï¼ï¼ï¼</span>    <span class="token keyword">public</span> <span class="token class-name">Monster</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">Monster</span><span class="token punctuation">(</span><span class="token class-name">String</span> monsterId<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> skill<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>monsterId <span class="token operator">=</span> monsterId<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>skill <span class="token operator">=</span> skill<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//setæ–¹æ³•ä¸€å®šè¦å†™ï¼Œåå°„æ—¶ç”¨è¿™ä¸ªæ–¹æ³•åˆå§‹åŒ–ç±»çš„å±æ€§ï¼ï¼ï¼</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMonsterId</span><span class="token punctuation">(</span><span class="token class-name">String</span> monsterId<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>monsterId <span class="token operator">=</span> monsterId<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSkill</span><span class="token punctuation">(</span><span class="token class-name">String</span> skill<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>skill <span class="token operator">=</span> skill<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"Monster&#123;"</span> <span class="token operator">+</span>                <span class="token string">"monsterId='"</span> <span class="token operator">+</span> monsterId <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>                <span class="token string">", name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>                <span class="token string">", skill='"</span> <span class="token operator">+</span> skill <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>                <span class="token char">'&#125;'</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æµ‹è¯•</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>test</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>lhyedu<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Monster</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ApplicationContext</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">ClassPathXmlApplicationContext</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBeanTest</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//1.åˆ›å»ºIOCå®¹å™¨å¯¹è±¡</span>        <span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>                <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//2.æä¾›getBeanè·å–å¯¹åº”å¯¹è±¡ï¼Œå‚æ•°æ˜¯&lt;bean>çš„id</span>        <span class="token class-name">Monster</span> monster01 <span class="token operator">=</span> ioc<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"monster01"</span><span class="token punctuation">,</span> <span class="token class-name">Monster</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>monster01<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240110205214273.png"></p><hr><h2 id="ç±»åŠ è½½è·¯å¾„"><a href="#ç±»åŠ è½½è·¯å¾„" class="headerlink" title="ç±»åŠ è½½è·¯å¾„"></a>ç±»åŠ è½½è·¯å¾„</h2><p><strong>é—®é¢˜ï¼šä¸ºä»€ä¹ˆ</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">ApplicationContext</span> ioc <span class="token operator">=</span>        <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>å³&#x3D;&#x3D;å¯è¯»å–beans.xmlæ–‡ä»¶ï¼Ÿ&#x3D;&#x3D;</strong></p><p><strong>classPath()ï¼šæ¥è·å–&#x3D;&#x3D;<code>ç±»åŠ è½½è·¯å¾„</code>ï¼Œå³ï¼šè¿è¡Œæ—¶çš„å®é™…å·¥ä½œè·¯å¾„&#x3D;&#x3D;</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBeanTest</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">classPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//è·å–ï¼š"ç±»åŠ è½½è·¯å¾„"</span>        <span class="token class-name">File</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240110211828700.png"></p>]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ioc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‡½æ•°è°ƒç”¨è¿‡ç¨‹å…·ä½“åˆ†æ</title>
      <link href="/2024/02/06/%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B%E5%85%B7%E4%BD%93%E5%88%86%E6%9E%90/"/>
      <url>/2024/02/06/%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B%E5%85%B7%E4%BD%93%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1 id="å‡½æ•°è°ƒç”¨"><a href="#å‡½æ•°è°ƒç”¨" class="headerlink" title="å‡½æ•°è°ƒç”¨"></a>å‡½æ•°è°ƒç”¨</h1><p><strong>æœ¬æ–‡ä½¿ç”¨å¦‚ä¸‹æºç¨‹åºå¯¹å‡½æ•°çš„åµŒå¥—è°ƒç”¨è¿›è¡Œè®²è§£ï¼š</strong></p><p><code>stack.c</code></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">N</span> <span class="token expression"><span class="token number">5</span></span></span><span class="token keyword">int</span> <span class="token function">abs</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>num <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> num <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> num<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token function">get_arr_abs_sum</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        sum <span class="token operator">+=</span> <span class="token function">abs</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"arr's abs sum = %d\n"</span><span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> arr<span class="token punctuation">[</span>N<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token function">get_arr_abs_sum</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> N<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ç¼–è¯‘ç”Ÿæˆå¯é‡å®šä½ç›®æ ‡æ–‡ä»¶<code>stack.o</code>ï¼š</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@lhyEdu01 ctest<span class="token punctuation">]</span><span class="token comment"># gcc -c stack.c -o stack.o -g</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>é€šè¿‡å¯¹<code>stack.o</code>æ–‡ä»¶è¿›è¡Œåç¼–è¯‘ï¼Œå¾—åˆ°æ±‡ç¼–ä»£ç ï¼Œå†æƒŠè¿›è¡Œæ·±å…¥åˆ†æ</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@lhyEdu01 ctest<span class="token punctuation">]</span><span class="token comment"># objdump -d stack.o</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-assembly" data-language="assembly"><code class="language-assembly">stack.oï¼š     æ–‡ä»¶æ ¼å¼ elf64-x86-64Disassembly of section .text:0000000000000000 &lt;abs&gt;:   0:55                   push   %rbp   1:48 89 e5             mov    %rsp,%rbp   4:89 7d fc             mov    %edi,-0x4(%rbp)   7:83 7d fc 00          cmpl   $0x0,-0x4(%rbp)   b:79 07                jns    14 &lt;abs+0x14&gt;   d:8b 45 fc             mov    -0x4(%rbp),%eax  10:f7 d8                neg    %eax  12:eb 03                jmp    17 &lt;abs+0x17&gt;  14:8b 45 fc             mov    -0x4(%rbp),%eax  17:5d                   pop    %rbp  18:c3                   retq   0000000000000019 &lt;get_arr_abs_sum&gt;:  19:55                   push   %rbp  1a:48 89 e5             mov    %rsp,%rbp  1d:48 83 ec 20          sub    $0x20,%rsp  21:48 89 7d e8          mov    %rdi,-0x18(%rbp)  25:89 75 e4             mov    %esi,-0x1c(%rbp)  28:c7 45 fc 00 00 00 00 movl   $0x0,-0x4(%rbp)  2f:c7 45 f8 00 00 00 00 movl   $0x0,-0x8(%rbp)  36:eb 22                jmp    5a &lt;get_arr_abs_sum+0x41&gt;  38:8b 45 f8             mov    -0x8(%rbp),%eax  3b:48 98                cltq     3d:48 8d 14 85 00 00 00 lea    0x0(,%rax,4),%rdx  44:00   45:48 8b 45 e8          mov    -0x18(%rbp),%rax  49:48 01 d0             add    %rdx,%rax  4c:8b 00                mov    (%rax),%eax  4e:99                   cltd     4f:31 d0                xor    %edx,%eax  51:29 d0                sub    %edx,%eax  53:01 45 fc             add    %eax,-0x4(%rbp)  56:83 45 f8 01          addl   $0x1,-0x8(%rbp)  5a:8b 45 f8             mov    -0x8(%rbp),%eax  5d:3b 45 e4             cmp    -0x1c(%rbp),%eax  60:7c d6                jl     38 &lt;get_arr_abs_sum+0x1f&gt;  62:8b 45 fc             mov    -0x4(%rbp),%eax  65:89 c6                mov    %eax,%esi  67:bf 00 00 00 00       mov    $0x0,%edi  6c:b8 00 00 00 00       mov    $0x0,%eax  71:e8 00 00 00 00       callq  76 &lt;get_arr_abs_sum+0x5d&gt;  76:90                   nop  77:c9                   leaveq   78:c3                   retq   0000000000000079 &lt;main&gt;:  79:55                   push   %rbp  7a:48 89 e5             mov    %rsp,%rbp  7d:48 83 ec 30          sub    $0x30,%rsp  81:89 7d dc             mov    %edi,-0x24(%rbp)  84:48 89 75 d0          mov    %rsi,-0x30(%rbp)  88:c7 45 e0 ff ff ff ff movl   $0xffffffff,-0x20(%rbp)  8f:c7 45 e4 02 00 00 00 movl   $0x2,-0x1c(%rbp)  96:c7 45 e8 fd ff ff ff movl   $0xfffffffd,-0x18(%rbp)  9d:c7 45 ec 04 00 00 00 movl   $0x4,-0x14(%rbp)  a4:c7 45 f0 fb ff ff ff movl   $0xfffffffb,-0x10(%rbp)  ab:48 8d 45 e0          lea    -0x20(%rbp),%rax  af:be 05 00 00 00       mov    $0x5,%esi  b4:48 89 c7             mov    %rax,%rdi  b7:e8 00 00 00 00       callq  bc &lt;main+0x43&gt;  bc:b8 00 00 00 00       mov    $0x0,%eax  c1:c9                   leaveq   c2:c3                   retq <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="è¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´"><a href="#è¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´" class="headerlink" title="è¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´"></a>è¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240206211348674.png" alt="è¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´"></p><hr><h2 id="åˆ†æmainå‡½æ•°"><a href="#åˆ†æmainå‡½æ•°" class="headerlink" title="åˆ†æmainå‡½æ•°"></a>åˆ†æmainå‡½æ•°</h2><p><strong>step1ï¼šå…ˆä¿å­˜<code>å­˜æ ˆåŸºbp</code>å’Œ<code>æ ˆå¸§sp</code>ï¼Œä¸ºmainå‡½æ•°é¢„åˆ†é…48Bæ ˆç©ºé—´</strong></p><pre class="line-numbers language-assembly" data-language="assembly"><code class="language-assembly">79:55                   push   %rbp7a:48 89 e5             mov    %rsp,%rbp7d:48 83 ec 30          sub    $0x30,%rsp #0x30å³48Båœ°å€ç©ºé—´<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>step2ï¼šåœ¨x86-64ä¸­ï¼Œå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°é€šå¸¸è¢«ä¼ é€’ç»™ <code>%edi</code> å¯„å­˜å™¨ï¼›å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°é€šå¸¸è¢«ä¼ é€’ç»™ <code>%rsi</code> å¯„å­˜å™¨</strong></p><pre class="line-numbers language-assembly" data-language="assembly"><code class="language-assembly">81:89 7d dc             mov    %edi,-0x24(%rbp)84:48 89 75 d0          mov    %rsi,-0x30(%rbp)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>step3ï¼šåˆå§‹åŒ–arræ•°ç»„</strong></p><pre class="line-numbers language-assembly" data-language="assembly"><code class="language-assembly">88:c7 45 e0 ff ff ff ff movl   $0xffffffff,-0x20(%rbp) #arrçš„é¦–åœ°å€8f:c7 45 e4 02 00 00 00 movl   $0x2,-0x1c(%rbp)96:c7 45 e8 fd ff ff ff movl   $0xfffffffd,-0x18(%rbp)9d:c7 45 ec 04 00 00 00 movl   $0x4,-0x14(%rbp)a4:c7 45 f0 fb ff ff ff movl   $0xfffffffb,-0x10(%rbp)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>step4ï¼šå³å°†è¿›è¡Œå‡½æ•°è°ƒç”¨ï¼Œå…ˆå°†get_arr_abs_sum(int * arr, int len)çš„å‚æ•°æ”¾å…¥å¯„å­˜å™¨ä¸­ã€‚<code>%esi</code>å­˜æ”¾çš„æ˜¯lenï¼›<code>%rax</code>å’Œ<code>%rdi</code>å­˜æ”¾çš„æ˜¯arrçš„åœ°å€</strong></p><pre class="line-numbers language-assembly" data-language="assembly"><code class="language-assembly">ab:48 8d 45 e0          lea    -0x20(%rbp),%raxaf:be 05 00 00 00       mov    $0x5,%esib4:48 89 c7             mov    %rax,%rdi<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240207104839753.png"></p><hr><h2 id="mainè°ƒç”¨get-arr-abs-sum"><a href="#mainè°ƒç”¨get-arr-abs-sum" class="headerlink" title="mainè°ƒç”¨get_arr_abs_sum"></a>mainè°ƒç”¨get_arr_abs_sum</h2><p><strong>step1ï¼š<code>call</code>æŒ‡ä»¤å®ç°å‡½æ•°<code>è·³è½¬</code>&amp;<code>è¿”å›</code>ï¼š</strong></p><ol><li><strong>å°†<code>call</code>æŒ‡ä»¤çš„ä¸‹ä¸€æ¡åœ°å€å…¥æ ˆ</strong></li><li><strong><code>%rip</code>æŒ‡å‘<code>main+0x43</code>å¤„</strong></li></ol><pre class="line-numbers language-assembly" data-language="assembly"><code class="language-assembly">b7:e8 00 00 00 00       callq  bc &lt;main+0x43&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240207105119113.png" alt="callæŒ‡ä»¤çš„2æ­¥æ“ä½œ"></p><p><strong>step2ï¼šget_arr_abs_sumå‡½æ•°å¼€å§‹æ‰§è¡Œã€‚<code>push   %rbp</code>å°†<code>%rbp</code>æŒ‡å‘æ ˆé¡¶ï¼Œä¸”å†…å®¹ä¸ºä¸Šå±‚å‡½æ•°çš„æ ˆåŸºå€<code>bp</code>ã€‚å†å¼€è¾Ÿ32Bçš„æ ˆç©ºé—´ä½œä¸ºget_arr_abs_sumå‡½æ•°çš„æ ˆå¸§ã€‚</strong></p><pre class="line-numbers language-assembly" data-language="assembly"><code class="language-assembly">0000000000000019 &lt;get_arr_abs_sum&gt;:  19:55                   push   %rbp  1a:48 89 e5             mov    %rsp,%rbp  1d:48 83 ec 20          sub    $0x20,%rsp<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240207111709789.png"></p><p><strong>step3ï¼šget_arr_abs_sumå¾ªç¯è°ƒç”¨abså‡½æ•°</strong></p><pre class="line-numbers language-assembly" data-language="assembly"><code class="language-assembly">21:48 89 7d e8          mov    %rdi,-0x18(%rbp)25:89 75 e4             mov    %esi,-0x1c(%rbp)28:c7 45 fc 00 00 00 00 movl   $0x0,-0x4(%rbp)2f:c7 45 f8 00 00 00 00 movl   $0x0,-0x8(%rbp)36:eb 22                jmp    5a &lt;get_arr_abs_sum+0x41&gt;38:8b 45 f8             mov    -0x8(%rbp),%eax3b:48 98                cltq   3d:48 8d 14 85 00 00 00 lea    0x0(,%rax,4),%rdx44:00 45:48 8b 45 e8          mov    -0x18(%rbp),%rax49:48 01 d0             add    %rdx,%rax4c:8b 00                mov    (%rax),%eax4e:99                   cltd   4f:31 d0                xor    %edx,%eax51:29 d0                sub    %edx,%eax53:01 45 fc             add    %eax,-0x4(%rbp)56:83 45 f8 01          addl   $0x1,-0x8(%rbp)5a:8b 45 f8             mov    -0x8(%rbp),%eax5d:3b 45 e4             cmp    -0x1c(%rbp),%eax60:7c d6                jl     38 &lt;get_arr_abs_sum+0x1f&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240207122222011.png"></p><hr><h2 id="get-arr-abs-sumè°ƒç”¨absç»“æŸ"><a href="#get-arr-abs-sumè°ƒç”¨absç»“æŸ" class="headerlink" title="get_arr_abs_sumè°ƒç”¨absç»“æŸ"></a>get_arr_abs_sumè°ƒç”¨absç»“æŸ</h2><blockquote><p>å‡è®¾æ­¤æ—¶æ˜¯forå¾ªç¯çš„æœ€åä¸€æ¬¡è°ƒç”¨</p></blockquote><p><strong>step1ï¼šabsæ‰§è¡Œ<code>ret</code>æŒ‡ä»¤ï¼š</strong></p><ol><li><strong>é‡Šæ”¾æ ˆç©ºé—´ï¼Œå†å°†æ ˆé¡¶çš„è¿”å›åœ°å€<code>get_arr_abs_sum_call_next_ip</code>ä»æ ˆä¸­å¼¹å‡ºï¼Œ</strong></li><li><strong>å¹¶å†™å…¥<code>%rip</code>å¯„å­˜å™¨ä¸­</strong></li></ol><pre class="line-numbers language-assembly" data-language="assembly"><code class="language-assembly">18:c3                   retq   <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240207123243410.png"></p><hr><h2 id="mainè°ƒç”¨get-arr-abs-sumç»“æŸ"><a href="#mainè°ƒç”¨get-arr-abs-sumç»“æŸ" class="headerlink" title="mainè°ƒç”¨get_arr_abs_sumç»“æŸ"></a>mainè°ƒç”¨get_arr_abs_sumç»“æŸ</h2><p><strong>step1ï¼šget_arr_abs_sumæ‰§è¡Œ<code>ret</code>æŒ‡ä»¤ï¼š</strong></p><ol><li><strong>é‡Šæ”¾æ ˆç©ºé—´ï¼Œå†å°†æ ˆé¡¶çš„è¿”å›åœ°å€<code>main_call_next_ip</code>ä»æ ˆä¸­å¼¹å‡ºï¼Œ</strong></li><li><strong>å¹¶å†™å…¥<code>%rip</code>å¯„å­˜å™¨ä¸­</strong></li></ol><pre class="line-numbers language-assembly" data-language="assembly"><code class="language-assembly">78:c3                   retq  <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240207123632744.png"></p><hr><h2 id="è¿›ç¨‹ç»“æŸï¼Œè¿”å›ç»“æœç»™è¿›ç¨‹è°ƒåº¦å™¨"><a href="#è¿›ç¨‹ç»“æŸï¼Œè¿”å›ç»“æœç»™è¿›ç¨‹è°ƒåº¦å™¨" class="headerlink" title="è¿›ç¨‹ç»“æŸï¼Œè¿”å›ç»“æœç»™è¿›ç¨‹è°ƒåº¦å™¨"></a>è¿›ç¨‹ç»“æŸï¼Œè¿”å›ç»“æœç»™è¿›ç¨‹è°ƒåº¦å™¨</h2><pre class="line-numbers language-assembly" data-language="assembly"><code class="language-assembly">bc:b8 00 00 00 00       mov    $0x0,%eaxc1:c9                   leaveq c2:c3                   retq <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Cè¯­è¨€ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>gdbè°ƒè¯•</title>
      <link href="/2024/02/05/gdb%E8%B0%83%E8%AF%95/"/>
      <url>/2024/02/05/gdb%E8%B0%83%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<h1 id="gdbè°ƒè¯•"><a href="#gdbè°ƒè¯•" class="headerlink" title="gdbè°ƒè¯•"></a>gdbè°ƒè¯•</h1><p><strong>æœ¬æ–‡ä»¥å¦‚ä¸‹æºä»£ç ä¸ºä¾‹è®²è¿°gdbè°ƒè¯•å·¥å…·çš„åŸºæœ¬ä½¿ç”¨ï¼š</strong></p><p><code>test.c</code></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;time.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">N</span> <span class="token expression"><span class="token number">10</span></span></span><span class="token keyword">char</span> <span class="token operator">*</span> str <span class="token operator">=</span> <span class="token string">"hello "</span><span class="token punctuation">;</span><span class="token keyword">int</span> var <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">init_arr</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> i<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">20</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token function">select_sort</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> k<span class="token punctuation">,</span> tmp<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        k <span class="token operator">=</span> i<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span>j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">></span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>                k <span class="token operator">=</span> j<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">!=</span> k<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            tmp <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>            arr<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token function">print_arr</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> i<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"arr[%d] = %d\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> arr<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">char</span> <span class="token operator">*</span> p <span class="token operator">=</span> <span class="token string">"hellod"</span><span class="token punctuation">;</span>    <span class="token function">srand</span><span class="token punctuation">(</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">init_arr</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> N<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">print_arr</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> N<span class="token punctuation">)</span><span class="token punctuation">;</span>    p<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'M'</span><span class="token punctuation">;</span>    <span class="token function">select_sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> N<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"----------------after sort-----------------\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">print_arr</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> N<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="ç¼–è¯‘æ—¶åŠ ä¸Š-gå‚æ•°å¾—åˆ°çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå†…éƒ¨åŒ…å«è°ƒè¯•ä¿¡æ¯"><a href="#ç¼–è¯‘æ—¶åŠ ä¸Š-gå‚æ•°å¾—åˆ°çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå†…éƒ¨åŒ…å«è°ƒè¯•ä¿¡æ¯" class="headerlink" title="ç¼–è¯‘æ—¶åŠ ä¸Š-gå‚æ•°å¾—åˆ°çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå†…éƒ¨åŒ…å«è°ƒè¯•ä¿¡æ¯"></a>ç¼–è¯‘æ—¶åŠ ä¸Š<code>-g</code>å‚æ•°å¾—åˆ°çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå†…éƒ¨åŒ…å«è°ƒè¯•ä¿¡æ¯</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@lhyEdu01 gdbtest<span class="token punctuation">]</span><span class="token comment"># gcc test.c -o a.out -g</span><span class="token punctuation">[</span>root@lhyEdu01 gdbtest<span class="token punctuation">]</span><span class="token comment"># gcc test.c -o a_no_debug.out</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240205230037483.png" alt="å¤šå‡ºæ¥çš„éƒ¨åˆ†ä¸ºç¼–è¯‘æ—¶äº§ç”Ÿçš„è°ƒè¯•ä¿¡æ¯" style="zoom:67%;" /><p><strong>æ˜¾ç„¶ï¼Œç¼–è¯‘å¸¦æœ‰è°ƒè¯•ä¿¡æ¯çš„ç›®æ ‡æ–‡ä»¶å ç”¨ç©ºé—´æ›´å¤§ã€‚</strong></p><h2 id="å¼€å¯gdb"><a href="#å¼€å¯gdb" class="headerlink" title="å¼€å¯gdb"></a>å¼€å¯gdb</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">gdb a.out<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/%E5%BC%80%E5%90%AFgdb.gif" alt="å¼€å¯gdb" style="zoom:67%;" /><hr><h2 id="æ˜¾ç¤ºæºç -é»˜è®¤10è¡Œ"><a href="#æ˜¾ç¤ºæºç -é»˜è®¤10è¡Œ" class="headerlink" title="æ˜¾ç¤ºæºç (é»˜è®¤10è¡Œ)"></a>æ˜¾ç¤ºæºç (é»˜è®¤10è¡Œ)</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">list line_number<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/gdb_list.gif" alt="æ˜¾ç¤ºæºç (é»˜è®¤10è¡Œ)" style="zoom:67%;" /><h2 id="ç»§ç»­æ˜¾ç¤º"><a href="#ç»§ç»­æ˜¾ç¤º" class="headerlink" title="ç»§ç»­æ˜¾ç¤º"></a>ç»§ç»­æ˜¾ç¤º</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">list <span class="token comment">#å¯ç¼©å†™</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/gdb_l2.gif" alt="ç»§ç»­æ˜¾ç¤º" style="zoom:67%;" /><hr><h2 id="è®¾ç½®æ–­ç‚¹"><a href="#è®¾ç½®æ–­ç‚¹" class="headerlink" title="è®¾ç½®æ–­ç‚¹"></a>è®¾ç½®æ–­ç‚¹</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">break</span> line_number <span class="token comment">#å¯ç¼©å†™</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/gdb_break.gif" alt="" style="zoom:67%;" /><h2 id="æŸ¥çœ‹æ–­ç‚¹ä¿¡æ¯è¡¨"><a href="#æŸ¥çœ‹æ–­ç‚¹ä¿¡æ¯è¡¨" class="headerlink" title="æŸ¥çœ‹æ–­ç‚¹ä¿¡æ¯è¡¨"></a>æŸ¥çœ‹æ–­ç‚¹ä¿¡æ¯è¡¨</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">info b<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/gdb_info.gif" style="zoom:67%;" /><h2 id="å•æ­¥æ‰§è¡Œ"><a href="#å•æ­¥æ‰§è¡Œ" class="headerlink" title="å•æ­¥æ‰§è¡Œ"></a>å•æ­¥æ‰§è¡Œ</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">run <span class="token comment">#å¯ç¼©å†™</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/gdb_run.gif" alt="æ­¤æ—¶åªæ˜¯å®šä½åˆ°æ–­ç‚¹ï¼Œè¿˜æœªæ‰§è¡Œ" style="zoom:67%;" /><h2 id="è¿›å…¥æ–­ç‚¹-step-into"><a href="#è¿›å…¥æ–­ç‚¹-step-into" class="headerlink" title="è¿›å…¥æ–­ç‚¹(step into)"></a>è¿›å…¥æ–­ç‚¹(step into)</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">step <span class="token comment">#å¯ç¼©å†™</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/gdb_step.gif" alt="" style="zoom:67%;" /><h2 id="æ‰§è¡Œä¸‹ä¸€æ­¥-step-next"><a href="#æ‰§è¡Œä¸‹ä¸€æ­¥-step-next" class="headerlink" title="æ‰§è¡Œä¸‹ä¸€æ­¥(step next)"></a>æ‰§è¡Œä¸‹ä¸€æ­¥(step next)</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">next <span class="token comment">#å¯ç¼©å†™</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/gdb_next.gif" alt="" style="zoom:67%;" /><h2 id="æŸ¥çœ‹å˜é‡çš„å€¼"><a href="#æŸ¥çœ‹å˜é‡çš„å€¼" class="headerlink" title="æŸ¥çœ‹å˜é‡çš„å€¼"></a>æŸ¥çœ‹å˜é‡çš„å€¼</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">p å˜é‡å <span class="token comment">#printç¼©å†™</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/gdb_p.gif" alt="" style="zoom:67%;" /><h2 id="æŸ¥çœ‹å˜é‡ç±»å‹"><a href="#æŸ¥çœ‹å˜é‡ç±»å‹" class="headerlink" title="æŸ¥çœ‹å˜é‡ç±»å‹"></a>æŸ¥çœ‹å˜é‡ç±»å‹</h2><pre class="line-numbers language-none"><code class="language-none">ptype å˜é‡å #printç¼©å†™<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/gdb_ptype.gif" style="zoom:67%;" /><h2 id="æŸ¥çœ‹å½“å‰å­˜æ´»çš„æ ˆå¸§åˆ—è¡¨"><a href="#æŸ¥çœ‹å½“å‰å­˜æ´»çš„æ ˆå¸§åˆ—è¡¨" class="headerlink" title="æŸ¥çœ‹å½“å‰å­˜æ´»çš„æ ˆå¸§åˆ—è¡¨"></a>æŸ¥çœ‹å½“å‰å­˜æ´»çš„æ ˆå¸§åˆ—è¡¨</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">bt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240206105542177.png" alt="" style="zoom:67%;" /><p>[ç»†èŠ‚å†…å®¹æŸ¥çœ‹ï¼šè¿‡ç¨‹è°ƒç”¨](<a href="https://www.bilibili.com/video/BV19X4y1P7Pn/?spm_id_from=333.337.search-card.all.click&vd_source=59094c15e7c1087c27f04ff9f927d393">ã€CSAPP-æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‘3-7. è¿‡ç¨‹ï¼ˆå‡½æ•°è°ƒç”¨ï¼‰_å“”å“©å“”å“©_bilibili</a>)</p><h2 id="åˆ‡æ¢æ ˆå¸§"><a href="#åˆ‡æ¢æ ˆå¸§" class="headerlink" title="åˆ‡æ¢æ ˆå¸§"></a>åˆ‡æ¢æ ˆå¸§</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">frame btæŒ‡ä»¤å¾—åˆ°çš„æ ˆå¸§ç¼–å·<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/gdb_frame.gif" alt="" style="zoom:67%;" /><h2 id="è·³å‡ºæ–­ç‚¹-step-out"><a href="#è·³å‡ºæ–­ç‚¹-step-out" class="headerlink" title="è·³å‡ºæ–­ç‚¹(step out)"></a>è·³å‡ºæ–­ç‚¹(step out)</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">finsih<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/gdb_finish.gif" alt="" style="zoom:67%;" /><hr><h2 id="è·³å‡ºæ–­ç‚¹å¹¶ç»§ç»­æ‰§è¡Œ"><a href="#è·³å‡ºæ–­ç‚¹å¹¶ç»§ç»­æ‰§è¡Œ" class="headerlink" title="è·³å‡ºæ–­ç‚¹å¹¶ç»§ç»­æ‰§è¡Œ"></a>è·³å‡ºæ–­ç‚¹å¹¶ç»§ç»­æ‰§è¡Œ</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">continue</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240205225520944.png" alt="" style="zoom: 67%;" /><hr><h2 id="å¤„ç†æ®µé”™è¯¯-æ— è¡Œå·æç¤º"><a href="#å¤„ç†æ®µé”™è¯¯-æ— è¡Œå·æç¤º" class="headerlink" title="å¤„ç†æ®µé”™è¯¯(æ— è¡Œå·æç¤º)"></a>å¤„ç†æ®µé”™è¯¯(æ— è¡Œå·æç¤º)</h2><p>ä»¥<code>test.c</code>æºç¨‹åºä¸ºä¾‹ï¼Œåœ¨mainå‡½æ•°å†…æ·»åŠ å¦‚ä¸‹é”™è¯¯ï¼Œ</p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240206093814809.png" alt="å¸¸é‡åŒºæ•°æ®ä¸å¯è¢«ä¿®æ”¹" style="zoom: 67%;" /><p>ç¼–è¯‘åè¿è¡Œï¼Œ<strong>æŠ¥é”™ï¼š<code>æ®µé”™è¯¯</code>ï¼Œä¸”æ— æç¤ºè¡Œå·ï¼Œæ— æ³•é€šè¿‡è¡Œå·debug</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240206094111744.png" alt="" style="zoom: 67%;" /><p><strong>è§£å†³ï¼šå¼€å¯gdbåç›´æ¥æ‰§è¡Œ<code>run</code>æŒ‡ä»¤ï¼Œç¨‹åºåœæ­¢å¤„å³ä¸º<code>æ®µé”™è¯¯</code>ä½ç½®</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/gdb_r2.gif" alt="" style="zoom:67%;" /><hr><h2 id="è°ƒè¯•å¸¦æœ‰å‘½ä»¤è¡Œå‚æ•°çš„å¯æ‰§è¡Œæ–‡ä»¶"><a href="#è°ƒè¯•å¸¦æœ‰å‘½ä»¤è¡Œå‚æ•°çš„å¯æ‰§è¡Œæ–‡ä»¶" class="headerlink" title="è°ƒè¯•å¸¦æœ‰å‘½ä»¤è¡Œå‚æ•°çš„å¯æ‰§è¡Œæ–‡ä»¶"></a>è°ƒè¯•å¸¦æœ‰å‘½ä»¤è¡Œå‚æ•°çš„å¯æ‰§è¡Œæ–‡ä»¶</h2><p>ä¿®æ”¹<code>test.c</code>æºç¨‹åºçš„mainå‡½æ•°ï¼Œ</p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240206100409832.png"></p><h3 id="ç›´æ¥è¿è¡Œï¼š"><a href="#ç›´æ¥è¿è¡Œï¼š" class="headerlink" title="ç›´æ¥è¿è¡Œï¼š"></a>ç›´æ¥è¿è¡Œï¼š</h3><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240206100937068.png" alt="" style="zoom: 67%;" /><h3 id="gdbè°ƒè¯•ä¸­è¿è¡Œï¼š"><a href="#gdbè°ƒè¯•ä¸­è¿è¡Œï¼š" class="headerlink" title="gdbè°ƒè¯•ä¸­è¿è¡Œï¼š"></a>gdbè°ƒè¯•ä¸­è¿è¡Œï¼š</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">set</span> args argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> argv<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/gdb_set_args.gif" alt="" style="zoom:67%;" /><hr><h2 id="é€€å‡ºgdb"><a href="#é€€å‡ºgdb" class="headerlink" title="é€€å‡ºgdb"></a>é€€å‡ºgdb</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">quit<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Cè¯­è¨€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cè¯­è¨€å·¥å…·é“¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>chapter7â€”é“¾æ¥</title>
      <link href="/2024/02/04/chapter7%E2%80%94%E9%93%BE%E6%8E%A5/"/>
      <url>/2024/02/04/chapter7%E2%80%94%E9%93%BE%E6%8E%A5/</url>
      
        <content type="html"><![CDATA[<h1 id="chapter7â€”é“¾æ¥"><a href="#chapter7â€”é“¾æ¥" class="headerlink" title="chapter7â€”é“¾æ¥"></a>chapter7â€”é“¾æ¥</h1><p>å·²çŸ¥ä¸€ä¸ªmain.cæ–‡ä»¶</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"> <span class="token number">1</span> #include<span class="token operator">&lt;</span>stdio<span class="token punctuation">.</span>h<span class="token operator">></span> <span class="token number">2</span> <span class="token comment">//countå’Œvalueä¸¤ä¸ªå…¨å±€å˜é‡</span> <span class="token number">3</span> <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token number">4</span> <span class="token keyword">int</span> value<span class="token punctuation">;</span> <span class="token number">5</span>  <span class="token number">6</span> <span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> sum<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token number">7</span>         <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"sum is:%d\n"</span><span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token number">8</span> <span class="token punctuation">&#125;</span> <span class="token number">9</span> <span class="token number">10</span><span class="token number">11</span> <span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token number">12</span>         <span class="token keyword">static</span> <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token number">13</span>         <span class="token keyword">static</span> <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token number">14</span>         <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token number">15</span> <span class="token number">16</span>         <span class="token function">func</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b <span class="token operator">+</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token number">17</span>         <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token number">18</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é€šè¿‡<code>gcc -c main.c</code>å¾—åˆ°å¯é‡å®šä½äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå†æ ¹æ®<code>wc -c main.o</code>æŸ¥çœ‹main.oæ–‡ä»¶çš„å¤§å°</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># gcc <span class="token operator">-</span>c main<span class="token punctuation">.</span>c<span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># wc <span class="token operator">-</span>c main<span class="token punctuation">.</span>o<span class="token number">1856</span> main<span class="token punctuation">.</span>o<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨<code>readelf -h main.o</code>æŸ¥çœ‹ELFå¯é‡å®šä½ç›®æ ‡æ–‡ä»¶çš„ELFå¤´(ELF Header)çš„å…·ä½“å†…å®¹</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">readelf <span class="token operator">-</span>h main<span class="token punctuation">.</span>o<span class="token comment">//-hï¼šåªæ˜¾ç¤ºELF Headerçš„ä¿¡æ¯</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># readelf <span class="token operator">-</span>h main<span class="token punctuation">.</span>oELF å¤´ï¼š  Magicï¼š  <span class="token number">7f</span> <span class="token number">45</span> <span class="token number">4</span>c <span class="token number">46</span> <span class="token number">02</span> <span class="token number">01</span> <span class="token number">01</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span>   ç±»åˆ«<span class="token operator">:</span>                              ELF64  æ•°æ®<span class="token operator">:</span>                              <span class="token number">2</span> è¡¥ç ï¼Œå°ç«¯åº <span class="token punctuation">(</span>little endian<span class="token punctuation">)</span>  ç‰ˆæœ¬<span class="token operator">:</span>                              <span class="token number">1</span> <span class="token punctuation">(</span>current<span class="token punctuation">)</span>  OS<span class="token operator">/</span>ABI<span class="token operator">:</span>                            UNIX <span class="token operator">-</span> System V  ABI ç‰ˆæœ¬<span class="token operator">:</span>                          <span class="token number">0</span>  ç±»å‹<span class="token operator">:</span>                              <span class="token function">REL</span> <span class="token punctuation">(</span>å¯é‡å®šä½æ–‡ä»¶<span class="token punctuation">)</span>  ç³»ç»Ÿæ¶æ„<span class="token operator">:</span>                          Advanced Micro Devices X86<span class="token operator">-</span><span class="token number">64</span>  ç‰ˆæœ¬<span class="token operator">:</span>                              <span class="token number">0x1</span>  å…¥å£ç‚¹åœ°å€ï¼š              <span class="token number">0x0</span>  ç¨‹åºå¤´èµ·ç‚¹ï¼š              <span class="token number">0</span> <span class="token punctuation">(</span>bytes into file<span class="token punctuation">)</span>  Start of section headers<span class="token operator">:</span>          <span class="token number">1024</span> <span class="token punctuation">(</span>bytes into file<span class="token punctuation">)</span>  æ ‡å¿—ï¼š             <span class="token number">0x0</span>  æœ¬å¤´çš„å¤§å°ï¼š       <span class="token number">64</span> <span class="token punctuation">(</span>å­—èŠ‚<span class="token punctuation">)</span>  ç¨‹åºå¤´å¤§å°ï¼š       <span class="token number">0</span> <span class="token punctuation">(</span>å­—èŠ‚<span class="token punctuation">)</span>  Number of program headers<span class="token operator">:</span>         <span class="token number">0</span>  èŠ‚å¤´å¤§å°ï¼š         <span class="token number">64</span> <span class="token punctuation">(</span>å­—èŠ‚<span class="token punctuation">)</span>  èŠ‚å¤´æ•°é‡ï¼š         <span class="token number">13</span>  å­—ç¬¦ä¸²è¡¨ç´¢å¼•èŠ‚å¤´ï¼š <span class="token number">12</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å¯é‡å®šä½ç›®æ ‡æ–‡ä»¶-ELFæ–‡ä»¶"><a href="#å¯é‡å®šä½ç›®æ ‡æ–‡ä»¶-ELFæ–‡ä»¶" class="headerlink" title="å¯é‡å®šä½ç›®æ ‡æ–‡ä»¶(ELFæ–‡ä»¶)"></a>å¯é‡å®šä½ç›®æ ‡æ–‡ä»¶(ELFæ–‡ä»¶)</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20231228190228140.png" alt="ELFæ–‡ä»¶"></p><h2 id="section-èŠ‚-çš„å…·ä½“å†…å®¹"><a href="#section-èŠ‚-çš„å…·ä½“å†…å®¹" class="headerlink" title="section(èŠ‚)çš„å…·ä½“å†…å®¹"></a>section(èŠ‚)çš„å…·ä½“å†…å®¹</h2><ol><li><strong><code>.text</code>ï¼šå·²ç¼–è¯‘ç¨‹åºçš„åŠå…¶ä»£ç </strong></li><li><strong><code>.rodata</code>ï¼šåªè¯»æ•°æ®ï¼Œå¦‚ï¼šprinfå‡½æ•°å†…çš„æ ¼å¼ä¸²</strong></li><li><strong><code>.data</code>ï¼š<u>å·²åˆå§‹åŒ–</u>çš„å…¨å±€å’Œé™æ€Cå˜é‡</strong></li><li><strong><code>.bss(Better Save Space)</code>ï¼š<u>æœªåˆå§‹åŒ–</u>çš„å…¨å±€å’Œé™æ€Cå˜é‡</strong></li><li><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20231228191717559.png" style="zoom: 33%;" /></li></ol><h2 id="ç¬¦å·-ç¬¦å·è¡¨-symtabï¼‰"><a href="#ç¬¦å·-ç¬¦å·è¡¨-symtabï¼‰" class="headerlink" title="ç¬¦å·&amp;ç¬¦å·è¡¨(.symtabï¼‰"></a>ç¬¦å·&amp;ç¬¦å·è¡¨(.symtabï¼‰</h2><p><strong>å¯¹äºæ¯ä¸€ä¸ªå¯é‡å®šä½ç›®æ ‡æ–‡ä»¶(ELF)mï¼Œéƒ½æœ‰ä¸€ä¸ªç¬¦å·è¡¨(.symtabèŠ‚ä¸­)ã€‚åœ¨é“¾æ¥å™¨çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œæœ‰ä¸‰ç§ä¸åŒçš„ç¬¦å·ï¼š</strong></p><ol><li><strong><code>å…¨å±€ç¬¦å·(Global Symbols)</code>ï¼šæ¨¡å—må®šä¹‰+èƒ½è¢«å…¶ä»–æ¨¡å—å¼•ç”¨</strong></li><li><strong><code>å¤–éƒ¨ç¬¦å·(Externals Symbols)</code>ï¼šå…¶ä»–æ¨¡å—å®šä¹‰+èƒ½è¢«æ¨¡å—må¼•ç”¨</strong></li><li><strong><code>å±€éƒ¨ç¬¦å·(Local Symbols)</code>ï¼šåªè¢«æ¨¡å—må®šä¹‰+å…¶ä»–æ¨¡å—ä¸èƒ½å¼•ç”¨ã€‚å¦‚ï¼šä»»ä½•å¸¦æœ‰staticä¿®é¥°çš„å…¨å±€å˜é‡æˆ–å‡½æ•° éƒ½æ˜¯æ¨¡å—ç§æœ‰çš„ï¼Œå…¶ä»–æ¨¡å—ä¸èƒ½è®¿é—®ï¼Œç±»ä¼¼Javaçš„privateå…³é”®å­—</strong></li></ol><blockquote><p><strong>æ³¨ï¼š</strong>.symtabèŠ‚çš„ç¬¦å·è¡¨ä¸åŒ…å«<strong>æœ¬åœ°éé™æ€å±€éƒ¨å˜é‡</strong>ï¼Œå› ä¸ºå…¶åœ¨<strong>æ ˆä¸­è¢«ç®¡ç†</strong>ï¼</p></blockquote><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># readelf <span class="token operator">-</span>s main<span class="token punctuation">.</span>oSymbol table <span class="token char">'.symtab'</span> contains <span class="token number">16</span> entries<span class="token operator">:</span>   Num<span class="token operator">:</span>    Value          Size Type    Bind   Vis      Ndx Name     <span class="token number">0</span><span class="token operator">:</span> <span class="token number">0000000000000000</span>     <span class="token number">0</span> NOTYPE  LOCAL  DEFAULT  UND      <span class="token number">1</span><span class="token operator">:</span> <span class="token number">0000000000000000</span>     <span class="token number">0</span> FILE    LOCAL  DEFAULT  ABS main<span class="token punctuation">.</span>c     <span class="token number">2</span><span class="token operator">:</span> <span class="token number">0000000000000000</span>     <span class="token number">0</span> SECTION LOCAL  DEFAULT    <span class="token number">1</span>      <span class="token number">3</span><span class="token operator">:</span> <span class="token number">0000000000000000</span>     <span class="token number">0</span> SECTION LOCAL  DEFAULT    <span class="token number">3</span>      <span class="token number">4</span><span class="token operator">:</span> <span class="token number">0000000000000000</span>     <span class="token number">0</span> SECTION LOCAL  DEFAULT    <span class="token number">4</span>      <span class="token number">5</span><span class="token operator">:</span> <span class="token number">0000000000000000</span>     <span class="token number">0</span> SECTION LOCAL  DEFAULT    <span class="token number">5</span>      <span class="token number">6</span><span class="token operator">:</span> <span class="token number">0000000000000004</span>     <span class="token number">4</span> OBJECT  LOCAL  DEFAULT    <span class="token number">3</span> a<span class="token punctuation">.</span><span class="token number">2185</span>     <span class="token number">7</span><span class="token operator">:</span> <span class="token number">0000000000000000</span>     <span class="token number">4</span> OBJECT  LOCAL  DEFAULT    <span class="token number">4</span> b<span class="token punctuation">.</span><span class="token number">2186</span>     <span class="token number">8</span><span class="token operator">:</span> <span class="token number">0000000000000000</span>     <span class="token number">0</span> SECTION LOCAL  DEFAULT    <span class="token number">7</span>      <span class="token number">9</span><span class="token operator">:</span> <span class="token number">0000000000000000</span>     <span class="token number">0</span> SECTION LOCAL  DEFAULT    <span class="token number">8</span>     <span class="token number">10</span><span class="token operator">:</span> <span class="token number">0000000000000000</span>     <span class="token number">0</span> SECTION LOCAL  DEFAULT    <span class="token number">6</span>     <span class="token number">11</span><span class="token operator">:</span> <span class="token number">0000000000000000</span>     <span class="token number">4</span> OBJECT  GLOBAL DEFAULT    <span class="token number">3</span> count    <span class="token number">12</span><span class="token operator">:</span> <span class="token number">0000000000000004</span>     <span class="token number">4</span> OBJECT  GLOBAL DEFAULT  COM value    <span class="token number">13</span><span class="token operator">:</span> <span class="token number">0000000000000000</span>    <span class="token number">33</span> FUNC    GLOBAL DEFAULT    <span class="token number">1</span> func    <span class="token number">14</span><span class="token operator">:</span> <span class="token number">0000000000000000</span>     <span class="token number">0</span> NOTYPE  GLOBAL DEFAULT  UND printf    <span class="token number">15</span><span class="token operator">:</span> <span class="token number">0000000000000021</span>    <span class="token number">55</span> FUNC    GLOBAL DEFAULT    <span class="token number">1</span> main<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>Typeï¼šFUNC-å‡½æ•°ã€OBJECT-å˜é‡æ•°ç»„ç­‰æ•°æ®å¯¹è±¡</p><p>Valueï¼šè¡¨ç¤ºå‡½æ•°ç›¸å¯¹äº.text sectionèµ·å§‹ä½ç½®çš„åç§»é‡</p><p>Bindï¼šä½œç”¨èŒƒå›´ã€‚å±€éƒ¨&#x2F;å…¨å±€</p><p>Ndxï¼šè¡¨ç¤ºèŠ‚å¤´éƒ¨è¡¨çš„sectionçš„æ•°ç»„ç´¢å¼•ã€‚å¦‚ï¼šNdx&#x3D;1è¡¨ç¤ºåœ¨.textèŠ‚ï¼›Ndx&#x3D;3è¡¨ç¤ºåœ¨.dataèŠ‚</p><blockquote><p>Ndxè¡¨ç¤ºä¸­æœ‰<strong>3ä¸ªä¼ªèŠ‚ï¼š</strong></p></blockquote><blockquote><ul><li><strong><code>ABS</code>ï¼šä¸è¯¥è¢«é‡å®šä½çš„ç¬¦å·</strong></li><li><strong><code>UNDEF</code>ï¼šæœªå®šä¹‰çš„ç¬¦å·</strong></li><li><strong><code>COMMON</code>ï¼šæœªè¢«åˆ†é…ä½ç½®çš„åˆå§‹åŒ–çš„æ•°æ®ç›®æ ‡</strong></li></ul></blockquote><blockquote><p><strong>æ³¨æ„ï¼šå˜é‡countå’Œvalueå±äºä¸åŒsectionçš„åŸå› ï¼šcountåˆå§‹åŒ–äº†ï¼Œvalueæ²¡æœ‰åˆå§‹åŒ–</strong></p></blockquote><blockquote><p><strong>COMMONï¼šæœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡ï¼›.bssèŠ‚ï¼šæœªåˆå§‹åŒ–çš„é™æ€å˜é‡+åˆå§‹åŒ–ä¸º0çš„é™æ€&#x2F;å…¨å±€å˜é‡</strong></p></blockquote></blockquote><h3 id="ç¬¦å·è§£æ"><a href="#ç¬¦å·è§£æ" class="headerlink" title="ç¬¦å·è§£æ"></a>ç¬¦å·è§£æ</h3><p>å¯¹ä»¥ä¸‹æºæ–‡ä»¶è¿›è¡Œç¼–è¯‘linkerror.cè¿›è¡Œç¼–è¯‘æ±‡ç¼–ï¼Œç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶linkerror.oã€‚</p><p>å…¶ä¸­ï¼Œè¯¥ä»£ç <strong>ä»…å¯¹å‡½æ•°fooè¿›è¡Œå£°æ˜</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>gcc -c linkerror.c </code>ï¼Œç¼–è¯‘å¯ä»¥é€šè¿‡ï¼<font size=3 color=red>å½“ç¼–è¯‘å™¨é‡åˆ°ä¸€ä¸ªä¸æ˜¯åœ¨å½“å‰æ¨¡å—å®šä¹‰çš„ç¬¦å·(å˜é‡&#x2F;å‡½æ•°å)æ—¶ï¼Œä¼šå‡è®¾è¯¥ç¬¦å·æ˜¯åœ¨åœ¨å…¶ä»–æ¨¡å—åœ¨å®šä¹‰çš„ã€‚</font></p><p><font size=3 color=red>ä½†æ˜¯é“¾æ¥å™¨(ld)æ— æ³•è§£æå¯¹fooçš„å¼•ç”¨æ—¶ï¼Œå°±ä¼šç»ˆæ­¢ï¼</font></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># gcc <span class="token operator">-</span>Wall <span class="token operator">-</span>Og <span class="token operator">-</span>o linkerror linkerror<span class="token punctuation">.</span>c<span class="token operator">/</span>tmp<span class="token operator">/</span>cc5EcYAf<span class="token punctuation">.</span>oï¼šåœ¨å‡½æ•°â€˜mainâ€™ä¸­ï¼šlinkerror<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">.</span>text<span class="token operator">+</span><span class="token number">0x5</span><span class="token punctuation">)</span>ï¼šå¯¹â€˜fooâ€™æœªå®šä¹‰çš„å¼•ç”¨collect2<span class="token operator">:</span> é”™è¯¯ï¼šld è¿”å› <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><font size=4 color=red>å¼•å‡ºé—®é¢˜ï¼šâ€å…¨å±€ç¬¦å·â€åœ¨å¤šä¸ªå¯é‡å®šä½ç›®æ ‡æ–‡ä»¶ä¸­ã€åŒåå®šä¹‰ã€‘ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿ</font></p><p><strong>ç¼–è¯‘æ—¶ï¼Œç¼–è¯‘å™¨å‘æ±‡ç¼–å™¨è¾“å‡ºæ¯ä¸ªå…¨å±€ç¬¦å·çš„ç±»å‹ï¼š</strong></p><ul><li><strong><code>Strong symbols(å¼ºç¬¦å·)</code>ï¼šå‡½æ•°å’Œå·²åˆå§‹åŒ–çš„å…¨å±€å˜é‡</strong></li><li><strong><code>Weak symbols(å¼±ç¬¦å·)</code>ï¼šæœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡</strong></li></ul><p><strong>æ±‡ç¼–æ—¶ï¼Œæ±‡ç¼–å™¨å°†å¼ºå¼±ä¿¡æ¯éšå«åœ°ç¼–ç åœ¨ELFçš„ç¬¦å·è¡¨(.symtab)é‡Œ</strong></p><p><strong>é“¾æ¥æ—¶ï¼Œé“¾æ¥å™¨æ ¹æ®ä»¥ä¸‹3ç§æƒ…å†µå¤„ç†å¤šé‡å®šä¹‰çš„å…¨å±€ç¬¦å·ï¼š</strong></p><ol><li><p><strong>è§„åˆ™1ï¼šä¸å…è®¸æœ‰å¤šä¸ªåŒåçš„å¼ºç¬¦å·</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/*foo1.c*/</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/*bar1.c*/</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># gcc foo1<span class="token punctuation">.</span>c bar1<span class="token punctuation">.</span>c<span class="token operator">/</span>tmp<span class="token operator">/</span>ccSHeCo9<span class="token punctuation">.</span>oï¼šåœ¨å‡½æ•°â€˜mainâ€™ä¸­ï¼šbar1<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">.</span>text<span class="token operator">+</span><span class="token number">0x0</span><span class="token punctuation">)</span><span class="token operator">:</span> main çš„å¤šé‡å®šä¹‰<span class="token operator">/</span>tmp<span class="token operator">/</span>ccnLYE7L<span class="token punctuation">.</span>o<span class="token operator">:</span>foo1<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">.</span>text<span class="token operator">+</span><span class="token number">0x0</span><span class="token punctuation">)</span>ï¼šç¬¬ä¸€æ¬¡åœ¨æ­¤å®šä¹‰collect2<span class="token operator">:</span> é”™è¯¯ï¼šld è¿”å› <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><strong>è§„åˆ™2ï¼šä¸€ä¸ªå¼ºç¬¦å·ä¸å¤šä¸ªå¼±ç¬¦å·åŒåï¼Œé‚£ä¹ˆé€‰æ‹©å¼ºç¬¦å·</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/*foo2.c*/</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">15213</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"x = %d\n"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/*bar2.c*/</span><span class="token keyword">int</span> x<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        x <span class="token operator">=</span> <span class="token number">15212</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># gcc foo2<span class="token punctuation">.</span>c bar2<span class="token punctuation">.</span>c<span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># <span class="token punctuation">.</span><span class="token operator">/</span>a<span class="token punctuation">.</span>outx <span class="token operator">=</span> <span class="token number">15212</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å‡½æ•°få°†xçš„å€¼ç”±15213æ”¹ä¸º15212ã€‚ä¸€ä¸ªæ¨¡å—(bar2.c)é‡Œçš„xæœªåˆå§‹åŒ–(å¼±ç¬¦å·)ï¼Œé“¾æ¥å™¨ä¼šå®‰é™åœ°é€‰æ‹©å…¶ä»–æ¨¡å—(foo2.c)é‡Œå®šä¹‰çš„å¼ºç¬¦å·</p></li><li><p><strong>è§„åˆ™3ï¼šå¦‚æœæœ‰å¤šä¸ªå¼±ç¬¦å·åŒåï¼Œä»»æ„é€‰æ‹©ä¸€ä¸ª</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/*foo3.c*/</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">15212</span><span class="token punctuation">;</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">15213</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"x = 0x%x y = 0x%x\n"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/*bar3.c*/</span><span class="token keyword">double</span> x<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">0.0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># gcc foo3<span class="token punctuation">.</span>c bar3<span class="token punctuation">.</span>c<span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>ld<span class="token operator">:</span> Warning<span class="token operator">:</span> alignment <span class="token number">4</span> of symbol `x' in <span class="token operator">/</span>tmp<span class="token operator">/</span>ccWPcPGG<span class="token punctuation">.</span>o is smaller than <span class="token number">8</span> in <span class="token operator">/</span>tmp<span class="token operator">/</span>cc3MhEaU<span class="token punctuation">.</span>o<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ol><h4 id="é™æ€åº“-static-library"><a href="#é™æ€åº“-static-library" class="headerlink" title="é™æ€åº“(static library)"></a>é™æ€åº“(static library)</h4><p>åœ¨å…±äº«åº“å‡ºç°ä¹‹å‰ï¼Œ<strong>å…¬ç”¨åŠŸèƒ½(atoi&#x2F;printf&#x2F;scanf&#x2F;strcpy&#x2F;randç­‰)<strong>æ˜¯ä»¥</strong>é™æ€åº“</strong>çš„å½¢å¼å­˜åœ¨çš„ï¼Œå®ƒæŠŠ<strong>é€šç”¨åŠŸèƒ½æ¨¡å—çš„å¤šä¸ªç›®æ ‡æ–‡ä»¶æ‰“åŒ…åœ¨ä¸€èµ·å½¢æˆ<code>*.a</code>çš„æ–‡ä»¶(å¦‚libc.a)<strong>ï¼Œç”¨åˆ°å®ƒçš„ç¨‹åºåªéœ€è¦åœ¨é“¾æ¥æ—¶æŒ‡å®šè¿™ä¸ªåº“æ–‡ä»¶ï¼Œ</strong>é“¾æ¥å™¨å°±ä¼šä»è¿™ä¸ªåº“ä¸­æŠ½å–å‡ºç”¨åˆ°çš„åŠŸèƒ½ä»£ç æ‹·è´åˆ°ç›®æ ‡ç¨‹åºä¸­</strong>ï¼Œè€Œä¸éœ€è¦æ¯æ¬¡éƒ½å¯¹è¿™äº›é€šç”¨åŠŸèƒ½ä»£ç é‡æ–°ç¼–è¯‘ã€‚</p><p><strong>å¯¹æ–‡ä»¶<em>addvec.c</em>å’Œ<em>multvec.c</em>è¿›è¡Œç¼–è¯‘<code>gcc -c addvec.c multvec.c</code>ï¼Œå¾—åˆ°ç›®æ ‡æ¨¡å—</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> addcnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">addvec</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span> y<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span> z<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> i<span class="token punctuation">;</span>                addcnt<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                z<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> multcnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">multvec</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span> y<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span> z<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> i<span class="token punctuation">;</span>                multcnt<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                z<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ä½¿ç”¨<code>ARå·¥å…·</code>å°†ä¸¤ä¸ªç›®æ ‡æ¨¡å—<em>addvec.o multvec.o</em>æ‰“åŒ…æˆé™æ€åº“(<code>ar rcs libxxx.a xxx.o xxx.o</code>)</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># ar rcs linvector<span class="token punctuation">.</span>a addvec<span class="token punctuation">.</span>o multvec<span class="token punctuation">.</span>o<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä»¥main2.cæ–‡ä»¶ä¸ºä¾‹</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"vector.h"</span></span><span class="token keyword">int</span> x<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">int</span> y<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">int</span> z<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">addvec</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"z = [%d %d]\n"</span><span class="token punctuation">,</span> z<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> z<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­â€vector.hâ€ä¸­åŒ…å«å¯¹addvecå‡½æ•°çš„å£°æ˜ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">addvec</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span> y<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span> z<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>ç¼–è¯‘å’Œé“¾æ¥è¾“å…¥æ–‡ä»¶main2.oå’Œlibvector.a</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/1125E426BCF8DCF854B292C45FC50D8A.jpg" style="zoom:20%;" /><blockquote><p><strong>é“¾æ¥å™¨åˆ¤æ–­main2.oå¼•ç”¨äº†addvec.oå®šä¹‰çš„addvecç¬¦å·ï¼Œæ‰€ä»¥å¤åˆ¶addvec.oåˆ°å¯æ‰§è¡Œæ–‡ä»¶ã€‚</strong></p><p><strong>å› ä¸ºç¨‹åºæœªå¼•ç”¨multvec.0å®šä¹‰çš„ç¬¦å·ï¼Œæ‰€ä»¥é“¾æ¥å™¨å°±ä¸ä¼šå¤åˆ¶è¿™ä¸ªæ¨¡å—åˆ°å¯æ‰§è¡Œæ–‡ä»¶ã€‚</strong></p><p><strong>æ­¤å¤–ï¼Œé“¾æ¥å™¨è¿˜ä¼šå¤åˆ¶libc.aä¸­çš„printf.oç­‰Cç³»ç»Ÿè¿è¡Œæ—¶çš„å…¶ä»–æ¨¡å—ã€‚</strong></p></blockquote><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># gcc <span class="token operator">-</span>c main2<span class="token punctuation">.</span>c<span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># gcc <span class="token operator">-</span><span class="token keyword">static</span> <span class="token operator">-</span>o prog2c main2<span class="token punctuation">.</span>o <span class="token punctuation">.</span><span class="token operator">/</span>libvector<span class="token punctuation">.</span>a<span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># <span class="token punctuation">.</span><span class="token operator">/</span>prog2c z <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span> <span class="token number">6</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="é‡å®šä½"><a href="#é‡å®šä½" class="headerlink" title="é‡å®šä½"></a>é‡å®šä½</h3><p>å½“æ±‡ç¼–å™¨ç”Ÿæˆä¸€ä¸ªç›®æ ‡æ¨¡å—æ—¶ï¼Œå®ƒå¹¶ä¸çŸ¥é“æ•°æ®å’Œä»£ç æœ€ç»ˆå°†æ”¾åœ¨å†…å­˜ä¸­çš„ä»€ä¹ˆä½ç½®ã€‚ä¹Ÿä¸çŸ¥é“æœ¬æ¨¡å—å¼•ç”¨çš„å¤–éƒ¨å®šä¹‰å‡½æ•°æˆ–å…¨å±€å˜é‡çš„æœ€ç»ˆä½ç½®ã€‚</p><p><strong><font size=3 color=red>å› æ­¤ï¼Œæ±‡ç¼–å™¨é‡åˆ°å¯¹æœ€ç»ˆä½ç½®æœªçŸ¥çš„ç›®æ ‡å¼•ç”¨ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªã€é‡å®šä½æ¡ç›®ã€‘ï¼Œå‘Šè¯‰é“¾æ¥å™¨å†å°†ç›®æ ‡æ–‡ä»¶åˆå¹¶ä¸ºå¯æ‰§è¡Œæ–‡ä»¶æ—¶å¦‚ä½•ä¿®æ”¹è¿™ä¸ªå¼•ç”¨ã€‚</font></strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/*é‡å®šä½æ¡ç›®-æ•°æ®ç»“æ„*/</span><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span><span class="token keyword">long</span> offset<span class="token punctuation">;</span><span class="token comment">//è¢«ä¿®æ”¹çš„å¼•ç”¨çš„èŠ‚åç§»é‡</span><span class="token keyword">long</span> type<span class="token operator">:</span><span class="token number">32</span><span class="token punctuation">,</span><span class="token comment">//å‘ŠçŸ¥é“¾æ¥å™¨å¦‚ä½•ä¿®æ”¹æ–°çš„å¼•ç”¨</span>    <span class="token comment">//ä¸»è¦ä¸¤ç§ï¼š1.R_X86_64_PC32(PCç›¸å¯¹åœ°å€)2.R_X86_64_32(ç»å¯¹åœ°å€)</span>symbol<span class="token operator">:</span><span class="token number">32</span><span class="token punctuation">;</span><span class="token comment">//è¡¨ç¤ºè¢«ä¿®æ”¹çš„å¼•ç”¨æ˜¯å“ªä¸ªç¬¦å·</span><span class="token keyword">long</span> addend<span class="token punctuation">;</span><span class="token comment">//æœ‰ç¬¦å·æ•°ï¼Œä¸€äº›ç±»å‹çš„é‡å®šä½è¦ä½¿ç”¨å®ƒå¯¹è¢«ä¿®æ”¹å¼•ç”¨çš„å€¼åšåç§»è°ƒæ•´(æŒ‡ä»¤é•¿åº¦)</span><span class="token punctuation">&#125;</span> ELF_Rela<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>ä»£ç çš„é‡å®šä½æ¡ç›®å­˜æ”¾åœ¨<code>.rel.text</code>ä¸­</strong></p><p><strong>å·²åˆå§‹åŒ–æ•°æ®çš„é‡å®šä½æ¡ç›®å­˜æ”¾åœ¨<code>.rel.data</code>ä¸­</strong></p></blockquote><h4 id="é‡å®šä½ç®—æ³•"><a href="#é‡å®šä½ç®—æ³•" class="headerlink" title="é‡å®šä½ç®—æ³•"></a>é‡å®šä½ç®—æ³•</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c">foreach section s <span class="token punctuation">&#123;</span>foreach relocation entry r <span class="token punctuation">&#123;</span>refptr <span class="token operator">=</span> s <span class="token operator">+</span> r<span class="token punctuation">.</span>offset<span class="token punctuation">;</span><span class="token comment">/*1.é‡å®šä½PCç›¸å¯¹å¼•ç”¨*/</span><span class="token keyword">if</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>type <span class="token operator">==</span> R_X86_64_PC32<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>refaddr <span class="token operator">=</span> <span class="token function">ADDR</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">+</span> r<span class="token punctuation">.</span>offset<span class="token punctuation">;</span><span class="token comment">/*refaddr:å¼•ç”¨çš„è¿è¡Œæ—¶åœ°å€*/</span><span class="token operator">*</span>refptr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">ADDR</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>symbol<span class="token punctuation">)</span> <span class="token operator">+</span> r<span class="token punctuation">.</span>addend <span class="token operator">-</span> refaddr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/*2.é‡å®šä½ç»å¯¹å¼•ç”¨*/</span><span class="token keyword">if</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>type <span class="token operator">==</span> R_X86_64_32<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token operator">*</span>refptr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">ADDR</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>symbol<span class="token punctuation">)</span> <span class="token operator">+</span> r<span class="token punctuation">.</span>addend<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="â‘ é‡å®šä½PCç›¸å¯¹å¼•ç”¨"><a href="#â‘ é‡å®šä½PCç›¸å¯¹å¼•ç”¨" class="headerlink" title="â‘ é‡å®šä½PCç›¸å¯¹å¼•ç”¨"></a>â‘ é‡å®šä½PCç›¸å¯¹å¼•ç”¨</h5><p><strong>ä¾‹ï¼šå¯¹æºæ–‡ä»¶<em>main.c</em>å’Œ<em>sum.c</em>è¿›è¡Œåæ±‡ç¼–ï¼š</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> array<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> val <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> i<span class="token punctuation">,</span> s <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                s <span class="token operator">+=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>å†ç”¨<code>objdump -dx main.o</code>å¯¹main,oè¿›è¡Œåç¼–è¯‘åç»“æœï¼š</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># objdump <span class="token operator">-</span>dx main<span class="token punctuation">.</span>o<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20231229213448474.png" style="zoom: 50%;" /><p><strong>å‡½æ•°mainè°ƒç”¨sumå‡½æ•°ï¼Œsumå‡½æ•°æ˜¯åœ¨sum.oæ¨¡å—ä¸­å®šä¹‰çš„ï¼Œsumçš„é‡å®šä½æ¡ç›®ä¸ºï¼š</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c">r<span class="token punctuation">,</span>offset <span class="token operator">=</span> <span class="token number">0xf</span>r<span class="token punctuation">.</span>symbol <span class="token operator">=</span> sumr<span class="token punctuation">.</span>type   <span class="token operator">=</span> R_X86_64_PC32r<span class="token punctuation">.</span>addend <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">4</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong><u>è¿™äº›å­—æ®µå‘Šè¯‰é“¾æ¥å™¨ä¿®æ”¹å¼€å§‹äº0xfå¤„çš„32ä½PCç›¸å¯¹å¼•ç”¨ï¼Œè¿™æ ·åœ¨è¿è¡Œæ—¶å®ƒä¼šæŒ‡å‘sumä¾‹ç¨‹</u>ã€‚å‡è®¾é“¾æ¥å™¨å·²ç¡®å®šï¼š</strong></p><ul><li><strong><code>ADDR(s) = ADDR(.text)</code> &#x3D; 0x400d0</strong></li><li><strong><code>ADDR(r.symbol) = ADDR(sum)</code> &#x3D; 0x400e8</strong></li></ul><p><strong>ä½¿ç”¨<code>é‡å®šä½ç®—æ³•</code>çŸ¥ï¼š</strong></p><ol><li><p><strong>é“¾æ¥å™¨é¦–å…ˆç®—å‡ºå¼•ç”¨çš„<u>è¿è¡Œæ—¶åœ°å€</u>ï¼š</strong></p><p><strong>ref_addr &#x3D; ADDR(s) + r.offset &#x3D; 0x4004d0 + 0xf &#x3D; 0x4004df</strong> </p></li><li><p><strong>ç„¶åæ›´æ–°è¯¥å¼•ç”¨ï¼Œä½¿å¾—å®ƒå†è¿è¡Œæ—¶æŒ‡å‘sumç¨‹åº(å®é™…å°±æ˜¯æ±‚PCçš„offset)</strong></p><p><strong>ref_ptr &#x3D; ADDR(sum) - ref_addr + r.addend &#x3D; 0x4004e8 - 0x4004df +(-4) &#x3D; 0x5</strong></p></li></ol><p>å¾—åˆ°çš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼ŒcallæŒ‡ä»¤ç”±å¦‚ä¸‹å½¢å¼ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token number">4004</span>de<span class="token operator">:</span>e8 <span class="token number">05</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span>       callq  <span class="token number">4004e8</span> <span class="token operator">&lt;</span>sum<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h5 id="â‘¡é‡å®šä½ç»å¯¹å¼•ç”¨"><a href="#â‘¡é‡å®šä½ç»å¯¹å¼•ç”¨" class="headerlink" title="â‘¡é‡å®šä½ç»å¯¹å¼•ç”¨"></a>â‘¡é‡å®šä½ç»å¯¹å¼•ç”¨</h5><p><strong>movæŒ‡ä»¤å°†arrayåœ°å€(32ä½ç«‹å³æ•°)å¤åˆ¶åˆ°å¯„å­˜å™¨%ediä¸­ï¼Œsumå‡½æ•°æ˜¯åœ¨sum.oæ¨¡å—ä¸­å®šä¹‰çš„ï¼Œsumçš„é‡å®šä½æ¡ç›®ä¸ºï¼š</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c">r<span class="token punctuation">,</span>offset <span class="token operator">=</span> <span class="token number">0xa</span>r<span class="token punctuation">.</span>symbol <span class="token operator">=</span> arrayr<span class="token punctuation">.</span>type   <span class="token operator">=</span> R_X86_64_32r<span class="token punctuation">.</span>addend <span class="token operator">=</span> <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™äº›å­—æ®µå‘Šè¯‰é“¾æ¥å™¨ä¿®æ”¹å¼€å§‹äº0xaå¤„çš„32ä½ç»å¯¹å¼•ç”¨ï¼Œè¿™æ ·åœ¨è¿è¡Œæ—¶å®ƒä¼šæŒ‡å‘arrayçš„ç¬¬ä¸€ä¸ªå­—èŠ‚ã€‚å‡è®¾é“¾æ¥å™¨å·²ç¡®å®šï¼š</p><ul><li><strong><code>ADDR(r.symbol) = ADDR(array)</code> &#x3D; 0x601018</strong></li></ul><p>é“¾æ¥å™¨ä¿®æ”¹ç¬¬13è¡Œçš„å¼•ç”¨ï¼š</p><p>*<strong>ref_ptr &#x3D; (unsigned) ((ADDR(r.symbol) + r.addend)) &#x3D; (unsigned) (0x601018 + 0) &#x3D; 0x601018</strong></p><p>å¾—åˆ°çš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œæœºå™¨æŒ‡ä»¤ç”±å¦‚ä¸‹å½¢å¼ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token number">4004</span>d9<span class="token operator">:</span>bf <span class="token number">18</span> <span class="token number">10</span> <span class="token number">60</span> <span class="token number">00</span>       mov $<span class="token number">0x601018</span><span class="token punctuation">,</span> <span class="token operator">%</span>edi<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/D0D016AAD0F392AC3C3FFCEFEFAA42CC.jpg"></p><h3 id="å¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶-åŠ è½½è¿‡ç¨‹"><a href="#å¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶-åŠ è½½è¿‡ç¨‹" class="headerlink" title="å¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶&amp;åŠ è½½è¿‡ç¨‹"></a>å¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶&amp;åŠ è½½è¿‡ç¨‹</h3>]]></content>
      
      
      <categories>
          
          <category> Cè¯­è¨€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> csapp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é™æ€åº“ä¸å…±äº«åº“</title>
      <link href="/2024/02/04/%E9%9D%99%E6%80%81%E5%BA%93%E4%B8%8E%E5%85%B1%E4%BA%AB%E5%BA%93/"/>
      <url>/2024/02/04/%E9%9D%99%E6%80%81%E5%BA%93%E4%B8%8E%E5%85%B1%E4%BA%AB%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<h1 id="é™æ€åº“ä¸å…±äº«åº“"><a href="#é™æ€åº“ä¸å…±äº«åº“" class="headerlink" title="é™æ€åº“ä¸å…±äº«åº“"></a>é™æ€åº“ä¸å…±äº«åº“</h1><blockquote><p>æ‰€è°“<code>&quot;ç¨‹åºåº“&quot;</code>ï¼Œå°±æ˜¯<strong>åŒ…å«äº†æ•°æ®å’Œæ‰§è¡Œç çš„æ–‡ä»¶ã€‚å…¶ä¸èƒ½å•ç‹¬æ‰§è¡Œï¼Œå¯ä»¥ä½œä¸ºå…¶ä»–ç¨‹åºçš„ä¸€éƒ¨åˆ†å®ŒæˆæŸäº›åŠŸèƒ½</strong>ã€‚</p><p>åº“çš„å­˜åœ¨ï¼Œå¯ä»¥ä½¿ç¨‹åºæ¨¡å—åŒ–ï¼ŒåŠ å¿«ç¨‹åºçš„å†ç¼–è¯‘ï¼Œå¯ä»¥å®ç°ä»£ç é‡ç”¨ï¼Œå¯ä»¥ä½¿å¾—ç¨‹åºä¾¿äºå‡çº§ã€‚</p><p><strong>ç¨‹åºåº“å¯åˆ†ä¸º<code>é™æ€åº“(static library)</code>å’Œ<code>å…±äº«åº“(shared object)</code>ã€‚ä¸¤è€…æœ¬è´¨åŒºåˆ«ï¼šè¯¥åº“æ˜¯å¦è¢«ç¼–è¯‘è¿›ç›®æ ‡ï¼ˆç¨‹åºï¼‰å†…éƒ¨ã€‚</strong></p></blockquote><hr><h2 id="é™æ€åº“"><a href="#é™æ€åº“" class="headerlink" title="é™æ€åº“"></a>é™æ€åº“</h2><p>è¿™ç±»åº“åœ¨<strong>ç¼–è¯‘çš„æ—¶å€™</strong>ä¼šç›´æ¥æ•´åˆåˆ°ç›®æ ‡ç¨‹åºä¸­ï¼Œæ‰€ä»¥åˆ©ç”¨é™æ€å‡½æ•°åº“ç¼–è¯‘æˆçš„æ–‡ä»¶ä¼šæ¯”è¾ƒå¤§ã€‚<strong>åº”ç”¨äºå¯¹ç©ºé—´è¦æ±‚ä½ï¼Œæ—¶é—´è¦æ±‚é«˜çš„ç¨‹åºä¸­</strong>ã€‚</p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240204092840853.png" alt="é™æ€åº“æ–‡ä»¶50MB,100ä¸ªç¨‹åºåˆ™å ç”¨50GBç©ºé—´" style="zoom: 40%;" /><ul><li>ä¼˜ç‚¹ï¼šç¼–è¯‘æˆåŠŸçš„å¯æ‰§è¡Œæ–‡ä»¶å¯ä»¥ç‹¬ç«‹è¿è¡Œï¼Œè€Œä¸å†éœ€è¦å‘å¤–éƒ¨è¦æ±‚è¯»å–å‡½æ•°åº“çš„å†…å®¹</li><li>ç¼ºç‚¹ï¼šç›¸åŒçš„åº“æ–‡ä»¶æ•°æ®å¯èƒ½åœ¨å†…å­˜ä¸­è¢«åŠ è½½å¤šä»½ï¼Œæ¶ˆè€—ç³»ç»Ÿèµ„æºï¼Œæµªè´¹å†…å­˜ï¼›å‡½æ•°åº“æ›´æ–°ï¼Œéœ€è¦é‡æ–°ç¼–è¯‘</li></ul><h3 id="åº”ç”¨å®ä¾‹â€”ç”Ÿæˆé™æ€åº“"><a href="#åº”ç”¨å®ä¾‹â€”ç”Ÿæˆé™æ€åº“" class="headerlink" title="åº”ç”¨å®ä¾‹â€”ç”Ÿæˆé™æ€åº“"></a>åº”ç”¨å®ä¾‹â€”ç”Ÿæˆé™æ€åº“</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/*add.c*/</span><span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/*sub.c*/</span><span class="token keyword">int</span> <span class="token function">sub</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> a <span class="token operator">-</span> b<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/*div.c*/</span><span class="token keyword">int</span> <span class="token function">div</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> a <span class="token operator">/</span> b<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>step1ï¼šå¯¹<code>add.c</code>å’Œ<code>sub.c</code>å’Œ<code>div.c</code>ä¸‰ä¸ªæ–‡ä»¶è¿›è¡Œç¼–è¯‘ï¼Œå¾—åˆ°3ä¸ª<strong>å¯é‡å®šä½ç›®æ ‡æ–‡ä»¶</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240204100758657.png" alt="3ä¸ªå¯é‡å®šä½ç›®æ ‡æ–‡ä»¶" style="zoom: 67%;" /><p>step2ï¼šä½¿ç”¨<code>arå·¥å…·</code>å°†3ä¸ªå¯é‡å®šä½ç›®æ ‡æ–‡ä»¶ç”Ÿæˆä¸º1ä¸ª<strong>é™æ€åº“</strong><code>libmymath.a</code>ã€‚</p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240204101129292.png" alt="ar rcs libxxx.a xxx.o ... xx.o" style="zoom:67%;" /><p>step3ï¼š**åœ¨<code>math.c</code>ç¨‹åºç¼–è¯‘è¿‡ç¨‹ä¸­ä½¿ç”¨é™æ€åº“<code>libmymath.a</code>**ã€‚</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d + %d = %d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d - %d = %d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token function">sub</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d / %d = %d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token function">div</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240204110237451.png" alt="gcc math.c libmymath.a -o math" style="zoom:67%;" /><h3 id="éšå¼å£°æ˜"><a href="#éšå¼å£°æ˜" class="headerlink" title="éšå¼å£°æ˜"></a>éšå¼å£°æ˜</h3><p>åœ¨Cè¯­è¨€ä¸­ï¼Œå‡½æ•°åœ¨è°ƒç”¨å‰ä¸ä¸€å®šéè¦å£°æ˜ã€‚å¦‚æœæ²¡æœ‰å£°æ˜ï¼Œé‚£ä¹ˆ<strong>ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æŒ‰ç…§ä¸€ç§éšå¼å£°æ˜çš„è§„åˆ™ï¼Œä¸ºè°ƒç”¨å‡½æ•°çš„Cä»£ç äº§ç”Ÿæ±‡ç¼–ä»£ç </strong>ã€‚</p><p>å•çº¯çš„ç¼–è¯‘ä¸Šè¿°<code>math.c</code>æºä»£ç ï¼Œå¹¶æ²¡æœ‰ä»»ä½•æŠ¥é”™ï¼Œåªæ˜¯åœ¨é“¾æ¥é˜¶æ®µè‹¥æ‰¾ä¸åˆ°åä¸ºadd&#x2F;sub&#x2F;divçš„å‡½æ•°ä½“åˆ™æŠ¥é”™ã€‚ä¹‹æ‰€ä»¥ç¼–è¯‘ä¸ä¼šæŠ¥é”™ï¼Œæ˜¯å› ä¸ºCè¯­è¨€è§„å®šï¼Œ<strong>å¯¹äºæ²¡æœ‰å£°æ˜çš„å‡½æ•°ï¼Œè‡ªåŠ¨ä½¿ç”¨éšå¼å£°æ˜</strong>ã€‚</p><p>ç¼–è¯‘<code>math.c</code>æºä»£ç ï¼ŒåŠ ä¸Šè­¦å‘Šä¿¡æ¯<code>gcc math.c libmymath.a -o math -Wall</code>ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@lhyEdu01 staticLib<span class="token punctuation">]</span><span class="token comment"># gcc math.c libmymath.a -o math -Wall</span>math.c: åœ¨å‡½æ•°â€˜mainâ€™ä¸­:math.c:6:2: è­¦å‘Šï¼šéšå¼å£°æ˜å‡½æ•°â€˜addâ€™ <span class="token punctuation">[</span>-Wimplicit-function-declaration<span class="token punctuation">]</span>  printf<span class="token punctuation">(</span><span class="token string">"%d + %d = %d<span class="token entity" title="\n">\n</span>"</span>, a, b, add<span class="token punctuation">(</span>a, b<span class="token punctuation">))</span><span class="token punctuation">;</span>  ^math.c:7:2: è­¦å‘Šï¼šéšå¼å£°æ˜å‡½æ•°â€˜subâ€™ <span class="token punctuation">[</span>-Wimplicit-function-declaration<span class="token punctuation">]</span>  printf<span class="token punctuation">(</span><span class="token string">"%d - %d = %d<span class="token entity" title="\n">\n</span>"</span>, a, b, sub<span class="token punctuation">(</span>a, b<span class="token punctuation">))</span><span class="token punctuation">;</span>  ^math.c:8:2: è­¦å‘Šï¼šéšå¼å£°æ˜å‡½æ•°â€˜divâ€™ <span class="token punctuation">[</span>-Wimplicit-function-declaration<span class="token punctuation">]</span>  printf<span class="token punctuation">(</span><span class="token string">"%d / %d = %d<span class="token entity" title="\n">\n</span>"</span>, a, b, div<span class="token punctuation">(</span>a, b<span class="token punctuation">))</span><span class="token punctuation">;</span>  ^<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¼–è¯‘é€šè¿‡ï¼å¹¶æ²¡æœ‰ä»»ä½•æŠ¥é”™ï¼Œåªæ˜¯åœ¨é“¾æ¥é˜¶æ®µè‹¥æ‰¾ä¸åˆ°åä¸ºadd&#x2F;sub&#x2F;divçš„å‡½æ•°ä½“åˆ™æŠ¥é”™ã€‚</p><p>ä¹‹æ‰€ä»¥ç¼–è¯‘ä¸ä¼šæŠ¥é”™ï¼Œæ˜¯å› ä¸ºCè¯­è¨€è§„å®šï¼Œ<strong>å¯¹äºæ²¡æœ‰å£°æ˜&#x2F;å®šä¹‰çš„å‡½æ•°ï¼Œè‡ªåŠ¨ä½¿ç”¨éšå¼å£°æ˜</strong>ã€‚ç›¸å½“äºå˜æˆäº†å¦‚ä¸‹ä»£ç ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token comment">//ç¼–è¯‘å™¨çš„éšå¼å£°æ˜:int function_name(int, ... parameter_type);</span><span class="token comment">//é»˜è®¤è¿”å›å€¼ä¸ºintç±»å‹ï¼Œå¯¹å‡½æ•°å‚æ•°ä¸å…³å¿ƒï¼Œè‹¥å‡½æ•°å®é™…è¿”å›å€¼ä¸ºå…¶ä»–ç±»å‹ï¼Œåˆ™é“¾æ¥æ—¶æŠ¥é”™</span><span class="token comment">//éšå¼å£°æ˜çš„å‡½æ•°åŸå‹ä¸åº“å‡½æ•°å®Œå…¨ç›¸åŒï¼Œåˆ™é“¾æ¥è¿è¡Œæ²¡æœ‰é—®é¢˜(å¦‚æœ¬ä¾‹)</span><span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">sub</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">div</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d + %d = %d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d - %d = %d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token function">sub</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d / %d = %d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token function">div</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ˜¾ç¤ºå£°æ˜"><a href="#æ˜¾ç¤ºå£°æ˜" class="headerlink" title="æ˜¾ç¤ºå£°æ˜"></a>æ˜¾ç¤ºå£°æ˜</h3><p>éšå¼å£°æ˜ç»™ç¨‹åºå‘˜å¸¦æ¥äº†å„ç§å›°æƒ‘ï¼Œç»™ç¨‹åºçš„ç¨³å®šæ€§å¸¦æ¥äº†éå¸¸åçš„å½±å“ã€‚ä¸€èˆ¬ä½¿ç”¨æ˜¾ç¤ºå£°æ˜ï¼Œå°†å‡½æ•°å®šä¹‰&#x2F;å£°æ˜æ”¾å…¥å¤´æ–‡ä»¶ä¸­ï¼Œåœ¨ç¨‹åºä¸­å¼•å…¥å¤´æ–‡ä»¶ï¼š</p><p>å¤´æ–‡ä»¶<code>mymath.h</code></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/* * åŠ å…¥çš„ä¸‰è¡Œï¼šå¤´æ–‡ä»¶å®ˆå« *å¤šä¸ªcç¨‹åºéƒ½åŒ…å«è¯¥å¤´æ–‡ä»¶å¼•ç”¨ï¼Œç¼–è¯‘æ—¶å¸¦æ¥å¤§é‡å£°æ˜å†²çª * åŠ å…¥å¤´æ–‡ä»¶é¦–ä½ï¼šé¿å…å¤šæ¬¡åŒ…å« * */</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">_MYMATH_H_</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">_MYMATH_H_</span></span><span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">sub</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">div</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æºç¨‹åº<code>math.c</code></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"mymath.h"</span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d + %d = %d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d - %d = %d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token function">sub</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d / %d = %d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token function">div</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240204171348932.png" alt="ç¼–è¯‘è¿è¡Œæ­£å¸¸" style="zoom: 67%;" /><hr><h2 id="åŠ¨æ€åº“"><a href="#åŠ¨æ€åº“" class="headerlink" title="åŠ¨æ€åº“"></a>åŠ¨æ€åº“</h2><p>åŠ¨æ€å‡½æ•°åº“åœ¨<strong>ç¼–è¯‘çš„æ—¶å€™ï¼Œåœ¨ç¨‹åºé‡Œåªæœ‰ä¸€ä¸ªâ€œæŒ‡å‘â€çš„ä½ç½®è€Œå·²</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´å½“å¯æ‰§è¡Œæ–‡ä»¶éœ€è¦ä½¿ç”¨åˆ°å‡½æ•°åº“çš„æœºåˆ¶æ—¶ï¼Œç¨‹åºæ‰ä¼šå»è¯»å–å‡½æ•°åº“æ¥ä½¿ç”¨ã€‚<strong>åº”ç”¨äºå¯¹æ—¶é—´è¦æ±‚ä½ï¼Œç©ºé—´è¦æ±‚é«˜çš„ç¨‹åºä¸­ã€‚</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240204093255920.png" alt="100ä¸ªç¨‹åºè¿è¡Œæ—¶å…±åŒä½¿ç”¨1ä¸ª500MBçš„å…±äº«åº“" style="zoom:35%;" /><ul><li>ä¼˜ç‚¹ï¼šå¯å®ç°ä¸åŒè¿›ç¨‹é—´çš„èµ„æºå…±äº«ï¼›åŠ¨æ€åº“å‡çº§ç®€å•ï¼Œåªéœ€è¦æ›¿æ¢åº“æ–‡ä»¶ï¼Œæ— éœ€é‡æ–°ç¼–è¯‘åº”ç”¨ç¨‹åº</li><li>ç¼ºç‚¹ï¼šåŠ è½½é€Ÿåº¦æ¯”é™æ€åº“æ…¢ï¼›å‘å¸ƒç¨‹åºéœ€è¦æä¾›ä¾èµ–çš„åŠ¨æ€åº“</li></ul><h3 id="åº”ç”¨å®ä¾‹"><a href="#åº”ç”¨å®ä¾‹" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h3><p>step1ï¼šå¯¹<code>add.c</code>å’Œ<code>sub.c</code>å’Œ<code>div.c</code>ä¸‰ä¸ªæ–‡ä»¶è¿›è¡Œç¼–è¯‘ï¼Œå¾—åˆ°3ä¸ª<strong>å¯é‡å®šä½ç›®æ ‡æ–‡ä»¶(.o)</strong></p><blockquote><p><strong>æ³¨æ„ï¼šåŠ¨æ€åº“æ‰€éœ€çš„å¯é‡å®šä½ç›®æ ‡æ–‡ä»¶ä¸é™æ€åº“æ‰€éœ€çš„å¯é‡å®šä½ç›®æ ‡æ–‡ä»¶ä¸åŒï¼</strong></p><ul><li>é™æ€åº“æ‰€ç”¨çš„<code>.o</code>æ–‡ä»¶ä¸­çš„è°ƒç”¨å‡½æ•°åœ°å€ï¼š<strong>ç¼–è¯‘æ—¶ç”Ÿæˆ(ç›¸å¯¹äºmainçš„ç›¸å¯¹å¯»å€)</strong></li><li>åŠ¨æ€åº“æ‰€ç”¨çš„<code>.o</code>æ–‡ä»¶ä¸­çš„è°ƒç”¨å‡½æ•°åœ°å€ï¼š<strong>è¿è¡Œæ—¶ç”Ÿæˆï¼</strong></li></ul><p><strong>å› æ­¤ç¼–è¯‘æ—¶éœ€è¦åŠ ä¸Šå‚æ•°ï¼š<code>-fPIC</code>!!!!</strong></p></blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@lhyEdu01 dymamicLib<span class="token punctuation">]</span><span class="token comment"># gcc -c add.c -o add.o -fPIC</span><span class="token punctuation">[</span>root@lhyEdu01 dymamicLib<span class="token punctuation">]</span><span class="token comment"># gcc -c sub.c -o sub.o -fPIC</span><span class="token punctuation">[</span>root@lhyEdu01 dymamicLib<span class="token punctuation">]</span><span class="token comment"># gcc -c div.c -o div.o -fPIC</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240204223416243.png" alt="æŸ¥çœ‹ç»“æœï¼šç¼–è¯‘æˆåŠŸï¼" style="zoom:80%;" /><p>step2ï¼š<strong>ä½¿ç”¨<code>gcc -shared -o libxxx.so xxx.o xxx.o</code>åˆ¶ä½œåŠ¨æ€åº“</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@lhyEdu01 dynamicLib<span class="token punctuation">]</span><span class="token comment"># gcc -shared -o libmymath.so add.o sub.o div.o</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240204224939797.png" alt="åŠ¨æ€åº“libmymath.soåˆ¶ä½œæˆåŠŸ" style="zoom:80%;" /><p>step3ï¼šç¼–è¯‘å¯æ‰§è¡Œç¨‹åºæ—¶ï¼ŒæŒ‡å®šæ‰€ç”¨çš„åŠ¨æ€åº“<code>gcc myth.c -o a.out -lmymath -L ./ å¤´æ–‡ä»¶ </code>ã€‚</p><blockquote><p><strong>-lï¼šæŒ‡å®šåº“åï¼ˆlibxxx.soçš„xxxæ˜¯åº“åï¼‰</strong></p><p><strong>-Lï¼šæŒ‡å®šåº“è·¯å¾„</strong></p></blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@lhyEdu01 dynamicLib<span class="token punctuation">]</span><span class="token comment"># gcc math.c -o math.out -lmymath -L./ mymath.h</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240204225104876.png" alt="ç¼–è¯‘æˆåŠŸ:math.out"></p><p>step4ï¼š<code>math.out</code>è¿è¡Œâ€¦<strong>å¤±è´¥ï¼</strong></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240204225710207.png" alt="è¿è¡Œå¤±è´¥ï¼ï¼ï¼"></p><blockquote><p><strong>ä¸‹æ–‡åˆ†æè¿è¡Œå¤±è´¥åŸå› </strong></p></blockquote><h3 id="åŸå› ï¼šé“¾æ¥å™¨-åŠ¨æ€é“¾æ¥å™¨"><a href="#åŸå› ï¼šé“¾æ¥å™¨-åŠ¨æ€é“¾æ¥å™¨" class="headerlink" title="åŸå› ï¼šé“¾æ¥å™¨&amp;åŠ¨æ€é“¾æ¥å™¨"></a>åŸå› ï¼šé“¾æ¥å™¨&amp;åŠ¨æ€é“¾æ¥å™¨</h3><blockquote><p><strong>é“¾æ¥å™¨&amp;åŠ¨æ€é“¾æ¥å™¨çš„å…³ç³»ï¼šå¼ ä¸‰å’Œå¼ ä¸‰ä¸°ã€é›·é”‹å’Œé›·å³°å¡”ï¼Œæ²¡æœ‰å…³ç³»</strong></p><ul><li><strong>é“¾æ¥å™¨</strong>ï¼šå·¥ä½œäºé“¾æ¥é˜¶æ®µï¼Œå·¥ä½œæ—¶éœ€è¦ -l å’Œ -L</li><li><strong>åŠ¨æ€é“¾æ¥å™¨</strong>ï¼šå·¥ä½œäºç¨‹åºè¿è¡Œé˜¶æ®µï¼Œå·¥ä½œæ—¶éœ€è¦æä¾›åŠ¨æ€åº“æ‰€åœ¨ç›®å½•ä½ç½®ã€‚<strong>é€šè¿‡æ”¹å˜ç¯å¢ƒå˜é‡ï¼š<code>export LD_LIBRARY_PATH=åŠ¨æ€åº“æ‰€åœ¨è·¯å¾„</code>ï¼›æˆ–è€…åŠ¨æ€åº“ä½¿ç”¨ç»å¯¹è·¯å¾„</strong></li></ul></blockquote><p><strong>æ–¹æ³•1ï¼šé€šè¿‡æ”¹å˜ç¯å¢ƒå˜é‡</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@lhyEdu01 dynamicLib<span class="token punctuation">]</span><span class="token comment"># export LD_LIBRARY_PATH=/unix/dynamicLib</span><span class="token comment">#æ³¨æ„ï¼šç¯å¢ƒå˜é‡åªæ˜¯æš‚æ—¶ç”Ÿæ•ˆï¼Œç»ˆç«¯é‡å¯åå¤±æ•ˆï¼</span><span class="token comment">#æ°¸ä¹…æ”¹å˜éœ€è¦æ›´çˆ±é…ç½®æ–‡ä»¶:vim ~/.bashrc</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240204231119298.png" alt="è¿è¡ŒæˆåŠŸ" style="zoom: 67%;" /><p><strong>æ–¹æ³•2ï¼šåŠ¨æ€åº“ä½¿ç”¨ç»å¯¹è·¯å¾„</strong></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240204232632451.png" alt="è¿è¡ŒæˆåŠŸ"></p><hr><h2 id="æ‰©å±•è®²è§£ï¼šç¨‹åºçš„åœ°å€ç©ºé—´"><a href="#æ‰©å±•è®²è§£ï¼šç¨‹åºçš„åœ°å€ç©ºé—´" class="headerlink" title="æ‰©å±•è®²è§£ï¼šç¨‹åºçš„åœ°å€ç©ºé—´"></a>æ‰©å±•è®²è§£ï¼šç¨‹åºçš„åœ°å€ç©ºé—´</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240205092822703.png" alt="ç¨‹åºçš„è™šæ‹Ÿå†…å­˜ç©ºé—´"></p><p><a href="https://aqua555552st.github.io/2024/02/04/chapter7%E2%80%94%E9%93%BE%E6%8E%A5/">ç»†èŠ‚è¯·å‚è€ƒï¼šchapter7â€”é“¾æ¥ | aqua555552stâ€™s script</a></p><h3 id="ä»£ç æ¼”ç¤º"><a href="#ä»£ç æ¼”ç¤º" class="headerlink" title="ä»£ç æ¼”ç¤º"></a>ä»£ç æ¼”ç¤º</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span><span class="token keyword">int</span> init_val <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token comment">//å·²åˆå§‹åŒ–æ•°æ®</span><span class="token keyword">int</span> uninit_val<span class="token punctuation">;</span><span class="token comment">//æœªåˆå§‹åŒ–æ•°æ®</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span> env<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> s <span class="token operator">=</span> <span class="token string">"abcd"</span><span class="token punctuation">;</span><span class="token comment">//åªè¯»å¸¸é‡</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ä»£ç åŒº(.text):%p\n"</span><span class="token punctuation">,</span> main<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"åªè¯»å¸¸é‡åŒº(.rodata):%p\n"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"åˆå§‹åŒ–æ•°æ®(.data):%p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>init_val<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"æœªåˆå§‹åŒ–æ•°æ®(.bss):%p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>uninit_val<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> <span class="token operator">*</span> p1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token punctuation">)</span> <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> <span class="token operator">*</span> p2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token punctuation">)</span> <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> <span class="token operator">*</span> p3 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token punctuation">)</span> <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> <span class="token operator">*</span> p4 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token punctuation">)</span> <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//å †åŒº</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"heap addr(p1):%p\n"</span><span class="token punctuation">,</span> p1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"heap addr(p2):%p\n"</span><span class="token punctuation">,</span> p2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"heap addr(p3):%p\n"</span><span class="token punctuation">,</span> p3<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"heap addr(p4):%p\n"</span><span class="token punctuation">,</span> p4<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//æ ˆåŒº</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"stack addr(p1):%p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"stack addr(p2):%p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"stack addr(p3):%p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>p3<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"stack addr(p4):%p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>p4<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//å‘½ä»¤è¡Œå‚æ•°åœ°å€</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"å‘½ä»¤è¡Œå‚æ•°åœ°å€:%p\n"</span><span class="token punctuation">,</span> argv<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//ç¯å¢ƒå˜é‡åœ°å€</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ç¯å¢ƒå˜é‡åœ°å€:%p\n"</span><span class="token punctuation">,</span> env<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>   <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240205101847459.png" alt="è¿è¡Œç»“æœåˆ†æ-ç»“åˆç¨‹åºçš„è™šæ‹Ÿåœ°å€ç©ºé—´"></p>]]></content>
      
      
      <categories>
          
          <category> Cè¯­è¨€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> apue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºCentOS-7é…ç½®apue.håº“æ–‡ä»¶</title>
      <link href="/2024/02/03/%E5%9F%BA%E4%BA%8ECentOS-7%E9%85%8D%E7%BD%AEapue-h%E5%BA%93%E6%96%87%E4%BB%B6/"/>
      <url>/2024/02/03/%E5%9F%BA%E4%BA%8ECentOS-7%E9%85%8D%E7%BD%AEapue-h%E5%BA%93%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºäºCentOS-7é…ç½®apue-håº“æ–‡ä»¶"><a href="#åŸºäºCentOS-7é…ç½®apue-håº“æ–‡ä»¶" class="headerlink" title="åŸºäºCentOS-7é…ç½®apue.håº“æ–‡ä»¶"></a>åŸºäºCentOS-7é…ç½®apue.håº“æ–‡ä»¶</h1><blockquote><p>åœ¨å­¦ä¹ <strong>ã€ŠUNIXç¯å¢ƒé«˜çº§ç¼–ç¨‹ã€‹</strong>ä¸€ä¹¦ä¸­ï¼Œæä¾›çš„ä»£ç ç”¨ä¾‹éœ€è¦å…ˆé…ç½®å¥½ä¹¦ä¸­æä¾›çš„apue.håº“æ–‡ä»¶åï¼Œæ‰èƒ½æ­£å¸¸è¿è¡Œã€‚<strong>æœ¬æ–‡è¯¦ç»†è¯´æ˜apue.håº“æ–‡ä»¶çš„é…ç½®</strong>ã€‚</p></blockquote><h2 id="å»ºç«‹apue-håº“æ–‡ä»¶çš„å­˜æ”¾è·¯å¾„"><a href="#å»ºç«‹apue-håº“æ–‡ä»¶çš„å­˜æ”¾è·¯å¾„" class="headerlink" title="å»ºç«‹apue.håº“æ–‡ä»¶çš„å­˜æ”¾è·¯å¾„"></a>å»ºç«‹apue.håº“æ–‡ä»¶çš„å­˜æ”¾è·¯å¾„</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@lhyEdu01 /<span class="token punctuation">]</span><span class="token comment"># mkdir apue</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="åˆ›å»ºæ–‡ä»¶å¤¹"><a href="#åˆ›å»ºæ–‡ä»¶å¤¹" class="headerlink" title="åˆ›å»ºæ–‡ä»¶å¤¹"></a>åˆ›å»ºæ–‡ä»¶å¤¹</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@lhyEdu01 /<span class="token punctuation">]</span><span class="token comment"># cd apue/</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="ä¸‹è½½apue-håº“æ–‡ä»¶"><a href="#ä¸‹è½½apue-håº“æ–‡ä»¶" class="headerlink" title="ä¸‹è½½apue.håº“æ–‡ä»¶"></a>ä¸‹è½½apue.håº“æ–‡ä»¶</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@lhyEdu01 apue<span class="token punctuation">]</span><span class="token comment"># http://www.apuebook.com/src.3e.tar.gz</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="è§£å‹"><a href="#è§£å‹" class="headerlink" title="è§£å‹"></a>è§£å‹</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@lhyEdu01 apue<span class="token punctuation">]</span><span class="token comment"># tar -zxvf src.3e.tar.gz</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@lhyEdu01 apue<span class="token punctuation">]</span><span class="token comment"># ls</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240203185303773.png" alt="lsæŒ‡ä»¤æŸ¥çœ‹ç›®å½•ä¸­çš„æ–‡ä»¶ï¼šè§£å‹æˆåŠŸ"></p><h2 id="cd-åˆ°apue-3eç›®å½•ä¸‹"><a href="#cd-åˆ°apue-3eç›®å½•ä¸‹" class="headerlink" title="cd åˆ°apue.3eç›®å½•ä¸‹"></a>cd åˆ°apue.3eç›®å½•ä¸‹</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@lhyEdu01 apue<span class="token punctuation">]</span><span class="token comment"># cd apue.3e/</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h2 id="CentOS-7ä¸‹ç¼ºå°‘ç›¸å…³çš„åº“ï¼Œä¸‹è½½Fedoraçš„èµ„æºè¿›è¡Œå®‰è£…ï¼š"><a href="#CentOS-7ä¸‹ç¼ºå°‘ç›¸å…³çš„åº“ï¼Œä¸‹è½½Fedoraçš„èµ„æºè¿›è¡Œå®‰è£…ï¼š" class="headerlink" title="CentOS-7ä¸‹ç¼ºå°‘ç›¸å…³çš„åº“ï¼Œä¸‹è½½Fedoraçš„èµ„æºè¿›è¡Œå®‰è£…ï¼š"></a>CentOS-7ä¸‹ç¼ºå°‘ç›¸å…³çš„åº“ï¼Œä¸‹è½½Fedoraçš„èµ„æºè¿›è¡Œå®‰è£…ï¼š</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@lhyEdu01 apue.3e<span class="token punctuation">]</span><span class="token comment"># yum install https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="ç„¶åæ‰§è¡Œï¼š"><a href="#ç„¶åæ‰§è¡Œï¼š" class="headerlink" title="ç„¶åæ‰§è¡Œï¼š"></a>ç„¶åæ‰§è¡Œï¼š</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@lhyEdu01 apue.3e<span class="token punctuation">]</span><span class="token comment"># yum install libbsd libbsd-devel</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h2 id="æ‰§è¡Œmakeè¯­å¥"><a href="#æ‰§è¡Œmakeè¯­å¥" class="headerlink" title="æ‰§è¡Œmakeè¯­å¥"></a>æ‰§è¡Œmakeè¯­å¥</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@lhyEdu01 apue.3e<span class="token punctuation">]</span><span class="token comment"># make</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="æŠŠmakeç”Ÿæˆçš„apue-hä¸é™æ€é“¾æ¥åº“libapue-aæ”¾åˆ°ç³»ç»ŸæŒ‡å®šå¯»æ‰¾çš„åœ°æ–¹"><a href="#æŠŠmakeç”Ÿæˆçš„apue-hä¸é™æ€é“¾æ¥åº“libapue-aæ”¾åˆ°ç³»ç»ŸæŒ‡å®šå¯»æ‰¾çš„åœ°æ–¹" class="headerlink" title="æŠŠmakeç”Ÿæˆçš„apue.hä¸é™æ€é“¾æ¥åº“libapue.aæ”¾åˆ°ç³»ç»ŸæŒ‡å®šå¯»æ‰¾çš„åœ°æ–¹"></a>æŠŠmakeç”Ÿæˆçš„apue.hä¸é™æ€é“¾æ¥åº“libapue.aæ”¾åˆ°ç³»ç»ŸæŒ‡å®šå¯»æ‰¾çš„åœ°æ–¹</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@lhyEdu01 apue.3e<span class="token punctuation">]</span><span class="token comment"># cp ./include/apue.h /usr/include/</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@lhyEdu01 apue.3e<span class="token punctuation">]</span><span class="token comment"># cp ./lib/libapue.a /usr/local/lib/</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><p><strong>ç°åœ¨å°±å¯ä»¥ä½¿ç”¨ã€ŠUnixç¯å¢ƒé«˜çº§ç¼–ç¨‹ã€‹ä¸­çš„apue.håº“äº†ï¼ï¼ï¼ä¸‹æ–‡æä¾›æµ‹è¯•ç”¨ä¾‹</strong></p><hr><h2 id="æµ‹è¯•ç”¨ä¾‹"><a href="#æµ‹è¯•ç”¨ä¾‹" class="headerlink" title="æµ‹è¯•ç”¨ä¾‹"></a>æµ‹è¯•ç”¨ä¾‹</h2><p><strong>åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»º<code>unix</code>ç›®å½•ï¼Œå°†apueå­¦ä¹ è¿‡ç¨‹ä¸­çš„æµ‹è¯•ç”¨ä¾‹å’Œç›¸å…³ä»£ç å­˜æ”¾è‡³æ­¤</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@lhyEdu01 apue.3e<span class="token punctuation">]</span><span class="token comment"># cd /</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@lhyEdu01 /<span class="token punctuation">]</span><span class="token comment"># mkdir unix</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>ç¼–å†™æµ‹è¯•ç¨‹åº:<code>vim test.c</code>:</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@lhyEdu01 unix<span class="token punctuation">]</span><span class="token comment"># vim test.c</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>test.cç¨‹åºï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"apue.h"</span></span><span class="token keyword">int</span><span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">chdir</span><span class="token punctuation">(</span><span class="token string">"/tmp"</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>                <span class="token function">err_sys</span><span class="token punctuation">(</span><span class="token string">"chdir failed\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"chdir to /tmp successed\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ç¼–è¯‘ï¼š</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@lhyEdu01 unix<span class="token punctuation">]</span><span class="token comment"># gcc test.c</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@lhyEdu01 unix<span class="token punctuation">]</span><span class="token comment"># ls</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240203190837564.png" alt="lsæŒ‡ä»¤æŸ¥çœ‹ç¼–è¯‘åç»“æœ"></p><p><strong>è¿è¡Œï¼š</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@lhyEdu01 unix<span class="token punctuation">]</span><span class="token comment"># ./a.out</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240203191426759.png" alt="æ‰§è¡ŒæˆåŠŸï¼"></p><hr><p><strong>è¿è¡Œæ— å¼‚å¸¸ï¼Œé…ç½®æˆåŠŸï¼</strong></p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> apue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1.5è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡</title>
      <link href="/2024/02/03/1-5%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87/"/>
      <url>/2024/02/03/1-5%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87/</url>
      
        <content type="html"><![CDATA[<h1 id="1-5è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡"><a href="#1-5è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡" class="headerlink" title="1.5è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡"></a>1.5è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡</h1><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/89BB0CDA479AFB37D8D39F2352F32642.png" alt="img"></p><p>è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡è¢«ç”¨æ¥**ä»ä¸åŒæ–¹é¢&#x3D;&#x3D;åº¦é‡è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½&#x3D;&#x3D;**ã€‚</p><h2 id="1-5-1é€Ÿç‡-b-s"><a href="#1-5-1é€Ÿç‡-b-s" class="headerlink" title="1.5.1é€Ÿç‡(b&#x2F;s)"></a>1.5.1é€Ÿç‡(b&#x2F;s)</h2><blockquote><p>å‰ç½®çŸ¥è¯†ï¼š</p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20230122162733246.png" alt="image-20230122162733246"></p></blockquote><p>&#x3D;&#x3D;<strong><code>é€Ÿç‡:</code>æ•°æ®çš„ä¼ é€é€Ÿç‡</strong>(æ¯ç§’ä¼ é€å¤šå°‘æ¯”ç‰¹)ï¼Œåˆç§° **â€æ•°æ®ç‡â€<strong>ï¼Œ</strong>â€œæ¯”ç‰¹ç‡â€**ã€‚&#x3D;&#x3D;</p><h3 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20230122163209554.png" alt="image-20230122163209554"></p><hr><h2 id="1-5-2å¸¦å®½-b-s"><a href="#1-5-2å¸¦å®½-b-s" class="headerlink" title="1.5.2å¸¦å®½(b&#x2F;s)"></a>1.5.2å¸¦å®½(b&#x2F;s)</h2><p><code>å¸¦å®½(Hz)åœ¨æ¨¡æ‹Ÿä¿¡å·ç³»ç»Ÿä¸­çš„æ„ä¹‰ï¼š</code>æŸä¸ªä¿¡å·æ‰€åŒ…å«çš„å„ç§ä¸åŒé¢‘ç‡æˆåˆ†æ‰€å æ®çš„é¢‘ç‡èŒƒå›´ã€‚</p><p>&#x3D;&#x3D;<strong><code>å¸¦å®½(b/s)åœ¨è®¡ç®—æœºç½‘ç»œä¸­çš„æ„ä¹‰ï¼š</code><strong>ç½‘ç»œçš„é€šä¿¡çº¿è·¯ <strong>ä¼ é€æ•°æ®çš„èƒ½åŠ›</strong>ã€‚(</strong>&#x3D;MAX IN{ä¸»æœºæ¥å£é€Ÿç‡ï¼Œçº¿è·¯é€Ÿç‡ï¼Œäº¤æ¢æœº&#x2F;è·¯ç”±å™¨é€Ÿå½•}</strong>)&#x3D;&#x3D;</p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20230122164104410.png" alt="image-20230122164104410"></p><hr><h2 id="1-5-3ååé‡-b-s"><a href="#1-5-3ååé‡-b-s" class="headerlink" title="1.5.3ååé‡(b&#x2F;s)"></a>1.5.3ååé‡(b&#x2F;s)</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20230122164756547.png" alt="image-20230122164756547"></p><p>&#x3D;&#x3D;<strong><code>ååé‡ï¼š</code>å•ä½æ—¶é—´å†…</strong>ï¼Œé€šè¿‡ç½‘ç»œæˆ–æ¥å£çš„ <strong>æ€»æ•°æ®é‡</strong>ï¼ˆ$&lt;&#x3D;å¸¦å®½$ï¼‰&#x3D;&#x3D;</p><hr><h2 id="1-5-4æ—¶å»¶"><a href="#1-5-4æ—¶å»¶" class="headerlink" title="1.5.4æ—¶å»¶"></a>1.5.4æ—¶å»¶</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/AEB34CC0FFE61504D5F570E4094AE08F.png" alt="img"></p><p>&#x3D;&#x3D;<strong><code>æ—¶å»¶ï¼š</code><strong>æ•°æ®(1æˆ–nä¸ªåˆ†ç»„) ä»</strong>ç½‘ç»œä¸€ç«¯åˆ°å¦ä¸€ç«¯æ‰€ç”¨æ—¶é—´ (4éƒ¨åˆ†æ„æˆ)</strong>&#x3D;&#x3D;</p><h3 id="å‘é€æ—¶å»¶"><a href="#å‘é€æ—¶å»¶" class="headerlink" title="å‘é€æ—¶å»¶"></a>å‘é€æ—¶å»¶</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/271CD7C5ED082307D02EA1E67C751696.png" alt="img"></p><p><strong>ä¸»æœº&#x2F;è·¯ç”±å™¨ <u>å‘é€åˆ†ç»„</u>è€—è´¹æ—¶é—´</strong>ã€‚ä»ç¬¬ä¸€ä¸ªæ¯”ç‰¹å‘é€å¼€å§‹åˆ°æœ€åä¸€ä¸ªæ¯”ç‰¹å‘é€å®Œæ¯•æ‰€ç”¨æ—¶é—´ã€‚</p><p>â€‹$å…¬å¼:å‘é€æ—¶å»¶t_å‘ &#x3D; \frac{åˆ†ç»„é•¿åº¦(b)}{å‘é€é€Ÿç‡(b&#x2F;s)} \quad$</p><h3 id="ä¼ æ’­æ—¶å»¶"><a href="#ä¼ æ’­æ—¶å»¶" class="headerlink" title="ä¼ æ’­æ—¶å»¶"></a>ä¼ æ’­æ—¶å»¶</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/18620FEE0A5D0CF8FCA0EF70A22A4972.png" alt="img"></p><p>ç”µç£æ³¢åœ¨ <strong><u>æ•°æ®é“¾è·¯ä¸Šä¼ æ’­</u> è€—è´¹çš„æ—¶é—´</strong></p><p>â€‹$å…¬å¼:ä¼ æ’­æ—¶å»¶t_ä¼  &#x3D; \frac{é“¾è·¯é•¿åº¦(m)}{é“¾è·¯ä¸Šçš„ä¼ æ’­é€Ÿç‡(m&#x2F;s)} \quad$</p><h3 id="å¤„ç†æ—¶å»¶"><a href="#å¤„ç†æ—¶å»¶" class="headerlink" title="å¤„ç†æ—¶å»¶"></a>å¤„ç†æ—¶å»¶</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/8AFF626A14CB2D47326DA52106E86BD9-1674378695281-6.png" alt="img"></p><p><strong><u>è·¯ç”±å™¨</u></strong> â€œ<strong>æ£€æŸ¥åˆ†ç»„çš„é¦–éƒ¨æ˜¯å¦è¯¯ç ã€æå–åˆ†ç»„é¦–éƒ¨ä¸­çš„ç›®çš„åœ°å€ã€ä¸ºåˆ†ç»„æŸ¥æ‰¾ç›¸åº”çš„è½¬å‘æ¥å£ä»¥åŠä¿®æ”¹åˆ†ç»„é¦–éƒ¨ä¸­çš„éƒ¨åˆ†å†…å®¹ï¼ˆä¾‹å¦‚ç”Ÿå­˜æ—¶é—´ï¼‰</strong>â€œ ç­‰è€—è´¹çš„æ—¶é—´ã€‚</p><p><strong>å¤„ç†æ—¶å»¶ä¸€èˆ¬æ— æ³•ç”¨ä¸€ä¸ªç®€å•çš„å…¬å¼è¿›è¡Œè®¡ç®—ã€‚</strong></p><h3 id="æ’é˜Ÿæ—¶å»¶"><a href="#æ’é˜Ÿæ—¶å»¶" class="headerlink" title="æ’é˜Ÿæ—¶å»¶"></a>æ’é˜Ÿæ—¶å»¶</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/8AFF626A14CB2D47326DA52106E86BD9.png" alt="img"></p><p>åˆ†ç»„**<u>åœ¨è·¯ç”±å™¨</u><strong>ç¡®å®šäº†åˆ†ç»„çš„è½¬å‘æ¥å£åï¼Œ</strong>åœ¨è¾“å‡ºé˜Ÿåˆ—ä¸­æ’é˜Ÿç¼“å­˜å¹¶ç­‰å¾…è½¬å‘**æ‰€è€—è´¹çš„æ—¶é—´ã€‚</p><p><strong>æ’é˜Ÿæ—¶å»¶ä¸€èˆ¬æ— æ³•ç”¨ä¸€ä¸ªç®€å•çš„å…¬å¼è¿›è¡Œè®¡ç®—ã€‚</strong></p><h3 id="æ¨å¹¿ç»“è®º"><a href="#æ¨å¹¿ç»“è®º" class="headerlink" title="&#x3D;&#x3D;æ¨å¹¿ç»“è®º&#x3D;&#x3D;"></a>&#x3D;&#x3D;æ¨å¹¿ç»“è®º&#x3D;&#x3D;</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/85BA4992905C2F0F1360C75659DEF5E3.png" alt="img"></p><p>ç”±ä¸Šå›¾â˜ï¸å½’çº³æ€»ç»“ï¼Œç½‘ç»œä¸¤ç«¯é€šè¿‡$n$ä¸ªè·¯ç”±å™¨ï¼Œè½¬å‘$m$ä¸ªåˆ†ç»„æ¶ˆè€—çš„<strong>æ€»æ—¶å»¶</strong>ä¸ºå¤šå°‘ï¼Ÿ</p><p>â€‹$æ€»æ—¶å»¶ &#x3D; m * t_å‘ + n * t_å‘ + (n + 1) * t_ä¼ $</p><p>â€‹&#x3D;&#x3D;$&#x3D; (m + n) * t_å‘ + (n + 1) * t_ä¼ $&#x3D;&#x3D;</p><h4 id="ä¾‹é¢˜"><a href="#ä¾‹é¢˜" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h4><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/D4BC64C6B4FD2564D2C20A61C9A44790.png" alt="img"></p><hr><h2 id="1-5-5æ—¶å»¶å¸¦å®½ç§¯-b"><a href="#1-5-5æ—¶å»¶å¸¦å®½ç§¯-b" class="headerlink" title="1.5.5æ—¶å»¶å¸¦å®½ç§¯(b)"></a>1.5.5æ—¶å»¶å¸¦å®½ç§¯(b)</h2><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/4343A07F829D8C8F66959E6EE4419230.png" alt="img" style="zoom: 25%;" /><p>&#x3D;&#x3D;**<code>æ—¶å»¶å¸¦å®½ç§¯:</code>ä¼ æ’­æ—¶å»¶(s) * å¸¦å®½(b&#x2F;s)**ã€‚åˆç§°ä¸ºâ€<strong>ä»¥æ¯”ç‰¹ä¸ºå•ä½çš„é“¾è·¯é•¿åº¦</strong>â€œã€‚&#x3D;&#x3D;</p><hr><h2 id="1-5-6å¾€è¿”æ—¶é—´RTT"><a href="#1-5-6å¾€è¿”æ—¶é—´RTT" class="headerlink" title="1.5.6å¾€è¿”æ—¶é—´RTT"></a>1.5.6å¾€è¿”æ—¶é—´RTT</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/7EF992825B00E03A72765C5F71D543FF.png" alt="img"></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20230122180423074.png" alt="image-20230122180423074"></p><p>&#x3D;&#x3D;<strong><code>å¾€è¿”æ—¶é—´ï¼š</code>å‘é€ç«¯å‘é€æ•°æ®åˆ†ç»„</strong>å¼€å§‹ï¼Œåˆ°å‘é€ç«¯<strong>åˆæ¥æ”¶åˆ°ç¡®è®¤åˆ†ç»„</strong>ä¸ºæ­¢ï¼Œå…±è€—è´¹çš„æ—¶é—´ã€‚($&#x3D;ä¼ æ’­æ—¶å»¶ * 2$)&#x3D;&#x3D;</p><hr><h2 id="1-5-7åˆ©ç”¨ç‡"><a href="#1-5-7åˆ©ç”¨ç‡" class="headerlink" title="1.5.7åˆ©ç”¨ç‡"></a>1.5.7åˆ©ç”¨ç‡</h2><p>â€‹&#x3D;&#x3D;$$ åˆ©ç”¨ç‡&#x3D;\begin{cases}<br>ä¿¡é“åˆ©ç”¨ç‡ï¼š\frac{æœ‰æ•°æ®é€šè¿‡æ—¶é—´t}{(æœ‰+æ— ) æ•°æ®é€šè¿‡æ—¶é—´t} \quad \<br>ç½‘ç»œåˆ©ç”¨ç‡ï¼šå…¨ç½‘ç»œçš„ä¿¡é“åˆ©ç”¨ç‡çš„åŠ æƒå¹³å‡<br>\end{cases}$$&#x3D;&#x3D;</p><blockquote><p><strong>æ³¨æ„</strong>ï¼šä¿¡é“åˆ©ç”¨ç‡ <strong>å¹¶éè¶Šé«˜è¶Šå¥½ï¼</strong></p><p>è§£é‡Šï¼šæ ¹æ®æ’é˜Ÿè®ºï¼š<strong>ä¿¡é“åˆ©ç”¨ç‡$U$è¶Šé«˜ï¼Œè¯¥ä¿¡é“å¼•èµ·çš„æ—¶å»¶$D$ä¹Ÿä¼šè¿…é€Ÿå¢åŠ </strong></p><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/8746B666B4014D79A01A252F6C1F7A65.png" alt="img"></p></blockquote><hr><h2 id="1-5-8ä¸¢åŒ…ç‡"><a href="#1-5-8ä¸¢åŒ…ç‡" class="headerlink" title="1.5.8ä¸¢åŒ…ç‡"></a>1.5.8ä¸¢åŒ…ç‡</h2><p>&#x3D;&#x3D;<strong><code>ä¸¢åŒ…ç‡ï¼š</code><strong>åœ¨ä¸€å®šçš„æ—¶é—´èŒƒå›´å†…ï¼Œä¼ è¾“è¿‡ç¨‹ä¸­</strong>ä¸¢å¤±çš„åˆ†ç»„æ•°é‡</strong>ä¸<strong>æ€»åˆ†ç»„æ•°é‡</strong>çš„<strong>æ¯”ä¾‹</strong>(ååº”ç½‘ç»œæ‹¥å¡æƒ…å†µ)ã€‚&#x3D;&#x3D;å…·ä½“å¯åˆ†ä¸ºæ¥å£ä¸¢åŒ…ç‡ã€èŠ‚ç‚¹ä¸¢åŒ…ç‡ã€é“¾è·¯ä¸¢åŒ…ç‡ã€è·¯å¾„ä¸¢åŒ…ç‡ä»¥åŠç½‘ç»œä¸¢åŒ…ç‡ç­‰ã€‚</p><h3 id="åˆ†ç»„ä¸¢å¤±çš„ä¸¤ç§æƒ…å†µ"><a href="#åˆ†ç»„ä¸¢å¤±çš„ä¸¤ç§æƒ…å†µ" class="headerlink" title="åˆ†ç»„ä¸¢å¤±çš„ä¸¤ç§æƒ…å†µ"></a>åˆ†ç»„ä¸¢å¤±çš„ä¸¤ç§æƒ…å†µ</h3><ol><li>äº§ç”Ÿ<strong>è¯¯ç </strong>ï¼Œè¢«è·¯ç”±å™¨ä¸¢å¼ƒ</li><li>åˆ†ç»„åˆ°è¾¾ä¸€å°é˜Ÿåˆ—å·²æ»¡çš„åˆ†ç»„äº¤æ¢æœºæ—¶ï¼Œè¢«äº¤æ¢æœºä¸¢å¼ƒï¼›åœ¨é€šä¿¡é‡è¾ƒå¤§æ—¶å¯èƒ½é€ æˆ<strong>ç½‘ç»œæ‹¥å¡</strong>ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºç½‘ç»œ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>gccâ€”å·¥å…·é“¾</title>
      <link href="/2024/02/02/gcc%E2%80%94%E5%B7%A5%E5%85%B7%E9%93%BE/"/>
      <url>/2024/02/02/gcc%E2%80%94%E5%B7%A5%E5%85%B7%E9%93%BE/</url>
      
        <content type="html"><![CDATA[<h1 id="gccå·¥å…·é“¾"><a href="#gccå·¥å…·é“¾" class="headerlink" title="gccå·¥å…·é“¾"></a>gccå·¥å…·é“¾</h1><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20240202000746320.png" alt="ç›®å½•ç»“æ„"></p><h2 id="ä¸€ã€gccå››æ­¥éª¤"><a href="#ä¸€ã€gccå››æ­¥éª¤" class="headerlink" title="ä¸€ã€gccå››æ­¥éª¤"></a>ä¸€ã€gccå››æ­¥éª¤</h2><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/C9577FD85681FA27D4706612B317E577.png" alt="gcc4éƒ¨æ“ä½œ"></p><h3 id="1-é¢„å¤„ç†"><a href="#1-é¢„å¤„ç†" class="headerlink" title="1.é¢„å¤„ç†"></a>1.é¢„å¤„ç†</h3><p>é¢„å¤„ç†å™¨å¤„ç†Cè¯­è¨€æºä»£ç ï¼Œ<strong>æ‰«æç¨‹åºä¸­æ‰€æœ‰çš„#å¼€å¤´çš„é¢„ç¼–è¯‘æŒ‡ä»¤ï¼Œå¹¶å°†å®ƒä»¬æ›¿æ¢æˆç›¸åº”çš„æ–‡æœ¬</strong>ã€‚é¢„ç¼–è¯‘æŒ‡ä»¤å¯ä»¥åŒ…æ‹¬å¤´æ–‡ä»¶åŒ…å«ã€æ¡ä»¶ç¼–è¯‘ç­‰ç­‰ã€‚</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">gcc <span class="token operator">-</span>E hello<span class="token punctuation">.</span>c <span class="token operator">-</span>o hello<span class="token punctuation">.</span>i<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="2-ç¼–è¯‘"><a href="#2-ç¼–è¯‘" class="headerlink" title="2.ç¼–è¯‘"></a>2.ç¼–è¯‘</h3><blockquote><p><strong>æ¶ˆè€—æ—¶é—´å’Œç³»ç»Ÿèµ„æºæœ€å¤š</strong></p></blockquote><p>ç¼–è¯‘å™¨å°†é¢„å¤„ç†å™¨å¤„ç†åçš„ä»£ç <strong>è½¬æ¢æˆæ±‡ç¼–ä»£ç </strong>ã€‚å®ƒä¼šå¯¹ä»£ç è¿›è¡Œè¯­æ³•å’Œè¯­ä¹‰åˆ†æï¼Œæ£€æŸ¥ç¨‹åºçš„è¯­æ³•é”™è¯¯å’Œç±»å‹é”™è¯¯ï¼Œå¹¶ç”Ÿæˆæ±‡ç¼–ä»£ç </p><pre class="line-numbers language-c" data-language="c"><code class="language-c">gcc <span class="token operator">-</span>S hello<span class="token punctuation">.</span>i <span class="token operator">-</span>o hello<span class="token punctuation">.</span>s<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="3-æ±‡ç¼–"><a href="#3-æ±‡ç¼–" class="headerlink" title="3.æ±‡ç¼–"></a>3.æ±‡ç¼–</h3><p>æ±‡ç¼–å™¨å°†æ±‡ç¼–ä»£ç è½¬æ¢æˆæœºå™¨ç ã€‚å®ƒä¼šå°†<strong>æ±‡ç¼–ä»£ç è½¬æ¢ä¸ºå¯æ‰§è¡Œä»£ç </strong>ï¼ŒåŒæ—¶è¿˜ä¼šç”Ÿæˆè°ƒè¯•ä¿¡æ¯å’Œç¬¦å·è¡¨ã€‚</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">gcc <span class="token operator">-</span>c hello<span class="token punctuation">.</span>s <span class="token operator">-</span>o hello<span class="token punctuation">.</span>o<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="4-é“¾æ¥"><a href="#4-é“¾æ¥" class="headerlink" title="4.é“¾æ¥"></a>4.é“¾æ¥</h3><p>é“¾æ¥å™¨å°†ç¼–è¯‘å™¨ç”Ÿæˆçš„ç›®æ ‡ä»£ç ä»¥åŠå¯èƒ½çš„åº“æ–‡ä»¶åˆå¹¶æˆæœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚é“¾æ¥å™¨<strong>å°†æ‰€æœ‰ä»£ç æ®µå’Œæ•°æ®æ®µé“¾æ¥èµ·æ¥ï¼Œè§£ææ‰€æœ‰çš„ç¬¦å·å¼•ç”¨ï¼Œå°†åœ°å€å›å¡«ã€‚ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c">gcc hello<span class="token punctuation">.</span>o <span class="token operator">-</span>o hello<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h2 id="äºŒã€gccç¼–è¯‘å¸¸ç”¨å‚æ•°"><a href="#äºŒã€gccç¼–è¯‘å¸¸ç”¨å‚æ•°" class="headerlink" title="äºŒã€gccç¼–è¯‘å¸¸ç”¨å‚æ•°"></a>äºŒã€gccç¼–è¯‘å¸¸ç”¨å‚æ•°</h2><h3 id="1-å¤´æ–‡ä»¶è·¨ç›®å½•ä¾èµ–"><a href="#1-å¤´æ–‡ä»¶è·¨ç›®å½•ä¾èµ–" class="headerlink" title="1.å¤´æ–‡ä»¶è·¨ç›®å½•ä¾èµ–"></a>1.å¤´æ–‡ä»¶è·¨ç›®å½•ä¾èµ–</h3><p><strong>æºæ–‡ä»¶ä¸å¤´æ–‡ä»¶ä¸åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20231228150656571.png" alt="å½“å‰ç›®å½•ç»“æ„"  /><pre class="line-numbers language-c" data-language="c"><code class="language-c">gcc <span class="token operator">-</span>I<span class="token punctuation">.</span><span class="token operator">/</span>newdir<span class="token operator">/</span> gcctest<span class="token punctuation">.</span>c <span class="token operator">-</span>o gcctest <span class="token comment">//-Iåé¢è¡¨ç¤ºå¤´æ–‡ä»¶æ‰€åœ¨è·¯å¾„(ç»å¯¹/ç›¸å¯¹)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="2-åªåšé¢„å¤„ç†-ç¼–è¯‘-æ±‡ç¼–"><a href="#2-åªåšé¢„å¤„ç†-ç¼–è¯‘-æ±‡ç¼–" class="headerlink" title="2.åªåšé¢„å¤„ç†+ç¼–è¯‘+æ±‡ç¼–"></a>2.åªåšé¢„å¤„ç†+ç¼–è¯‘+æ±‡ç¼–</h3><p><em><em>å¾—åˆ°</em>.oçš„äºŒè¿›åˆ¶æ–‡ä»¶</em>*</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">gcc <span class="token operator">-</span>c gcctest <span class="token operator">-</span>o gcctest<span class="token punctuation">.</span>o<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="3-ç¼–è¯‘æ—¶æ·»åŠ è°ƒè¯•è¯­å¥"><a href="#3-ç¼–è¯‘æ—¶æ·»åŠ è°ƒè¯•è¯­å¥" class="headerlink" title="3.ç¼–è¯‘æ—¶æ·»åŠ è°ƒè¯•è¯­å¥"></a>3.ç¼–è¯‘æ—¶æ·»åŠ è°ƒè¯•è¯­å¥</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c">gcc <span class="token operator">-</span>g gcctest<span class="token punctuation">.</span>c <span class="token operator">-</span>o gcctest2<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>æ˜¾ç„¶ï¼Œç¼–è¯‘å‡ºæ¥çš„å¯æ‰§è¡Œæ–‡ä»¶å¤§å°å˜å¤§äº†ï¼Œå¤šäº†å¯è°ƒè¯•æ–‡ä»¶åœ¨å†…</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20231228152301962.png" alt="æ·»åŠ è°ƒè¯•è¯­å¥-æ–‡ä»¶å˜å¤§" style="zoom:67%;" /><hr><h2 id="ä¸‰ã€csappâ€”chapter7-é“¾æ¥"><a href="#ä¸‰ã€csappâ€”chapter7-é“¾æ¥" class="headerlink" title="ä¸‰ã€csappâ€”chapter7:é“¾æ¥"></a>ä¸‰ã€csappâ€”chapter7:é“¾æ¥</h2><p>å·²çŸ¥ä¸€ä¸ªmain.cæ–‡ä»¶</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"> <span class="token number">1</span> #include<span class="token operator">&lt;</span>stdio<span class="token punctuation">.</span>h<span class="token operator">></span> <span class="token number">2</span> <span class="token comment">//countå’Œvalueä¸¤ä¸ªå…¨å±€å˜é‡</span> <span class="token number">3</span> <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token number">4</span> <span class="token keyword">int</span> value<span class="token punctuation">;</span> <span class="token number">5</span>  <span class="token number">6</span> <span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> sum<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token number">7</span>         <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"sum is:%d\n"</span><span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token number">8</span> <span class="token punctuation">&#125;</span> <span class="token number">9</span> <span class="token number">10</span><span class="token number">11</span> <span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token number">12</span>         <span class="token keyword">static</span> <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token number">13</span>         <span class="token keyword">static</span> <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token number">14</span>         <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token number">15</span> <span class="token number">16</span>         <span class="token function">func</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b <span class="token operator">+</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token number">17</span>         <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token number">18</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é€šè¿‡<code>gcc -c main.c</code>å¾—åˆ°å¯é‡å®šä½äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå†æ ¹æ®<code>wc -c main.o</code>æŸ¥çœ‹main.oæ–‡ä»¶çš„å¤§å°</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># gcc <span class="token operator">-</span>c main<span class="token punctuation">.</span>c<span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># wc <span class="token operator">-</span>c main<span class="token punctuation">.</span>o<span class="token number">1856</span> main<span class="token punctuation">.</span>o<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨<code>readelf -h main.o</code>æŸ¥çœ‹ELFå¯é‡å®šä½ç›®æ ‡æ–‡ä»¶çš„ELFå¤´(ELF Header)çš„å…·ä½“å†…å®¹</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">readelf <span class="token operator">-</span>h main<span class="token punctuation">.</span>o<span class="token comment">//-hï¼šåªæ˜¾ç¤ºELF Headerçš„ä¿¡æ¯</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># readelf <span class="token operator">-</span>h main<span class="token punctuation">.</span>oELF å¤´ï¼š  Magicï¼š  <span class="token number">7f</span> <span class="token number">45</span> <span class="token number">4</span>c <span class="token number">46</span> <span class="token number">02</span> <span class="token number">01</span> <span class="token number">01</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span>   ç±»åˆ«<span class="token operator">:</span>                              ELF64  æ•°æ®<span class="token operator">:</span>                              <span class="token number">2</span> è¡¥ç ï¼Œå°ç«¯åº <span class="token punctuation">(</span>little endian<span class="token punctuation">)</span>  ç‰ˆæœ¬<span class="token operator">:</span>                              <span class="token number">1</span> <span class="token punctuation">(</span>current<span class="token punctuation">)</span>  OS<span class="token operator">/</span>ABI<span class="token operator">:</span>                            UNIX <span class="token operator">-</span> System V  ABI ç‰ˆæœ¬<span class="token operator">:</span>                          <span class="token number">0</span>  ç±»å‹<span class="token operator">:</span>                              <span class="token function">REL</span> <span class="token punctuation">(</span>å¯é‡å®šä½æ–‡ä»¶<span class="token punctuation">)</span>  ç³»ç»Ÿæ¶æ„<span class="token operator">:</span>                          Advanced Micro Devices X86<span class="token operator">-</span><span class="token number">64</span>  ç‰ˆæœ¬<span class="token operator">:</span>                              <span class="token number">0x1</span>  å…¥å£ç‚¹åœ°å€ï¼š              <span class="token number">0x0</span>  ç¨‹åºå¤´èµ·ç‚¹ï¼š              <span class="token number">0</span> <span class="token punctuation">(</span>bytes into file<span class="token punctuation">)</span>  Start of section headers<span class="token operator">:</span>          <span class="token number">1024</span> <span class="token punctuation">(</span>bytes into file<span class="token punctuation">)</span>  æ ‡å¿—ï¼š             <span class="token number">0x0</span>  æœ¬å¤´çš„å¤§å°ï¼š       <span class="token number">64</span> <span class="token punctuation">(</span>å­—èŠ‚<span class="token punctuation">)</span>  ç¨‹åºå¤´å¤§å°ï¼š       <span class="token number">0</span> <span class="token punctuation">(</span>å­—èŠ‚<span class="token punctuation">)</span>  Number of program headers<span class="token operator">:</span>         <span class="token number">0</span>  èŠ‚å¤´å¤§å°ï¼š         <span class="token number">64</span> <span class="token punctuation">(</span>å­—èŠ‚<span class="token punctuation">)</span>  èŠ‚å¤´æ•°é‡ï¼š         <span class="token number">13</span>  å­—ç¬¦ä¸²è¡¨ç´¢å¼•èŠ‚å¤´ï¼š <span class="token number">12</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-å¯é‡å®šä½ç›®æ ‡æ–‡ä»¶-ELFæ–‡ä»¶"><a href="#1-å¯é‡å®šä½ç›®æ ‡æ–‡ä»¶-ELFæ–‡ä»¶" class="headerlink" title="1.å¯é‡å®šä½ç›®æ ‡æ–‡ä»¶(ELFæ–‡ä»¶)"></a>1.å¯é‡å®šä½ç›®æ ‡æ–‡ä»¶(ELFæ–‡ä»¶)</h3><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20231228190228140.png" alt="ELFæ–‡ä»¶"></p><h3 id="2-section-èŠ‚-çš„å…·ä½“å†…å®¹"><a href="#2-section-èŠ‚-çš„å…·ä½“å†…å®¹" class="headerlink" title="2.section(èŠ‚)çš„å…·ä½“å†…å®¹"></a>2.section(èŠ‚)çš„å…·ä½“å†…å®¹</h3><ol><li><strong><code>.text</code>ï¼šå·²ç¼–è¯‘ç¨‹åºçš„åŠå…¶ä»£ç </strong></li><li><strong><code>.rodata</code>ï¼šåªè¯»æ•°æ®ï¼Œå¦‚ï¼šprinfå‡½æ•°å†…çš„æ ¼å¼ä¸²</strong></li><li><strong><code>.data</code>ï¼š<u>å·²åˆå§‹åŒ–</u>çš„å…¨å±€å’Œé™æ€Cå˜é‡</strong></li><li><strong><code>.bss(Better Save Space)</code>ï¼š<u>æœªåˆå§‹åŒ–</u>çš„å…¨å±€å’Œé™æ€Cå˜é‡</strong></li><li><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20231228191717559.png" style="zoom: 33%;" /></li></ol><h3 id="3-ç¬¦å·-ç¬¦å·è¡¨-symtabï¼‰"><a href="#3-ç¬¦å·-ç¬¦å·è¡¨-symtabï¼‰" class="headerlink" title="3.ç¬¦å·&amp;ç¬¦å·è¡¨(.symtabï¼‰"></a>3.ç¬¦å·&amp;ç¬¦å·è¡¨(.symtabï¼‰</h3><p><strong>å¯¹äºæ¯ä¸€ä¸ªå¯é‡å®šä½ç›®æ ‡æ–‡ä»¶(ELF)mï¼Œéƒ½æœ‰ä¸€ä¸ªç¬¦å·è¡¨(.symtabèŠ‚ä¸­)ã€‚åœ¨é“¾æ¥å™¨çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œæœ‰ä¸‰ç§ä¸åŒçš„ç¬¦å·ï¼š</strong></p><ol><li><strong><code>å…¨å±€ç¬¦å·(Global Symbols)</code>ï¼šæ¨¡å—må®šä¹‰+èƒ½è¢«å…¶ä»–æ¨¡å—å¼•ç”¨</strong></li><li><strong><code>å¤–éƒ¨ç¬¦å·(Externals Symbols)</code>ï¼šå…¶ä»–æ¨¡å—å®šä¹‰+èƒ½è¢«æ¨¡å—må¼•ç”¨</strong></li><li><strong><code>å±€éƒ¨ç¬¦å·(Local Symbols)</code>ï¼šåªè¢«æ¨¡å—må®šä¹‰+å…¶ä»–æ¨¡å—ä¸èƒ½å¼•ç”¨ã€‚å¦‚ï¼šä»»ä½•å¸¦æœ‰staticä¿®é¥°çš„å…¨å±€å˜é‡æˆ–å‡½æ•° éƒ½æ˜¯æ¨¡å—ç§æœ‰çš„ï¼Œå…¶ä»–æ¨¡å—ä¸èƒ½è®¿é—®ï¼Œç±»ä¼¼Javaçš„privateå…³é”®å­—</strong></li></ol><blockquote><p><strong>æ³¨ï¼š</strong>.symtabèŠ‚çš„ç¬¦å·è¡¨ä¸åŒ…å«<strong>æœ¬åœ°éé™æ€å±€éƒ¨å˜é‡</strong>ï¼Œå› ä¸ºå…¶åœ¨<strong>æ ˆä¸­è¢«ç®¡ç†</strong>ï¼</p></blockquote><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># readelf <span class="token operator">-</span>s main<span class="token punctuation">.</span>oSymbol table <span class="token char">'.symtab'</span> contains <span class="token number">16</span> entries<span class="token operator">:</span>   Num<span class="token operator">:</span>    Value          Size Type    Bind   Vis      Ndx Name     <span class="token number">0</span><span class="token operator">:</span> <span class="token number">0000000000000000</span>     <span class="token number">0</span> NOTYPE  LOCAL  DEFAULT  UND      <span class="token number">1</span><span class="token operator">:</span> <span class="token number">0000000000000000</span>     <span class="token number">0</span> FILE    LOCAL  DEFAULT  ABS main<span class="token punctuation">.</span>c     <span class="token number">2</span><span class="token operator">:</span> <span class="token number">0000000000000000</span>     <span class="token number">0</span> SECTION LOCAL  DEFAULT    <span class="token number">1</span>      <span class="token number">3</span><span class="token operator">:</span> <span class="token number">0000000000000000</span>     <span class="token number">0</span> SECTION LOCAL  DEFAULT    <span class="token number">3</span>      <span class="token number">4</span><span class="token operator">:</span> <span class="token number">0000000000000000</span>     <span class="token number">0</span> SECTION LOCAL  DEFAULT    <span class="token number">4</span>      <span class="token number">5</span><span class="token operator">:</span> <span class="token number">0000000000000000</span>     <span class="token number">0</span> SECTION LOCAL  DEFAULT    <span class="token number">5</span>      <span class="token number">6</span><span class="token operator">:</span> <span class="token number">0000000000000004</span>     <span class="token number">4</span> OBJECT  LOCAL  DEFAULT    <span class="token number">3</span> a<span class="token punctuation">.</span><span class="token number">2185</span>     <span class="token number">7</span><span class="token operator">:</span> <span class="token number">0000000000000000</span>     <span class="token number">4</span> OBJECT  LOCAL  DEFAULT    <span class="token number">4</span> b<span class="token punctuation">.</span><span class="token number">2186</span>     <span class="token number">8</span><span class="token operator">:</span> <span class="token number">0000000000000000</span>     <span class="token number">0</span> SECTION LOCAL  DEFAULT    <span class="token number">7</span>      <span class="token number">9</span><span class="token operator">:</span> <span class="token number">0000000000000000</span>     <span class="token number">0</span> SECTION LOCAL  DEFAULT    <span class="token number">8</span>     <span class="token number">10</span><span class="token operator">:</span> <span class="token number">0000000000000000</span>     <span class="token number">0</span> SECTION LOCAL  DEFAULT    <span class="token number">6</span>     <span class="token number">11</span><span class="token operator">:</span> <span class="token number">0000000000000000</span>     <span class="token number">4</span> OBJECT  GLOBAL DEFAULT    <span class="token number">3</span> count    <span class="token number">12</span><span class="token operator">:</span> <span class="token number">0000000000000004</span>     <span class="token number">4</span> OBJECT  GLOBAL DEFAULT  COM value    <span class="token number">13</span><span class="token operator">:</span> <span class="token number">0000000000000000</span>    <span class="token number">33</span> FUNC    GLOBAL DEFAULT    <span class="token number">1</span> func    <span class="token number">14</span><span class="token operator">:</span> <span class="token number">0000000000000000</span>     <span class="token number">0</span> NOTYPE  GLOBAL DEFAULT  UND printf    <span class="token number">15</span><span class="token operator">:</span> <span class="token number">0000000000000021</span>    <span class="token number">55</span> FUNC    GLOBAL DEFAULT    <span class="token number">1</span> main<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>Typeï¼šFUNC-å‡½æ•°ã€OBJECT-å˜é‡æ•°ç»„ç­‰æ•°æ®å¯¹è±¡</p><p>Valueï¼šè¡¨ç¤ºå‡½æ•°ç›¸å¯¹äº.text sectionèµ·å§‹ä½ç½®çš„åç§»é‡</p><p>Bindï¼šä½œç”¨èŒƒå›´ã€‚å±€éƒ¨&#x2F;å…¨å±€</p><p>Ndxï¼šè¡¨ç¤ºèŠ‚å¤´éƒ¨è¡¨çš„sectionçš„æ•°ç»„ç´¢å¼•ã€‚å¦‚ï¼šNdx&#x3D;1è¡¨ç¤ºåœ¨.textèŠ‚ï¼›Ndx&#x3D;3è¡¨ç¤ºåœ¨.dataèŠ‚</p><blockquote><p>Ndxè¡¨ç¤ºä¸­æœ‰<strong>3ä¸ªä¼ªèŠ‚ï¼š</strong></p></blockquote><blockquote><ul><li><strong><code>ABS</code>ï¼šä¸è¯¥è¢«é‡å®šä½çš„ç¬¦å·</strong></li><li><strong><code>UNDEF</code>ï¼šæœªå®šä¹‰çš„ç¬¦å·</strong></li><li><strong><code>COMMON</code>ï¼šæœªè¢«åˆ†é…ä½ç½®çš„åˆå§‹åŒ–çš„æ•°æ®ç›®æ ‡</strong></li></ul></blockquote><blockquote><p><strong>æ³¨æ„ï¼šå˜é‡countå’Œvalueå±äºä¸åŒsectionçš„åŸå› ï¼šcountåˆå§‹åŒ–äº†ï¼Œvalueæ²¡æœ‰åˆå§‹åŒ–</strong></p></blockquote><blockquote><p><strong>COMMONï¼šæœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡ï¼›.bssèŠ‚ï¼šæœªåˆå§‹åŒ–çš„é™æ€å˜é‡+åˆå§‹åŒ–ä¸º0çš„é™æ€&#x2F;å…¨å±€å˜é‡</strong></p></blockquote></blockquote><h3 id="4-ç¬¦å·è§£æ"><a href="#4-ç¬¦å·è§£æ" class="headerlink" title="4.ç¬¦å·è§£æ"></a>4.ç¬¦å·è§£æ</h3><p>å¯¹ä»¥ä¸‹æºæ–‡ä»¶è¿›è¡Œç¼–è¯‘linkerror.cè¿›è¡Œç¼–è¯‘æ±‡ç¼–ï¼Œç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶linkerror.oã€‚</p><p>å…¶ä¸­ï¼Œè¯¥ä»£ç <strong>ä»…å¯¹å‡½æ•°fooè¿›è¡Œå£°æ˜</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>gcc -c linkerror.c </code>ï¼Œç¼–è¯‘å¯ä»¥é€šè¿‡ï¼<font size=3 color=red>å½“ç¼–è¯‘å™¨é‡åˆ°ä¸€ä¸ªä¸æ˜¯åœ¨å½“å‰æ¨¡å—å®šä¹‰çš„ç¬¦å·(å˜é‡&#x2F;å‡½æ•°å)æ—¶ï¼Œä¼šå‡è®¾è¯¥ç¬¦å·æ˜¯åœ¨åœ¨å…¶ä»–æ¨¡å—åœ¨å®šä¹‰çš„ã€‚</font></p><p><font size=3 color=red>ä½†æ˜¯é“¾æ¥å™¨(ld)æ— æ³•è§£æå¯¹fooçš„å¼•ç”¨æ—¶ï¼Œå°±ä¼šç»ˆæ­¢ï¼</font></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># gcc <span class="token operator">-</span>Wall <span class="token operator">-</span>Og <span class="token operator">-</span>o linkerror linkerror<span class="token punctuation">.</span>c<span class="token operator">/</span>tmp<span class="token operator">/</span>cc5EcYAf<span class="token punctuation">.</span>oï¼šåœ¨å‡½æ•°â€˜mainâ€™ä¸­ï¼šlinkerror<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">.</span>text<span class="token operator">+</span><span class="token number">0x5</span><span class="token punctuation">)</span>ï¼šå¯¹â€˜fooâ€™æœªå®šä¹‰çš„å¼•ç”¨collect2<span class="token operator">:</span> é”™è¯¯ï¼šld è¿”å› <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><font size=4 color=red>å¼•å‡ºé—®é¢˜ï¼šâ€å…¨å±€ç¬¦å·â€åœ¨å¤šä¸ªå¯é‡å®šä½ç›®æ ‡æ–‡ä»¶ä¸­ã€åŒåå®šä¹‰ã€‘ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿ</font></p><p><strong>ç¼–è¯‘æ—¶ï¼Œç¼–è¯‘å™¨å‘æ±‡ç¼–å™¨è¾“å‡ºæ¯ä¸ªå…¨å±€ç¬¦å·çš„ç±»å‹ï¼š</strong></p><ul><li><strong><code>Strong symbols(å¼ºç¬¦å·)</code>ï¼šå‡½æ•°å’Œå·²åˆå§‹åŒ–çš„å…¨å±€å˜é‡</strong></li><li><strong><code>Weak symbols(å¼±ç¬¦å·)</code>ï¼šæœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡</strong></li></ul><p><strong>æ±‡ç¼–æ—¶ï¼Œæ±‡ç¼–å™¨å°†å¼ºå¼±ä¿¡æ¯éšå«åœ°ç¼–ç åœ¨ELFçš„ç¬¦å·è¡¨(.symtab)é‡Œ</strong></p><p><strong>é“¾æ¥æ—¶ï¼Œé“¾æ¥å™¨æ ¹æ®ä»¥ä¸‹3ç§æƒ…å†µå¤„ç†å¤šé‡å®šä¹‰çš„å…¨å±€ç¬¦å·ï¼š</strong></p><ol><li><p><strong>è§„åˆ™1ï¼šä¸å…è®¸æœ‰å¤šä¸ªåŒåçš„å¼ºç¬¦å·</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/*foo1.c*/</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/*bar1.c*/</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># gcc foo1<span class="token punctuation">.</span>c bar1<span class="token punctuation">.</span>c<span class="token operator">/</span>tmp<span class="token operator">/</span>ccSHeCo9<span class="token punctuation">.</span>oï¼šåœ¨å‡½æ•°â€˜mainâ€™ä¸­ï¼šbar1<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">.</span>text<span class="token operator">+</span><span class="token number">0x0</span><span class="token punctuation">)</span><span class="token operator">:</span> main çš„å¤šé‡å®šä¹‰<span class="token operator">/</span>tmp<span class="token operator">/</span>ccnLYE7L<span class="token punctuation">.</span>o<span class="token operator">:</span>foo1<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">.</span>text<span class="token operator">+</span><span class="token number">0x0</span><span class="token punctuation">)</span>ï¼šç¬¬ä¸€æ¬¡åœ¨æ­¤å®šä¹‰collect2<span class="token operator">:</span> é”™è¯¯ï¼šld è¿”å› <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><strong>è§„åˆ™2ï¼šä¸€ä¸ªå¼ºç¬¦å·ä¸å¤šä¸ªå¼±ç¬¦å·åŒåï¼Œé‚£ä¹ˆé€‰æ‹©å¼ºç¬¦å·</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/*foo2.c*/</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">15213</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"x = %d\n"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/*bar2.c*/</span><span class="token keyword">int</span> x<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        x <span class="token operator">=</span> <span class="token number">15212</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># gcc foo2<span class="token punctuation">.</span>c bar2<span class="token punctuation">.</span>c<span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># <span class="token punctuation">.</span><span class="token operator">/</span>a<span class="token punctuation">.</span>outx <span class="token operator">=</span> <span class="token number">15212</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å‡½æ•°få°†xçš„å€¼ç”±15213æ”¹ä¸º15212ã€‚ä¸€ä¸ªæ¨¡å—(bar2.c)é‡Œçš„xæœªåˆå§‹åŒ–(å¼±ç¬¦å·)ï¼Œé“¾æ¥å™¨ä¼šå®‰é™åœ°é€‰æ‹©å…¶ä»–æ¨¡å—(foo2.c)é‡Œå®šä¹‰çš„å¼ºç¬¦å·</p></li><li><p><strong>è§„åˆ™3ï¼šå¦‚æœæœ‰å¤šä¸ªå¼±ç¬¦å·åŒåï¼Œä»»æ„é€‰æ‹©ä¸€ä¸ª</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/*foo3.c*/</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">15212</span><span class="token punctuation">;</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">15213</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"x = 0x%x y = 0x%x\n"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/*bar3.c*/</span><span class="token keyword">double</span> x<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">0.0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># gcc foo3<span class="token punctuation">.</span>c bar3<span class="token punctuation">.</span>c<span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>ld<span class="token operator">:</span> Warning<span class="token operator">:</span> alignment <span class="token number">4</span> of symbol `x' in <span class="token operator">/</span>tmp<span class="token operator">/</span>ccWPcPGG<span class="token punctuation">.</span>o is smaller than <span class="token number">8</span> in <span class="token operator">/</span>tmp<span class="token operator">/</span>cc3MhEaU<span class="token punctuation">.</span>o<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ol><h4 id="é™æ€åº“-static-library"><a href="#é™æ€åº“-static-library" class="headerlink" title="é™æ€åº“(static library)"></a>é™æ€åº“(static library)</h4><p>åœ¨å…±äº«åº“å‡ºç°ä¹‹å‰ï¼Œ<strong>å…¬ç”¨åŠŸèƒ½(atoi&#x2F;printf&#x2F;scanf&#x2F;strcpy&#x2F;randç­‰)<strong>æ˜¯ä»¥</strong>é™æ€åº“</strong>çš„å½¢å¼å­˜åœ¨çš„ï¼Œå®ƒæŠŠ<strong>é€šç”¨åŠŸèƒ½æ¨¡å—çš„å¤šä¸ªç›®æ ‡æ–‡ä»¶æ‰“åŒ…åœ¨ä¸€èµ·å½¢æˆ<code>*.a</code>çš„æ–‡ä»¶(å¦‚libc.a)<strong>ï¼Œç”¨åˆ°å®ƒçš„ç¨‹åºåªéœ€è¦åœ¨é“¾æ¥æ—¶æŒ‡å®šè¿™ä¸ªåº“æ–‡ä»¶ï¼Œ</strong>é“¾æ¥å™¨å°±ä¼šä»è¿™ä¸ªåº“ä¸­æŠ½å–å‡ºç”¨åˆ°çš„åŠŸèƒ½ä»£ç æ‹·è´åˆ°ç›®æ ‡ç¨‹åºä¸­</strong>ï¼Œè€Œä¸éœ€è¦æ¯æ¬¡éƒ½å¯¹è¿™äº›é€šç”¨åŠŸèƒ½ä»£ç é‡æ–°ç¼–è¯‘ã€‚</p><p><strong>å¯¹æ–‡ä»¶<em>addvec.c</em>å’Œ<em>multvec.c</em>è¿›è¡Œç¼–è¯‘<code>gcc -c addvec.c multvec.c</code>ï¼Œå¾—åˆ°ç›®æ ‡æ¨¡å—</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> addcnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">addvec</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span> y<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span> z<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> i<span class="token punctuation">;</span>                addcnt<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                z<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> multcnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">multvec</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span> y<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span> z<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> i<span class="token punctuation">;</span>                multcnt<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                z<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ä½¿ç”¨<code>ARå·¥å…·</code>å°†ä¸¤ä¸ªç›®æ ‡æ¨¡å—<em>addvec.o multvec.o</em>æ‰“åŒ…æˆé™æ€åº“(<code>ar rcs libxxx.a xxx.o xxx.o</code>)</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># ar rcs linvector<span class="token punctuation">.</span>a addvec<span class="token punctuation">.</span>o multvec<span class="token punctuation">.</span>o<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä»¥main2.cæ–‡ä»¶ä¸ºä¾‹</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"vector.h"</span></span><span class="token keyword">int</span> x<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">int</span> y<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">int</span> z<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">addvec</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"z = [%d %d]\n"</span><span class="token punctuation">,</span> z<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> z<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­â€vector.hâ€ä¸­åŒ…å«å¯¹addvecå‡½æ•°çš„å£°æ˜ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">addvec</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span> y<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span> z<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>ç¼–è¯‘å’Œé“¾æ¥è¾“å…¥æ–‡ä»¶main2.oå’Œlibvector.a</strong></p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/1125E426BCF8DCF854B292C45FC50D8A.jpg" style="zoom:20%;" /><blockquote><p><strong>é“¾æ¥å™¨åˆ¤æ–­main2.oå¼•ç”¨äº†addvec.oå®šä¹‰çš„addvecç¬¦å·ï¼Œæ‰€ä»¥å¤åˆ¶addvec.oåˆ°å¯æ‰§è¡Œæ–‡ä»¶ã€‚</strong></p><p><strong>å› ä¸ºç¨‹åºæœªå¼•ç”¨multvec.0å®šä¹‰çš„ç¬¦å·ï¼Œæ‰€ä»¥é“¾æ¥å™¨å°±ä¸ä¼šå¤åˆ¶è¿™ä¸ªæ¨¡å—åˆ°å¯æ‰§è¡Œæ–‡ä»¶ã€‚</strong></p><p><strong>æ­¤å¤–ï¼Œé“¾æ¥å™¨è¿˜ä¼šå¤åˆ¶libc.aä¸­çš„printf.oç­‰Cç³»ç»Ÿè¿è¡Œæ—¶çš„å…¶ä»–æ¨¡å—ã€‚</strong></p></blockquote><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># gcc <span class="token operator">-</span>c main2<span class="token punctuation">.</span>c<span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># gcc <span class="token operator">-</span><span class="token keyword">static</span> <span class="token operator">-</span>o prog2c main2<span class="token punctuation">.</span>o <span class="token punctuation">.</span><span class="token operator">/</span>libvector<span class="token punctuation">.</span>a<span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># <span class="token punctuation">.</span><span class="token operator">/</span>prog2c z <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span> <span class="token number">6</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5-é‡å®šä½"><a href="#5-é‡å®šä½" class="headerlink" title="5.é‡å®šä½"></a>5.é‡å®šä½</h3><p>å½“æ±‡ç¼–å™¨ç”Ÿæˆä¸€ä¸ªç›®æ ‡æ¨¡å—æ—¶ï¼Œå®ƒå¹¶ä¸çŸ¥é“æ•°æ®å’Œä»£ç æœ€ç»ˆå°†æ”¾åœ¨å†…å­˜ä¸­çš„ä»€ä¹ˆä½ç½®ã€‚ä¹Ÿä¸çŸ¥é“æœ¬æ¨¡å—å¼•ç”¨çš„å¤–éƒ¨å®šä¹‰å‡½æ•°æˆ–å…¨å±€å˜é‡çš„æœ€ç»ˆä½ç½®ã€‚</p><p><strong><font size=3 color=red>å› æ­¤ï¼Œæ±‡ç¼–å™¨é‡åˆ°å¯¹æœ€ç»ˆä½ç½®æœªçŸ¥çš„ç›®æ ‡å¼•ç”¨ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªã€é‡å®šä½æ¡ç›®ã€‘ï¼Œå‘Šè¯‰é“¾æ¥å™¨å†å°†ç›®æ ‡æ–‡ä»¶åˆå¹¶ä¸ºå¯æ‰§è¡Œæ–‡ä»¶æ—¶å¦‚ä½•ä¿®æ”¹è¿™ä¸ªå¼•ç”¨ã€‚</font></strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/*é‡å®šä½æ¡ç›®-æ•°æ®ç»“æ„*/</span><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span><span class="token keyword">long</span> offset<span class="token punctuation">;</span><span class="token comment">//è¢«ä¿®æ”¹çš„å¼•ç”¨çš„èŠ‚åç§»é‡</span><span class="token keyword">long</span> type<span class="token operator">:</span><span class="token number">32</span><span class="token punctuation">,</span><span class="token comment">//å‘ŠçŸ¥é“¾æ¥å™¨å¦‚ä½•ä¿®æ”¹æ–°çš„å¼•ç”¨</span>    <span class="token comment">//ä¸»è¦ä¸¤ç§ï¼š1.R_X86_64_PC32(PCç›¸å¯¹åœ°å€)2.R_X86_64_32(ç»å¯¹åœ°å€)</span>symbol<span class="token operator">:</span><span class="token number">32</span><span class="token punctuation">;</span><span class="token comment">//è¡¨ç¤ºè¢«ä¿®æ”¹çš„å¼•ç”¨æ˜¯å“ªä¸ªç¬¦å·</span><span class="token keyword">long</span> addend<span class="token punctuation">;</span><span class="token comment">//æœ‰ç¬¦å·æ•°ï¼Œä¸€äº›ç±»å‹çš„é‡å®šä½è¦ä½¿ç”¨å®ƒå¯¹è¢«ä¿®æ”¹å¼•ç”¨çš„å€¼åšåç§»è°ƒæ•´(æŒ‡ä»¤é•¿åº¦)</span><span class="token punctuation">&#125;</span> ELF_Rela<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>ä»£ç çš„é‡å®šä½æ¡ç›®å­˜æ”¾åœ¨<code>.rel.text</code>ä¸­</strong></p><p><strong>å·²åˆå§‹åŒ–æ•°æ®çš„é‡å®šä½æ¡ç›®å­˜æ”¾åœ¨<code>.rel.data</code>ä¸­</strong></p></blockquote><h4 id="é‡å®šä½ç®—æ³•"><a href="#é‡å®šä½ç®—æ³•" class="headerlink" title="é‡å®šä½ç®—æ³•"></a>é‡å®šä½ç®—æ³•</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c">foreach section s <span class="token punctuation">&#123;</span>foreach relocation entry r <span class="token punctuation">&#123;</span>refptr <span class="token operator">=</span> s <span class="token operator">+</span> r<span class="token punctuation">.</span>offset<span class="token punctuation">;</span><span class="token comment">/*1.é‡å®šä½PCç›¸å¯¹å¼•ç”¨*/</span><span class="token keyword">if</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>type <span class="token operator">==</span> R_X86_64_PC32<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>refaddr <span class="token operator">=</span> <span class="token function">ADDR</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">+</span> r<span class="token punctuation">.</span>offset<span class="token punctuation">;</span><span class="token comment">/*refaddr:å¼•ç”¨çš„è¿è¡Œæ—¶åœ°å€*/</span><span class="token operator">*</span>refptr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">ADDR</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>symbol<span class="token punctuation">)</span> <span class="token operator">+</span> r<span class="token punctuation">.</span>addend <span class="token operator">-</span> refaddr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/*2.é‡å®šä½ç»å¯¹å¼•ç”¨*/</span><span class="token keyword">if</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>type <span class="token operator">==</span> R_X86_64_32<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token operator">*</span>refptr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">ADDR</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>symbol<span class="token punctuation">)</span> <span class="token operator">+</span> r<span class="token punctuation">.</span>addend<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="â‘ é‡å®šä½PCç›¸å¯¹å¼•ç”¨"><a href="#â‘ é‡å®šä½PCç›¸å¯¹å¼•ç”¨" class="headerlink" title="â‘ é‡å®šä½PCç›¸å¯¹å¼•ç”¨"></a>â‘ é‡å®šä½PCç›¸å¯¹å¼•ç”¨</h4><p><strong>ä¾‹ï¼šå¯¹æºæ–‡ä»¶<em>main.c</em>å’Œ<em>sum.c</em>è¿›è¡Œåæ±‡ç¼–ï¼š</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> array<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> val <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> i<span class="token punctuation">,</span> s <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                s <span class="token operator">+=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>å†ç”¨<code>objdump -dx main.o</code>å¯¹main,oè¿›è¡Œåç¼–è¯‘åç»“æœï¼š</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token punctuation">[</span>root@lhyEdu01 link<span class="token punctuation">]</span># objdump <span class="token operator">-</span>dx main<span class="token punctuation">.</span>o<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/image-20231229213448474.png" style="zoom: 50%;" /><p><strong>å‡½æ•°mainè°ƒç”¨sumå‡½æ•°ï¼Œsumå‡½æ•°æ˜¯åœ¨sum.oæ¨¡å—ä¸­å®šä¹‰çš„ï¼Œsumçš„é‡å®šä½æ¡ç›®ä¸ºï¼š</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c">r<span class="token punctuation">,</span>offset <span class="token operator">=</span> <span class="token number">0xf</span>r<span class="token punctuation">.</span>symbol <span class="token operator">=</span> sumr<span class="token punctuation">.</span>type   <span class="token operator">=</span> R_X86_64_PC32r<span class="token punctuation">.</span>addend <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">4</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong><u>è¿™äº›å­—æ®µå‘Šè¯‰é“¾æ¥å™¨ä¿®æ”¹å¼€å§‹äº0xfå¤„çš„32ä½PCç›¸å¯¹å¼•ç”¨ï¼Œè¿™æ ·åœ¨è¿è¡Œæ—¶å®ƒä¼šæŒ‡å‘sumä¾‹ç¨‹</u>ã€‚å‡è®¾é“¾æ¥å™¨å·²ç¡®å®šï¼š</strong></p><ul><li><strong><code>ADDR(s) = ADDR(.text)</code> &#x3D; 0x400d0</strong></li><li><strong><code>ADDR(r.symbol) = ADDR(sum)</code> &#x3D; 0x400e8</strong></li></ul><p><strong>ä½¿ç”¨<code>é‡å®šä½ç®—æ³•</code>çŸ¥ï¼š</strong></p><ol><li><p><strong>é“¾æ¥å™¨é¦–å…ˆç®—å‡ºå¼•ç”¨çš„<u>è¿è¡Œæ—¶åœ°å€</u>ï¼š</strong></p><p><strong>ref_addr &#x3D; ADDR(s) + r.offset &#x3D; 0x4004d0 + 0xf &#x3D; 0x4004df</strong> </p></li><li><p><strong>ç„¶åæ›´æ–°è¯¥å¼•ç”¨ï¼Œä½¿å¾—å®ƒå†è¿è¡Œæ—¶æŒ‡å‘sumç¨‹åº(å®é™…å°±æ˜¯æ±‚PCçš„offset)</strong></p><p><strong>ref_ptr &#x3D; ADDR(sum) - ref_addr + r.addend &#x3D; 0x4004e8 - 0x4004df +(-4) &#x3D; 0x5</strong></p></li></ol><p>å¾—åˆ°çš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼ŒcallæŒ‡ä»¤ç”±å¦‚ä¸‹å½¢å¼ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token number">4004</span>de<span class="token operator">:</span>e8 <span class="token number">05</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span>       callq  <span class="token number">4004e8</span> <span class="token operator">&lt;</span>sum<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="â‘¡é‡å®šä½ç»å¯¹å¼•ç”¨"><a href="#â‘¡é‡å®šä½ç»å¯¹å¼•ç”¨" class="headerlink" title="â‘¡é‡å®šä½ç»å¯¹å¼•ç”¨"></a>â‘¡é‡å®šä½ç»å¯¹å¼•ç”¨</h4><p><strong>movæŒ‡ä»¤å°†arrayåœ°å€(32ä½ç«‹å³æ•°)å¤åˆ¶åˆ°å¯„å­˜å™¨%ediä¸­ï¼Œsumå‡½æ•°æ˜¯åœ¨sum.oæ¨¡å—ä¸­å®šä¹‰çš„ï¼Œsumçš„é‡å®šä½æ¡ç›®ä¸ºï¼š</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c">r<span class="token punctuation">,</span>offset <span class="token operator">=</span> <span class="token number">0xa</span>r<span class="token punctuation">.</span>symbol <span class="token operator">=</span> arrayr<span class="token punctuation">.</span>type   <span class="token operator">=</span> R_X86_64_32r<span class="token punctuation">.</span>addend <span class="token operator">=</span> <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™äº›å­—æ®µå‘Šè¯‰é“¾æ¥å™¨ä¿®æ”¹å¼€å§‹äº0xaå¤„çš„32ä½ç»å¯¹å¼•ç”¨ï¼Œè¿™æ ·åœ¨è¿è¡Œæ—¶å®ƒä¼šæŒ‡å‘arrayçš„ç¬¬ä¸€ä¸ªå­—èŠ‚ã€‚å‡è®¾é“¾æ¥å™¨å·²ç¡®å®šï¼š</p><ul><li><strong><code>ADDR(r.symbol) = ADDR(array)</code> &#x3D; 0x601018</strong></li></ul><p>é“¾æ¥å™¨ä¿®æ”¹ç¬¬13è¡Œçš„å¼•ç”¨ï¼š</p><p>*<strong>ref_ptr &#x3D; (unsigned) ((ADDR(r.symbol) + r.addend)) &#x3D; (unsigned) (0x601018 + 0) &#x3D; 0x601018</strong></p><p>å¾—åˆ°çš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œæœºå™¨æŒ‡ä»¤ç”±å¦‚ä¸‹å½¢å¼ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token number">4004</span>d9<span class="token operator">:</span>bf <span class="token number">18</span> <span class="token number">10</span> <span class="token number">60</span> <span class="token number">00</span>       mov $<span class="token number">0x601018</span><span class="token punctuation">,</span> <span class="token operator">%</span>edi<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://typora-lhy-cs.oss-cn-nanjing.aliyuncs.com/D0D016AAD0F392AC3C3FFCEFEFAA42CC.jpg"></p><h3 id="6-å¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶-åŠ è½½è¿‡ç¨‹"><a href="#6-å¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶-åŠ è½½è¿‡ç¨‹" class="headerlink" title="6.å¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶&amp;åŠ è½½è¿‡ç¨‹"></a>6.å¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶&amp;åŠ è½½è¿‡ç¨‹</h3>]]></content>
      
      
      <categories>
          
          <category> Cè¯­è¨€ </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
